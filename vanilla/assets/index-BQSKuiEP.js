(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const ye=([e],[t])=>e===t?0:e<t?1:-1,Z=(e,t)=>{const n=ye(e,t);return n===0?e[1]===t[1]?0:e[1]<t[1]?1:-1:n},ve=([e,t])=>Z(e,t)===-1?[t,e]:[e,t],Ee=(e,t)=>e.reduce((n,r,a)=>(a!==0&&(n+=`
`),n+r.reduce((i,u)=>i+(ce(u)?u.text:t?t(u):""),"")),""),Se=e=>e.split(`
`).map(t=>t?[{text:t}]:[]),je=e=>e.t!==3;class re extends Array{static from(t){return new re(...t)}insert(t,n){return this.push({t:2,o:t,i:n}),this}delete(t,n){return this.push({t:1,l:t,u:n}),this}select(t,n){return this.push({t:3,p:t,h:n}),this}rebasePos(t){return this.reduce((n,r)=>je(r)?Oe(n,r):n,t)}}const ce=e=>"text"in e,ze=e=>ce(e)?e.text.length:1,tt=e=>e.reduce((t,n)=>t+ze(n),0),me=(e,t)=>{const n=[...e];if(n.length)for(const r of t){const a=n.length-1,i=n[a];ce(r)&&ce(i)?n[a]={text:i.text+r.text}:n.push(r)}else n.push(...t);return n},ue=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n],a=ze(r);if(a>t){const i=e.slice(0,n),u=e.slice(n+1);if(ce(r)){const b=r.text.slice(0,t),y=r.text.slice(t);b&&i.push({text:b}),y&&u.unshift({text:y})}else u.unshift(r);return[i,u]}t-=a}return[e,[]]},Ue=(e,t,n,r)=>{const[a]=n,[i]=r||n,u=ue(e[n[0]],n[1]),b=u[0],y=r?ue(e[r[0]],r[1])[1]:u[1],f=[...t];f.length?(f[0]=me(b,f[0]),f[f.length-1]=me(f[f.length-1],y)):f.push(me(b,y)),e.splice(a,i-a+1,...f)},nt=e=>{switch(e.t){case 1:return Z(e.l,e.u)===1;case 2:return!!Ee(e.i)}return!0},rt=(e,t)=>{switch(t.t){case 1:Ue(e,[],t.l,t.u);break;case 2:Ue(e,t.i,t.o)}},Oe=(e,t)=>{switch(t.t){case 1:{const{l:n,u:r}=t;if(Z(e,n)!==1)return Z(r,e)===1?[e[0]+n[0]-r[0],e[1]+(ye(r,e)===0?n[1]-r[1]:0)]:n;break}case 2:{const{o:n,i:r}=t,a=r.length,i=a-1;if(Z(e,n)!==1)return[e[0]+i,e[1]+(ye(e,n)===0?tt(r[a-1])-(i===0?0:n[1]):0)];break}}return e},at=(e,t,n)=>{const r=[...e],a=[...t];try{for(const i of n)nt(i)&&(je(i)?(rt(e,i),t[0]=Oe(t[0],i),t[1]=Oe(t[1],i)):(i.p&&(t[0]=i.p),i.h&&(t[1]=i.h)))}catch(i){console.error("rollback transaction:",i),e.length=0,e.push(...r),t[0]=a[0],t[1]=a[1]}};let Y,S,q,be,$e,we=!1,De=!1;const it=e=>e.nodeType===3,Te=e=>e.nodeType===1,st=e=>e.nodeType===8,lt=new Set(["EMBED","IMG","PICTURE","AUDIO","VIDEO","SVG","CANVAS","MATH","IFRAME","OBJECT"]),qe=e=>e.contentEditable==="false"||lt.has(e.tagName),ot=()=>S,We=()=>q===1?S.data.length:q===2?1:0,ut=e=>{Y.currentNode=Y.currentNode.parentNode.children[e]},Ie=e=>{const t=e.nextSibling;return!!t&&!st(t)},dt=()=>{for(;;){if(q===2){const e=S;for(;(S=Y.nextNode())&&e.contains(S););}else S=Y.nextNode();if(q=null,!S)break;if(be){if(be.contains(S)){if(we=!0,De)break}else if(we)break}if(it(S)){const e=S.data;if(e)return q=e===`
`?Ie(S)?3:6:1}else if(Te(S)){if(S.tagName==="BR")return q=Ie(S)?3:5;if(qe(S))return q=2;if($e(S))return q=4}}},Je=(e,t,{m:n,_:r},a)=>{try{return $e=r,Y=n.createTreeWalker(t,5),a&&(a.k&&(Y.currentNode=a.k,Y.previousNode()),a.D&&(be=a.D),De=a.v||!1),e(dt)}finally{Y=S=q=be=null,we=De=!1}},ft=Math.min,ct=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},vt=new Set(["DIV","H1","H2","H3","H4","H5","H6","P","PRE","LI","DT","DD","TR"]),pt=e=>vt.has(e.tagName),Ye=e=>e.ownerDocument,Ze=e=>Ye(e).getSelection(),ht=(e,t)=>{if(e.rangeCount){const n=e.getRangeAt(0);if(t.contains(n.commonAncestorContainer))return n}},Ve=(e,t,n)=>{const r=Ze(e);r.removeAllRanges(),r.addRange(t),n&&(r.collapseToEnd(),r.extend(t.startContainer,t.startOffset))},Le=(e,t,[n,r],a)=>{const i=Z(n,r),u=i===0,b=i===-1,y=b?r:n,f=b?n:r;if(y[0]===0&&y[1]===0&&u&&!t.hasChildNodes()){const D=e.createRange();return D.setStart(t,0),D.setEnd(t,0),Ve(t,D),!0}const L=Be(t,y,a);if(!L)return!1;const P=u?L:Be(t,f,a);if(!P)return!1;const E=e.createRange(),[B,G]=L,[H,k]=P;return Te(B)?G<1?E.setStartBefore(B):E.setStartAfter(B):E.setStart(B,G),Te(H)?k<1?E.setEndBefore(H):E.setEndAfter(H):E.setEnd(H,k),Ve(t,E,b),!0},Be=(e,[t,n],r)=>Je(a=>{let i,u=!1;for(;i=a();)if(i===4)u||(u=!0,t!==0&&ut(t));else{const b=We();if(n<=b)return[ot(),n];n-=b}},e,r),Ae=(e,t,n,r)=>{let a,i,u=!0;if(e===t&&!t.hasChildNodes())return[0,0];if(Te(t)&&!qe(t)&&t.hasChildNodes()){const y=ft(n,t.childNodes.length-1);t=t.childNodes[y],u=y===n,n=0}const b=((y,f)=>{let L=f;for(;;){const P=L.parentElement;if(P===y)break;L=P}return L})(e,t);return r._(b)?(a=b,i=(y=>{let f=0;for(;y=y.previousElementSibling;)f++;return f})(a)):(a=e,i=0),Je(y=>{let f,L=0;for(;f=y();)f===3?(i++,L=0):L+=We();return[i,L+n]},a,r,{D:t,v:u})},He=(e,t,{startOffset:n,startContainer:r,endOffset:a,endContainer:i})=>{const u=Ae(e,r,n,t);return[u,r===i&&n===a?u:Ae(e,i,a,t)]},gt=e=>re.from(e.map(t=>t.t===2?{...t,i:[t.i.reduce((n,r)=>me(n,r),[])]}:t)),pe=()=>{},mt=({schema:{single:e,js:t,doc:n,copy:r,paste:a},doc:i,isBlock:u=pt,onChange:b,onKeyDown:y})=>{let f=[[0,0],[0,0]],L=!1,P=pe,E=pe;const B=()=>G.get()[0],G=(s=>{let T=0,O=0;const U=Date.now,x=[s],M=()=>x[T];return{get:M,set:X=>{x[T]=X},undo:()=>T>0?(T--,M()):void 0,redo:()=>T<x.length-1?(T++,M()):void 0,push:X=>{const A=U();T!==0&&A-O<500&&T--,O=A,x[++T]=X,x.splice(T+1),T>500&&(T--,x.shift())}}})([n(i),f]),H=[],k=s=>{L||(H.unshift(s),ae(ie))},D=new Set,ae=s=>{D.has(s)||(D.add(s),ct(()=>{D.delete(s),s()}))},ie=()=>{if(H.length){let O,U=[...B()],x=[...f];for(;O=H.pop();)e&&(O=gt(O)),at(U,x,O);const M=B();T=M,(s=U).length===T.length&&s.every((X,A)=>X===T[A])||(G.set([M,f]),G.push([U,x]),b(t(U))),E(x)}var s,T};return{input:s=>{if(!window.InputEvent||typeof InputEvent.prototype.getTargetRanges!="function")return console.error("beforeinput event is not supported."),pe;const{contentEditable:T,role:O,ariaMultiLine:U,ariaReadOnly:x}=s,M=s.style.whiteSpace;s.role="textbox",s.style.whiteSpace="pre-wrap",e||(s.ariaMultiLine="true");let X=!1,A=!1,F=null,Q=null,I=!1,se=!1,W=!1;const o=Ye(s),l={m:o,_:u};P=()=>{s.contentEditable=L?"false":"true",s.ariaReadOnly=L?"true":null},P();const g=((d,p)=>{let h=!1;const m=[],N=$=>{h&&m.push(...$)},C=new MutationObserver($=>{N($),h||p()}),w=()=>{N(C.takeRecords())};return C.observe(d,{characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{M($){!h&&$&&w(),h=$},O:()=>(w(),m.splice(0)),I(){m.splice(0),C.disconnect()}}})(s,()=>{se&&(Le(o,s,f,l),Q!=null&&(clearTimeout(Q),Q=null))});E=d=>{f=d,Q=setTimeout(()=>{Le(o,s,d,l)})};const c=()=>{f=((d,p)=>{const h=Ze(d),m=ht(h,d);if(!m)return[[0,0],[0,0]];const N=He(d,p,m);return(h.anchorNode===h.focusNode?h.anchorOffset>h.focusOffset:2&(C=h.anchorNode,w=h.focusNode,C.compareDocumentPosition(w)))?[N[1],N[0]]:N;var C,w})(s,l)},v=()=>{const d=g.O();if(g.M(!1),d.length){let p;for(;p=d.pop();)if(p.type==="childList"){const{target:h,removedNodes:m,addedNodes:N,nextSibling:C}=p;for(let w=m.length-1;w>=0;w--)h.insertBefore(m[w],C);for(let w=N.length-1;w>=0;w--)h.removeChild(N[w])}else p.target.nodeValue=p.oldValue;g.O()}k(F),I=!1,F=null,A=Le(o,s,f,l)},j=d=>{if(!I){if(y&&y(d))d.preventDefault();else if((d.metaKey||d.ctrlKey)&&!d.altKey&&d.code==="KeyZ"&&(d.preventDefault(),g.M(!1),!L)){const p=d.shiftKey?G.redo():G.undo();p&&(b(t(p[0])),E(p[1]))}}},V=()=>{I||v()},z=d=>{d.preventDefault();const p=d.inputType;if(p.startsWith("format")||p==="historyUndo"||p==="historyRedo")return;I?g.M(!0):c();const h=d.getTargetRanges()[0];if(h){const m=He(s,l,h);let N=p==="insertParagraph"||p==="insertLineBreak"?`
`:d.data;if(N==null){const C=d.dataTransfer;C&&(N=C.getData("text/plain"))}F||(F=new re().select(...f)),Z(...m)!==0&&F.delete(...m),N&&F.insert(m[0],Se(N))}I||v()},ee=()=>{I||c(),I=!0},_=()=>{v()},te=()=>{se=!0,c()},K=()=>{se=!1},le=()=>{A?A=!1:!se||I||W||c()},oe=d=>{c(),Z(...f)!==0&&r(d,((p,h,m)=>ye(h,m)===0?[ue(ue(p[h[0]],m[1])[0],h[1])[1]]:[ue(p[h[0]],h[1])[1],...p.slice(h[0]+1,m[0]),ue(p[m[0]],m[1])[0]])(B(),...ve(f)),s)},xe=d=>{d.preventDefault(),oe(d.clipboardData)},Ce=d=>{d.preventDefault(),L||(oe(d.clipboardData),k(new re().delete(...ve(f))))},Re=d=>{d.preventDefault();const[p,h]=ve(f);k(new re().delete(p,h).insert(p,a(d.clipboardData,l)))},Me=d=>{d.preventDefault();const p=d.dataTransfer,h=((m,N,{clientX:C,clientY:w},$)=>{if(m.caretPositionFromPoint){const ne=m.caretPositionFromPoint(C,w);if(ne)return Ae(N,ne.offsetNode,ne.offset,$)}else if(m.caretRangeFromPoint){const ne=m.caretRangeFromPoint(C,w);if(ne)return Ae(N,ne.startContainer,ne.startOffset,$)}})(o,s,d,l);if(p&&h){const m=new re;W&&m.delete(...ve(f));const N=m.rebasePos(h);m.select(N,N).insert(N,a(p,l)).select(N),k(m),s.focus({preventScroll:!0})}},Pe=d=>{W=!0,oe(d.dataTransfer)},ke=()=>{W=!1};return o.addEventListener("selectionchange",le),s.addEventListener("keydown",j),s.addEventListener("input",V),s.addEventListener("beforeinput",z),s.addEventListener("compositionstart",ee),s.addEventListener("compositionend",_),s.addEventListener("focus",te),s.addEventListener("blur",K),s.addEventListener("copy",xe),s.addEventListener("cut",Ce),s.addEventListener("paste",Re),s.addEventListener("drop",Me),s.addEventListener("dragstart",Pe),s.addEventListener("dragend",ke),()=>{X||(X=!0,P=E=pe,s.contentEditable=T,s.role=O,s.ariaMultiLine=U,s.ariaReadOnly=x,s.style.whiteSpace=M,g.I(),o.removeEventListener("selectionchange",le),s.removeEventListener("keydown",j),s.removeEventListener("input",V),s.removeEventListener("beforeinput",z),s.removeEventListener("compositionstart",ee),s.removeEventListener("compositionend",_),s.removeEventListener("focus",te),s.removeEventListener("blur",K),s.removeEventListener("copy",xe),s.removeEventListener("cut",Ce),s.removeEventListener("paste",Re),s.removeEventListener("drop",Me),s.removeEventListener("dragstart",Pe),s.removeEventListener("dragend",ke))}},command:(s,...T)=>{const O=s(B(),f,...T);O&&k(O)},readonly:s=>{L=s,P()}}},yt=({multiline:e}={})=>({single:!e,js:Ee,doc:Se,copy:(t,n)=>{t.setData("text/plain",Ee(n))},paste:t=>Se(t.getData("text/plain"))});var Fe=11;function bt(e,t){var n=t.attributes,r,a,i,u,b;if(!(t.nodeType===Fe||e.nodeType===Fe)){for(var y=n.length-1;y>=0;y--)r=n[y],a=r.name,i=r.namespaceURI,u=r.value,i?(a=r.localName||a,b=e.getAttributeNS(i,a),b!==u&&(r.prefix==="xmlns"&&(a=r.name),e.setAttributeNS(i,a,u))):(b=e.getAttribute(a),b!==u&&e.setAttribute(a,u));for(var f=e.attributes,L=f.length-1;L>=0;L--)r=f[L],a=r.name,i=r.namespaceURI,i?(a=r.localName||a,t.hasAttributeNS(i,a)||e.removeAttributeNS(i,a)):t.hasAttribute(a)||e.removeAttribute(a)}}var he,Tt="http://www.w3.org/1999/xhtml",R=typeof document>"u"?void 0:document,At=!!R&&"content"in R.createElement("template"),Lt=!!R&&R.createRange&&"createContextualFragment"in R.createRange();function Nt(e){var t=R.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function Et(e){he||(he=R.createRange(),he.selectNode(R.body));var t=he.createContextualFragment(e);return t.childNodes[0]}function St(e){var t=R.createElement("body");return t.innerHTML=e,t.childNodes[0]}function Ot(e){return e=e.trim(),At?Nt(e):Lt?Et(e):St(e)}function ge(e,t){var n=e.nodeName,r=t.nodeName,a,i;return n===r?!0:(a=n.charCodeAt(0),i=r.charCodeAt(0),a<=90&&i>=97?n===r.toUpperCase():i<=90&&a>=97?r===n.toUpperCase():!1)}function wt(e,t){return!t||t===Tt?R.createElement(e):R.createElementNS(t,e)}function Dt(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}function Ne(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var _e={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();r==="OPTGROUP"&&(n=n.parentNode,r=n&&n.nodeName.toUpperCase()),r==="SELECT"&&!n.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}Ne(e,t,"selected")},INPUT:function(e,t){Ne(e,t,"checked"),Ne(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var a=r.nodeValue;if(a==n||!n&&a==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n=-1,r=0,a=e.firstChild,i,u;a;)if(u=a.nodeName&&a.nodeName.toUpperCase(),u==="OPTGROUP")i=a,a=i.firstChild;else{if(u==="OPTION"){if(a.hasAttribute("selected")){n=r;break}r++}a=a.nextSibling,!a&&i&&(a=i.nextSibling,i=null)}e.selectedIndex=n}}},fe=1,Ke=11,Ge=3,Xe=8;function J(){}function xt(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function Ct(e){return function(n,r,a){if(a||(a={}),typeof r=="string")if(n.nodeName==="#document"||n.nodeName==="HTML"||n.nodeName==="BODY"){var i=r;r=R.createElement("html"),r.innerHTML=i}else r=Ot(r);else r.nodeType===Ke&&(r=r.firstElementChild);var u=a.getNodeKey||xt,b=a.onBeforeNodeAdded||J,y=a.onNodeAdded||J,f=a.onBeforeElUpdated||J,L=a.onElUpdated||J,P=a.onBeforeNodeDiscarded||J,E=a.onNodeDiscarded||J,B=a.onBeforeElChildrenUpdated||J,G=a.skipFromChildren||J,H=a.addChild||function(o,l){return o.appendChild(l)},k=a.childrenOnly===!0,D=Object.create(null),ae=[];function ie(o){ae.push(o)}function s(o,l){if(o.nodeType===fe)for(var g=o.firstChild;g;){var c=void 0;l&&(c=u(g))?ie(c):(E(g),g.firstChild&&s(g,l)),g=g.nextSibling}}function T(o,l,g){P(o)!==!1&&(l&&l.removeChild(o),E(o),s(o,g))}function O(o){if(o.nodeType===fe||o.nodeType===Ke)for(var l=o.firstChild;l;){var g=u(l);g&&(D[g]=l),O(l),l=l.nextSibling}}O(n);function U(o){y(o);for(var l=o.firstChild;l;){var g=l.nextSibling,c=u(l);if(c){var v=D[c];v&&ge(l,v)?(l.parentNode.replaceChild(v,l),M(v,l)):U(l)}else U(l);l=g}}function x(o,l,g){for(;l;){var c=l.nextSibling;(g=u(l))?ie(g):T(l,o,!0),l=c}}function M(o,l,g){var c=u(l);if(c&&delete D[c],!g){var v=f(o,l);if(v===!1||(v instanceof HTMLElement&&(o=v,O(o)),e(o,l),L(o),B(o,l)===!1))return}o.nodeName!=="TEXTAREA"?X(o,l):_e.TEXTAREA(o,l)}function X(o,l){var g=G(o,l),c=l.firstChild,v=o.firstChild,j,V,z,ee,_;e:for(;c;){for(ee=c.nextSibling,j=u(c);!g&&v;){if(z=v.nextSibling,c.isSameNode&&c.isSameNode(v)){c=ee,v=z;continue e}V=u(v);var te=v.nodeType,K=void 0;if(te===c.nodeType&&(te===fe?(j?j!==V&&((_=D[j])?z===_?K=!1:(o.insertBefore(_,v),V?ie(V):T(v,o,!0),v=_,V=u(v)):K=!1):V&&(K=!1),K=K!==!1&&ge(v,c),K&&M(v,c)):(te===Ge||te==Xe)&&(K=!0,v.nodeValue!==c.nodeValue&&(v.nodeValue=c.nodeValue))),K){c=ee,v=z;continue e}V?ie(V):T(v,o,!0),v=z}if(j&&(_=D[j])&&ge(_,c))g||H(o,_),M(_,c);else{var le=b(c);le!==!1&&(le&&(c=le),c.actualize&&(c=c.actualize(o.ownerDocument||R)),H(o,c),U(c))}c=ee,v=z}x(o,v,V);var oe=_e[o.nodeName];oe&&oe(o,l)}var A=n,F=A.nodeType,Q=r.nodeType;if(!k){if(F===fe)Q===fe?ge(n,r)||(E(n),A=Dt(n,wt(r.nodeName,r.namespaceURI))):A=r;else if(F===Ge||F===Xe){if(Q===F)return A.nodeValue!==r.nodeValue&&(A.nodeValue=r.nodeValue),A;A=r}}if(A===r)E(n);else{if(r.isSameNode&&r.isSameNode(A))return;if(M(A,r,k),ae)for(var I=0,se=ae.length;I<se;I++){var W=D[ae[I]];W&&T(W,W.parentNode,!1)}}return!k&&A!==n&&n.parentNode&&(A.actualize&&(A=A.actualize(n.ownerDocument||R)),n.parentNode.replaceChild(A,n)),A}}var Rt=Ct(bt);const Mt=document.getElementById("root"),de=document.createElement("div");de.style.backgroundColor="white";de.style.border="solid 1px darkgray";de.style.padding="8px";Mt.appendChild(de);const Qe=e=>{let t="";for(const n of e.split(`
`))t+=`<div>${n||"<br />"}</div>`;Rt(de,`<div>${t}</div>`,{childrenOnly:!0})},et=`Hello world.
ã“ã‚“ã«ã¡ã¯ã€‚
ðŸ‘â¤ï¸ðŸ§‘â€ðŸ§‘â€ðŸ§’`;Qe(et);mt({doc:et,schema:yt({multiline:!0}),onChange:e=>{Qe(e)}}).input(de);
