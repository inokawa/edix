(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();let ge,N,_,Ae,Le=!1;const tt=e=>e.nodeType===3,me=e=>e.nodeType===1,nt=e=>e.nodeType===8,rt=new Set(["DIV","H1","H2","H3","H4","H5","H6","P","PRE","LI","DT","DD","TR"]),it=new Set(["EMBED","IMG","PICTURE","AUDIO","VIDEO","SVG","CANVAS","MATH","IFRAME","OBJECT"]),at=e=>rt.has(e.tagName),Ee=()=>N,$e=()=>_===1?N.data.length:_===2?1:0,Ue=e=>{const t=e.nextSibling;return!!t&&!nt(t)},st=e=>{for(;;){if(_===2){const t=N;for(;(N=ge.nextNode())&&t.contains(N););}else N=ge.nextNode();if(_=null,!N||e&&N===e)break;if(tt(N)){if(N.data!==`
`)return _=1;if(Ue(N))return _=3}else if(me(N)){const t=N.tagName;if(t==="BR"){const n=Le;if(Le=!0,Ue(N))return _=3;if(!n)return _=5}else{if(N.contentEditable==="false"||it.has(t))return _=2;if(Ae(N)){const n=N.previousElementSibling;if(n&&Ae(n))return _=4}}}}},Oe=(e,t,n,r)=>{try{return Ae=r.t||at,ge=t.createTreeWalker(n,5),e(st)}finally{ge=N=_=null,Le=!1}},Ne=([e],[t])=>e===t?0:e<t?1:-1,ee=(e,t)=>{const n=Ne(e,t);return n===0?e[1]===t[1]?0:e[1]<t[1]?1:-1:n},{min:Be}=Math,lt=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},Ye=e=>e.ownerDocument,De=e=>Ye(e).getSelection(),je=(e,t)=>{if(e.rangeCount){const n=e.getRangeAt(0);if(t.contains(n.commonAncestorContainer))return n}},Ve=(e,t,n)=>{const r=De(e);r.removeAllRanges(),r.addRange(t),n&&(r.collapseToEnd(),r.extend(t.startContainer,t.startOffset))},Te=(e,t,[n,r],i,a)=>{const s=ee(n,r),f=s===0,p=s===-1,u=p?r:n,g=p?n:r;if(u[0]===0&&u[1]===0&&f&&!t.hasChildNodes()){const b=e.createRange();return b.setStart(t,0),b.setEnd(t,0),Ve(t,b),!0}const S=He(e,t,u,i,a);if(!S)return!1;const T=f?S:He(e,t,g,i,a);if(!T)return!1;const x=e.createRange();{const[b,L]=S;me(b)?L<1?x.setStartBefore(b):x.setStartAfter(b):x.setStart(b,Be(L,b.data.length))}{const[b,L]=T;me(b)?L<1?x.setEndBefore(b):x.setEndAfter(b):x.setEnd(b,Be(L,b.data.length))}return Ve(t,x,p),!0},He=(e,t,[n,r],i,a)=>Oe(s=>{for(;s();){const f=$e();if(r<=f)return[Ee(),r];r-=f}},e,i||t.childElementCount===0?t:t.children[n],a),fe=(e,t,n,r,i,a)=>{let s,f=n;if(i||t.childElementCount===0)f=t,s=0;else{for(;;){const p=f.parentElement;if(p===t)break;f=p}s=Array.prototype.indexOf.call(t.children,f)}return me(n)&&(n=n.childNodes[r],r=0),Oe(p=>{let u,g=0;for(;u=p(n);)u===3?(s++,g=0):g+=$e();return[s,g+r]},e,f,a)},Ie=(e,t,n,r)=>{const i=De(t),a=je(i,t);if(!a)return[[0,0],[0,0]];const{startOffset:s,startContainer:f,endOffset:p,endContainer:u}=a,g=f===u?i.anchorOffset>i.focusOffset:!!(2&i.anchorNode.compareDocumentPosition(i.focusNode));let S,T;if(t!==f||n)S=fe(e,t,f,s,n,r),T=i.isCollapsed?S:fe(e,t,u,p,n,r);else{if(!(s===0&&p!==0&&t.children.length<=p))return[[0,0],[0,0]];S=[0,0],T=fe(e,t,t.lastElementChild,t.lastElementChild.textContent.length,n,r)}return[g?T:S,g?S:T]},ce=(e,t,n)=>Oe(r=>{let i,a=null,s="";const f=[],p=g=>{a||(a=[]),s&&(a.push(s),s=""),g&&a.push(g)},u=()=>{p(),a&&f.push(a),a=null};for(;i=r();)i===1?s+=Ee().data:i===2?p(Ee()):i!==3&&i!==4||u();return u(),f},e,t,n),ye=e=>typeof e=="string",Ce=e=>ye(e)?e.length:1,ot=(e,t,n)=>{const r=e[t];ye(n)&&ye(r)?e[t]=r+n:e.splice(t+1,0,n)},he=(...e)=>{const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(n===0)t.push(...r);else for(const i of r)ot(t,t.length-1,i)}return t},Fe=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n],i=Ce(r);if(i>t){const a=e.slice(0,n),s=e.slice(n+1);return ye(r)?(a.push(r.slice(0,t)),s.unshift(r.slice(t))):t===0?s.unshift(r):a.push(r),[a,s]}t-=i}return[e,[]]},_e=(e,t,n,r)=>[e[0]+n,e[1]+(Ne(e,t)===0?r-(n===0?0:t[1]):0)],ke=(e,t,n)=>ee(n,e)===1?[e[0]-n[0]-t[0],e[1]+(Ne(n,e)===0?t[1]-n[1]:0)]:t,Je=(e,t,n,r)=>{const[i]=n,[a]=r||n,s=Fe(e[n[0]],n[1]),f=s[0],p=r?Fe(e[r[0]],r[1])[1]:s[1],u=[...t];u.length?(u[0]=he(f,u[0]),u[u.length-1]=he(u[u.length-1],p)):u.push(he(f,p)),e.splice(i,a-i+1,...u)},Se=(e,t,[n,r]=t)=>{const i=ee(n,r);if(i!==0){const a=i===-1;((s,f,p,u)=>{const[g,S]=f;Je(s,[],p,u),ee(g,p)!==1&&(f[0]=ke(g,p,u)),ee(S,p)!==1&&(f[1]=ke(S,p,u))})(e,t,a?r:n,a?n:r)}},Ze=(e,t,n)=>{Se(e,t),((r,i,a,s)=>{const[f,p]=i,u=a.length,g=u-1,S=a[u-1].reduce((T,x)=>T+Ce(x),0);Je(r,a,s),ee(f,s)!==1&&(i[0]=_e(f,s,g,S)),ee(p,s)!==1&&(i[1]=_e(p,s,g,S))})(e,t,n,t[0])},ct=(e,t,n)=>{Ze(e,t,n.split(`
`).map(r=>[r]))},dt=(e,t,n)=>{t[0]=t[1]=n},ft=(e,{schema:{single:t,data:n,copy:r,paste:i},isBlock:a,onChange:s})=>{const{contentEditable:f,role:p,ariaMultiLine:u,ariaReadOnly:g}=e,S=e.style.whiteSpace;e.role="textbox",e.style.whiteSpace="pre-wrap",t||(e.ariaMultiLine="true");let T=!1,x=!1,b=!1,L=[[0,0],[0,0]],z=null,U=!1,K=!1,G=!1;const R={t:a},$=()=>{e.contentEditable=T?"false":"true",e.ariaReadOnly=T?"true":null};$();const Y=[],D=Ye(e),j=(l=>{let d=0,A=0;const y=Date.now,O=[l],w=()=>O[d];return{get:w,set:P=>{O[d]=P},undo:()=>d>0?(d--,w()):void 0,redo:()=>d<O.length-1?(d++,w()):void 0,push:P=>{const C=y();d!==0&&C-A<500&&d--,A=C,O[++d]=P,O.splice(d+1),d>500&&(d--,O.shift())}}})([n(ce(D,e,R)),L]),I=((l,d)=>{let A=!1;const y=[],O=C=>{A&&y.push(...C)},w=new MutationObserver(C=>{O(C),A||d()}),P=()=>{O(w.takeRecords())};return w.observe(l,{characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{o(C){!A&&C&&P(),A=C},i:()=>(P(),y.splice(0)),l(){y.splice(0),w.disconnect()}}})(e,()=>{K&&(Te(D,e,L,t,R),z!=null&&(clearTimeout(z),z=null))}),ie=new Set,E=l=>{ie.has(l)||(ie.add(l),lt(()=>{ie.delete(l),l()}))},J=()=>{const l=L;z=setTimeout(()=>{Te(D,e,l,t,R)})},ae=(l,d,A)=>{if(!T){t&&([l,d]=((O,[[w,P],[C,H]])=>{let k=0,Pe=0;for(let oe=0;oe<O.length;oe++)for(const et of O[oe]){const Me=Ce(et);oe<w&&(k+=Me),oe<C&&(Pe+=Me)}return[[he(...O)],[[0,k+P],[0,Pe+H]]]})(l,d));const y=n(l);j.set([j.get()[0],A]),j.push([y,d]),L=d,s(y)}J()},te=()=>{L=Ie(D,e,t,R)},ue=()=>{const l=I.i();if(I.o(!1),l.length){const d=Ie(D,e,t,R),A=ce(D,e,R);let y;for(;y=l.pop();)if(y.type==="childList"){const{target:O,removedNodes:w,addedNodes:P,nextSibling:C}=y;for(let H=w.length-1;H>=0;H--)O.insertBefore(w[H],C);for(let H=P.length-1;H>=0;H--)O.removeChild(P[H])}else y.target.nodeValue=y.oldValue;I.i(),b=Te(D,e,L,t,R),ae(A,d,L)}},se=()=>{if(Y.length){const l=[...L],d=ce(D,e,R);let A;for(;A=Y.pop();)A[0](d,l,...A[1]);ae(d,l,L)}},o=(l,...d)=>{Y.unshift([l,d]),E(se)},c=l=>{if(!U&&(l.metaKey||l.ctrlKey)&&!l.altKey&&l.code==="KeyZ"&&(l.preventDefault(),I.o(!1),!T)){const d=l.shiftKey?j.redo():j.undo();d&&(L=d[1],s(d[0]),J())}},m=()=>{U||E(ue)},v=l=>{switch(l.inputType){case"historyUndo":case"historyRedo":return void l.preventDefault();case"insertLineBreak":case"insertParagraph":if(t)return void l.preventDefault()}I.o(!0)},h=()=>{U=!0},X=()=>{U=!1,E(ue)},B=()=>{K=!0,te()},q=()=>{K=!1},Z=()=>{b?b=!1:!K||U||G||te()},V=l=>{const d=(A=>{const y=je(De(A),A);if(y)return y.cloneContents()})(e);d&&r(l,ce(D,d,R),d)},Q=l=>{const d=i(l);typeof d=="string"?o(ct,d):o(Ze,ce(D,d,R))},F=l=>{l.preventDefault(),V(l.clipboardData)},ne=l=>{l.preventDefault(),T||(V(l.clipboardData),o(Se))},le=l=>{l.preventDefault(),Q(l.clipboardData)},we=l=>{l.preventDefault();const d=l.dataTransfer,A=((y,O,{clientX:w,clientY:P},C,H)=>{if(y.caretPositionFromPoint){const k=y.caretPositionFromPoint(w,P);if(k)return fe(y,O,k.offsetNode,k.offset,C,H)}else if(y.caretRangeFromPoint){const k=y.caretRangeFromPoint(w,P);if(k)return fe(y,O,k.startContainer,k.startOffset,C,H)}})(D,e,l,t,R);d&&A&&(o(dt,A),G?o(Se,L):e.focus(),Q(d))},xe=l=>{G=!0,V(l.dataTransfer)},Re=()=>{G=!1};return D.addEventListener("selectionchange",Z),e.addEventListener("keydown",c),e.addEventListener("input",m),e.addEventListener("beforeinput",v),e.addEventListener("compositionstart",h),e.addEventListener("compositionend",X),e.addEventListener("focus",B),e.addEventListener("blur",q),e.addEventListener("copy",F),e.addEventListener("cut",ne),e.addEventListener("paste",le),e.addEventListener("drop",we),e.addEventListener("dragstart",xe),e.addEventListener("dragend",Re),{dispose:()=>{x||(x=!0,e.contentEditable=f,e.role=p,e.ariaMultiLine=u,e.ariaReadOnly=g,e.style.whiteSpace=S,I.l(),D.removeEventListener("selectionchange",Z),e.removeEventListener("keydown",c),e.removeEventListener("input",m),e.removeEventListener("beforeinput",v),e.removeEventListener("compositionstart",h),e.removeEventListener("compositionend",X),e.removeEventListener("focus",B),e.removeEventListener("blur",q),e.removeEventListener("copy",F),e.removeEventListener("cut",ne),e.removeEventListener("paste",le),e.removeEventListener("drop",we),e.removeEventListener("dragstart",xe),e.removeEventListener("dragend",Re))},readonly:l=>{T=l,$()}}},Ke=e=>e.reduce((t,n,r)=>(r!==0&&(t+=`
`),t+n.reduce((i,a)=>i+(typeof a=="string"?a:""),"")),""),ut=({multiline:e}={})=>({single:!e,data:Ke,copy:(t,n)=>{t.setData("text/plain",Ke(n))},paste:t=>t.getData("text/plain")});var Ge=11;function vt(e,t){var n=t.attributes,r,i,a,s,f;if(!(t.nodeType===Ge||e.nodeType===Ge)){for(var p=n.length-1;p>=0;p--)r=n[p],i=r.name,a=r.namespaceURI,s=r.value,a?(i=r.localName||i,f=e.getAttributeNS(a,i),f!==s&&(r.prefix==="xmlns"&&(i=r.name),e.setAttributeNS(a,i,s))):(f=e.getAttribute(i),f!==s&&e.setAttribute(i,s));for(var u=e.attributes,g=u.length-1;g>=0;g--)r=u[g],i=r.name,a=r.namespaceURI,a?(i=r.localName||i,t.hasAttributeNS(a,i)||e.removeAttributeNS(a,i)):t.hasAttribute(i)||e.removeAttribute(i)}}var ve,pt="http://www.w3.org/1999/xhtml",M=typeof document>"u"?void 0:document,ht=!!M&&"content"in M.createElement("template"),gt=!!M&&M.createRange&&"createContextualFragment"in M.createRange();function mt(e){var t=M.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function yt(e){ve||(ve=M.createRange(),ve.selectNode(M.body));var t=ve.createContextualFragment(e);return t.childNodes[0]}function Tt(e){var t=M.createElement("body");return t.innerHTML=e,t.childNodes[0]}function bt(e){return e=e.trim(),ht?mt(e):gt?yt(e):Tt(e)}function pe(e,t){var n=e.nodeName,r=t.nodeName,i,a;return n===r?!0:(i=n.charCodeAt(0),a=r.charCodeAt(0),i<=90&&a>=97?n===r.toUpperCase():a<=90&&i>=97?r===n.toUpperCase():!1)}function At(e,t){return!t||t===pt?M.createElement(e):M.createElementNS(t,e)}function Lt(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}function be(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var Xe={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();r==="OPTGROUP"&&(n=n.parentNode,r=n&&n.nodeName.toUpperCase()),r==="SELECT"&&!n.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}be(e,t,"selected")},INPUT:function(e,t){be(e,t,"checked"),be(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var i=r.nodeValue;if(i==n||!n&&i==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n=-1,r=0,i=e.firstChild,a,s;i;)if(s=i.nodeName&&i.nodeName.toUpperCase(),s==="OPTGROUP")a=i,i=a.firstChild;else{if(s==="OPTION"){if(i.hasAttribute("selected")){n=r;break}r++}i=i.nextSibling,!i&&a&&(i=a.nextSibling,a=null)}e.selectedIndex=n}}},de=1,qe=11,ze=3,We=8;function W(){}function Et(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function St(e){return function(n,r,i){if(i||(i={}),typeof r=="string")if(n.nodeName==="#document"||n.nodeName==="HTML"||n.nodeName==="BODY"){var a=r;r=M.createElement("html"),r.innerHTML=a}else r=bt(r);else r.nodeType===qe&&(r=r.firstElementChild);var s=i.getNodeKey||Et,f=i.onBeforeNodeAdded||W,p=i.onNodeAdded||W,u=i.onBeforeElUpdated||W,g=i.onElUpdated||W,S=i.onBeforeNodeDiscarded||W,T=i.onNodeDiscarded||W,x=i.onBeforeElChildrenUpdated||W,b=i.skipFromChildren||W,L=i.addChild||function(o,c){return o.appendChild(c)},z=i.childrenOnly===!0,U=Object.create(null),K=[];function G(o){K.push(o)}function R(o,c){if(o.nodeType===de)for(var m=o.firstChild;m;){var v=void 0;c&&(v=s(m))?G(v):(T(m),m.firstChild&&R(m,c)),m=m.nextSibling}}function $(o,c,m){S(o)!==!1&&(c&&c.removeChild(o),T(o),R(o,m))}function Y(o){if(o.nodeType===de||o.nodeType===qe)for(var c=o.firstChild;c;){var m=s(c);m&&(U[m]=c),Y(c),c=c.nextSibling}}Y(n);function D(o){p(o);for(var c=o.firstChild;c;){var m=c.nextSibling,v=s(c);if(v){var h=U[v];h&&pe(c,h)?(c.parentNode.replaceChild(h,c),I(h,c)):D(c)}else D(c);c=m}}function j(o,c,m){for(;c;){var v=c.nextSibling;(m=s(c))?G(m):$(c,o,!0),c=v}}function I(o,c,m){var v=s(c);if(v&&delete U[v],!m){var h=u(o,c);if(h===!1||(h instanceof HTMLElement&&(o=h,Y(o)),e(o,c),g(o),x(o,c)===!1))return}o.nodeName!=="TEXTAREA"?ie(o,c):Xe.TEXTAREA(o,c)}function ie(o,c){var m=b(o,c),v=c.firstChild,h=o.firstChild,X,B,q,Z,V;e:for(;v;){for(Z=v.nextSibling,X=s(v);!m&&h;){if(q=h.nextSibling,v.isSameNode&&v.isSameNode(h)){v=Z,h=q;continue e}B=s(h);var Q=h.nodeType,F=void 0;if(Q===v.nodeType&&(Q===de?(X?X!==B&&((V=U[X])?q===V?F=!1:(o.insertBefore(V,h),B?G(B):$(h,o,!0),h=V,B=s(h)):F=!1):B&&(F=!1),F=F!==!1&&pe(h,v),F&&I(h,v)):(Q===ze||Q==We)&&(F=!0,h.nodeValue!==v.nodeValue&&(h.nodeValue=v.nodeValue))),F){v=Z,h=q;continue e}B?G(B):$(h,o,!0),h=q}if(X&&(V=U[X])&&pe(V,v))m||L(o,V),I(V,v);else{var ne=f(v);ne!==!1&&(ne&&(v=ne),v.actualize&&(v=v.actualize(o.ownerDocument||M)),L(o,v),D(v))}v=Z,h=q}j(o,h,B);var le=Xe[o.nodeName];le&&le(o,c)}var E=n,J=E.nodeType,ae=r.nodeType;if(!z){if(J===de)ae===de?pe(n,r)||(T(n),E=Lt(n,At(r.nodeName,r.namespaceURI))):E=r;else if(J===ze||J===We){if(ae===J)return E.nodeValue!==r.nodeValue&&(E.nodeValue=r.nodeValue),E;E=r}}if(E===r)T(n);else{if(r.isSameNode&&r.isSameNode(E))return;if(I(E,r,z),K)for(var te=0,ue=K.length;te<ue;te++){var se=U[K[te]];se&&$(se,se.parentNode,!1)}}return!z&&E!==n&&n.parentNode&&(E.actualize&&(E=E.actualize(n.ownerDocument||M)),n.parentNode.replaceChild(E,n)),E}}var Ot=St(vt);const Nt=document.getElementById("root"),re=document.createElement("div");re.style.backgroundColor="white";re.style.border="solid 1px darkgray";re.style.padding="8px";Nt.appendChild(re);const Qe=e=>{let t="";for(const n of e.split(`
`))t+=`<div>${n||"<br />"}</div>`;Ot(re,`<div>${t}</div>`,{childrenOnly:!0})};Qe(`Hello World.
こんにちは。
👍❤️🧑‍🧑‍🧒`);ft(re,{schema:ut({multiline:!0}),onChange:e=>{Qe(e)}});
