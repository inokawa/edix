(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();let ue,N,B,ye=!1;const $e=e=>e.nodeType===3,ve=e=>e.nodeType===1,je=e=>e.nodeType===8,Ne=new Set(["DIV","H1","H2","H3","H4","H5","H6","P","PRE","LI","DT","DD","TR"]),Je=new Set(["EMBED","IMG","PICTURE","AUDIO","VIDEO","SVG","CANVAS","MATH","IFRAME","OBJECT"]),Te=()=>N,Fe=()=>B===1?N.data.length:B===2?1:0,Ce=e=>!!e.nextSibling,Ye=e=>{for(;;){if(B===2){const n=N;for(;(N=ue.nextNode())&&n.contains(N););}else N=ue.nextNode();if(B=null,!N||e&&N===e)break;if($e(N)){if(N.data!==`
`)return B=1;if(Ce(N))return B=3}else if(ve(N)){const n=N.tagName;if(n==="BR"){const t=ye;if(ye=!0,Ce(N))return B=3;if(!t)return B=5}else{if(N.contentEditable==="false"||Je.has(n))return B=2;if(Ne.has(n)){const t=N.previousElementSibling;if(t&&Ne.has(t.tagName))return B=4}}}}},Ae=(e,n,t)=>{try{return ue=n.createTreeWalker(t,5),e(Ye)}finally{ue=N=B=null,ye=!1}},_e=([e,n],[t,r])=>e===t?n===r?0:n<r?1:-1:e<t?1:-1,{min:we}=Math,Ze=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},ke=e=>e.ownerDocument,Le=e=>ke(e).getSelection(),Ke=(e,n)=>{if(e.rangeCount){const t=e.getRangeAt(0);if(n.contains(t.commonAncestorContainer))return t}},xe=(e,n,t)=>{const r=Le(e);r.removeAllRanges(),r.addRange(n),t&&(r.collapseToEnd(),r.extend(n.startContainer,n.startOffset))},he=(e,n,[t,r],a)=>{const i=_e(t,r),s=i===0,u=i===-1,v=u?r:t,h=u?t:r;if(v[0]===0&&v[1]===0&&s&&!n.hasChildNodes()){const y=e.createRange();return y.setStart(n,0),y.setEnd(n,0),xe(n,y),!0}const m=Me(e,n,v,a);if(!m)return!1;const D=s?m:Me(e,n,h,a);if(!D)return!1;const O=e.createRange();{const[y,A]=m;ve(y)?A<1?O.setStartBefore(y):O.setStartAfter(y):O.setStart(y,we(A,y.data.length))}{const[y,A]=D;ve(y)?A<1?O.setEndBefore(y):O.setEndAfter(y):O.setEnd(y,we(A,y.data.length))}return xe(n,O,u),!0},Me=(e,n,[t,r],a)=>Ae(i=>{for(;i();){const s=Fe();if(r<=s)return[Te(),r];r-=s}},e,a||n.childElementCount===0?n:n.children[t]),ge=(e,n,t,r,a)=>{let i,s=t;if(a||n.childElementCount===0)s=n,i=0;else{for(;;){const u=s.parentElement;if(u===n)break;s=u}i=Array.prototype.indexOf.call(n.children,s)}return ve(t)&&(t=t.childNodes[r],r=0),Ae(u=>{let v,h=0;for(;v=u(t);)v===3?(i++,h=0):h+=Fe();return[i,h+r]},e,s)},Re=(e,n,t)=>{const r=Le(n),a=Ke(r,n);if(!a)return[[0,0],[0,0]];const{startOffset:i,startContainer:s,endOffset:u,endContainer:v}=a,h=s===v?r.anchorOffset>r.focusOffset:!!(2&r.anchorNode.compareDocumentPosition(r.focusNode));let m,D;if(n!==s||t)m=ge(e,n,s,i,t),D=r.isCollapsed?m:ge(e,n,v,u,t);else{if(!(i===0&&u!==0&&n.children.length<=u))return[[0,0],[0,0]];m=[0,0],D=ge(e,n,n.lastElementChild,n.lastElementChild.textContent.length,t)}return[h?D:m,h?m:D]},ae=(e,n)=>Ae(t=>{let r,a=null,i="";const s=[],u=h=>{a||(a=[]),i&&(a.push(i),i=""),h&&a.push(h)},v=()=>{u(),a&&s.push(a),a=null};for(;r=t();)r===1?i+=Te().data:r===2?u(Te()):r!==3&&r!==4||v();return v(),s},e,n),pe=e=>typeof e=="string",Ee=e=>pe(e)?e.length:1,Qe=(e,n,t)=>{const r=e[n];pe(t)&&pe(r)?e[n]=r+t:e.splice(n+1,0,t)},se=(...e)=>{const n=[];for(let t=0;t<e.length;t++){const r=e[t];if(t===0)n.push(...r);else for(const a of r)Qe(n,n.length-1,a)}return n},be=(e,[n,t])=>{const r=e[n];for(let a=0;a<r.length;a++){const i=r[a],s=Ee(i);if(s>t){const u=r.slice(0,a),v=r.slice(a+1);return pe(i)?(u.push(i.slice(0,t)),v.unshift(i.slice(t))):t===0?v.unshift(i):u.push(i),[u,v]}t-=s}return[r,[]]},Ge=(e,n)=>{e[0]=e[1]=n},Xe=(e,n)=>{const[t,r]=n,a=_e(t,r);if(a!==0){const i=a===-1,s=i?r:t;((u,v,h)=>{const m=v[0],D=h[0];u.splice(m,D-m+1,se(be(u,v)[0],be(u,h)[1]))})(e,s,i?t:r),Ge(n,s)}},ze=(e,n,t)=>{Xe(e,n);const r=n[0],a=t.length,[i,s]=r,u=t[a-1].reduce((v,h)=>v+Ee(h),0);((v,h,m)=>{const[D,O]=be(v,m),y=h.length,[A]=m;if(y===1)v[A]=se(D,h[0],O);else{const[k,...R]=h,x=R.pop();v.splice(A,1,se(D,k),...R,se(x,O))}})(e,t,r),Ge(n,a===1?[i,s+u]:[i+a-1,u])},et=(e,n,t)=>{ze(e,n,t.split(`
`).map(r=>[r]))},tt=(e,{readonly:n,schema:{single:t,data:r,plain:a},onChange:i})=>{const{contentEditable:s,role:u,ariaMultiLine:v,ariaReadOnly:h}=e,m=e.style.whiteSpace,D=()=>{e.contentEditable=n?"false":"true",e.ariaReadOnly=n?"true":null};D(),e.role="textbox",e.style.whiteSpace="pre-wrap",t||(e.ariaMultiLine="true");let O=!1,y=!1,A=[[0,0],[0,0]],k=null,R=!1,x=!1,I=!1;const z=[],C=ke(e),F=(l=>{let f=0,L=0;const T=Date.now,b=[l],E=()=>b[f];return{get:E,set:V=>{b[f]=V},undo:()=>f>0?(f--,E()):void 0,redo:()=>f<b.length-1?(f++,E()):void 0,push:V=>{const M=T();L&&M-L<500&&f--,L=M,b[++f]=V,b.splice(f+1),f>500&&(f--,b.shift())}}})([r(ae(C,e)),A]),_=((l,f)=>{let L=!1;const T=[],b=M=>{L&&T.push(...M)},E=new MutationObserver(M=>{b(M),L||f()}),V=()=>{b(E.takeRecords())};return E.observe(l,{characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{t(M){!L&&M&&V(),L=M},o:()=>(V(),T.splice(0)),i(){T.splice(0),E.disconnect()}}})(e,()=>{x&&(he(C,e,A,t),k!=null&&(clearTimeout(k),k=null))}),$=new Set,Q=l=>{$.has(l)||($.add(l),Ze(()=>{$.delete(l),l()}))},j=()=>{const l=A;k=setTimeout(()=>{he(C,e,l,t)})},le=(l,f,L)=>{if(!n){t&&([l,f]=((b,[[E,V],[M,X]])=>{let Se=0,Oe=0;for(let re=0;re<b.length;re++)for(const We of b[re]){const De=Ee(We);re<E&&(Se+=De),re<M&&(Oe+=De)}return[[se(...b)],[[0,Se+V],[0,Oe+X]]]})(l,f));const T=r(l);F.set([F.get()[0],L]),F.push([T,f]),A=f,i(T)}j()},S=()=>{A=Re(C,e,t)},q=()=>{const l=_.o();if(_.t(!1),l.length){const f=Re(C,e,t),L=ae(C,e);let T;for(;T=l.pop();)if(T.type==="characterData")T.target.nodeValue=T.oldValue;else if(T.type==="childList"){const{target:b,removedNodes:E,addedNodes:V,nextSibling:M}=T;for(let X=E.length-1;X>=0;X--)b.insertBefore(E[X],M);for(let X=V.length-1;X>=0;X--)b.removeChild(V[X])}_.o(),y=he(C,e,A,t),le(L,f,A)}},oe=()=>{if(z.length){const l=[...A],f=ae(C,e);let L;for(;L=z.pop();)L[0](f,l,...L[1]);le(f,l,A)}},J=(l,...f)=>{z.unshift([l,f]),Q(oe)},de=l=>{if(!R&&(l.metaKey||l.ctrlKey)&&!l.altKey&&l.code==="KeyZ"&&(l.preventDefault(),!n)){const f=l.shiftKey?F.redo():F.undo();f&&(_.t(!1),A=f[1],i(f[0]),j())}},ee=()=>{R||I||Q(q)},o=l=>{switch(l.inputType){case"historyUndo":case"historyRedo":return void l.preventDefault();case"insertLineBreak":case"insertParagraph":if(t)return void l.preventDefault()}_.t(!0)},d=()=>{R=!0},g=()=>{R=!1,Q(q)},c=()=>{y?y=!1:!x||R||I||S()},p=l=>{const f=(b=>{const E=Ke(Le(b),b);if(E)return E.cloneContents()})(e);if(!f)return;const L=a(ae(C,f)),T=C.createElement("div");T.appendChild(f),l.setData("text/html",T.innerHTML),l.setData("text/plain",L)},K=l=>{l.preventDefault(),p(l.clipboardData)},P=l=>{l.preventDefault(),n||(p(l.clipboardData),J(Xe))},G=l=>{l.preventDefault();const f=l.clipboardData,L=f.getData("text/html");if(L){let T=new DOMParser().parseFromString(L,"text/html").body,b=!1;for(const E of[...T.childNodes])je(E)?E.data==="StartFragment"?(b=!0,T=new DocumentFragment):E.data==="EndFragment"&&(b=!1):b&&T.appendChild(E);try{return void J(ze,ae(C,T))}catch{}}J(et,f.getData("text/plain"))},Y=()=>{x=!0,S()},U=()=>{x=!1},Z=()=>{I=!0},H=()=>{I&&(I=!1,Q(q))};C.addEventListener("selectionchange",c),e.addEventListener("keydown",de),e.addEventListener("input",ee),e.addEventListener("beforeinput",o),e.addEventListener("compositionstart",d),e.addEventListener("compositionend",g),e.addEventListener("copy",K),e.addEventListener("cut",P),e.addEventListener("paste",G),e.addEventListener("focus",Y),e.addEventListener("blur",U),e.addEventListener("dragstart",Z),e.addEventListener("dragend",H);const te=()=>{O||(O=!0,e.contentEditable=s,e.role=u,e.ariaMultiLine=v,e.ariaReadOnly=h,e.style.whiteSpace=m,_.i(),C.removeEventListener("selectionchange",c),e.removeEventListener("keydown",de),e.removeEventListener("input",ee),e.removeEventListener("beforeinput",o),e.removeEventListener("compositionstart",d),e.removeEventListener("compositionend",g),e.removeEventListener("copy",K),e.removeEventListener("cut",P),e.removeEventListener("paste",G),e.removeEventListener("focus",Y),e.removeEventListener("blur",U),e.removeEventListener("dragstart",Z),e.removeEventListener("dragend",H))};return te.readonly=l=>{n=l,D()},te},Pe=e=>e.reduce((n,t,r)=>(r!==0&&(n+=`
`),n+t.reduce((a,i)=>a+(typeof i=="string"?i:""),"")),""),nt=({multiline:e}={})=>({single:!e,data:Pe,plain:Pe});var Ue=11;function rt(e,n){var t=n.attributes,r,a,i,s,u;if(!(n.nodeType===Ue||e.nodeType===Ue)){for(var v=t.length-1;v>=0;v--)r=t[v],a=r.name,i=r.namespaceURI,s=r.value,i?(a=r.localName||a,u=e.getAttributeNS(i,a),u!==s&&(r.prefix==="xmlns"&&(a=r.name),e.setAttributeNS(i,a,s))):(u=e.getAttribute(a),u!==s&&e.setAttribute(a,s));for(var h=e.attributes,m=h.length-1;m>=0;m--)r=h[m],a=r.name,i=r.namespaceURI,i?(a=r.localName||a,n.hasAttributeNS(i,a)||e.removeAttributeNS(i,a)):n.hasAttribute(a)||e.removeAttribute(a)}}var ce,at="http://www.w3.org/1999/xhtml",w=typeof document>"u"?void 0:document,it=!!w&&"content"in w.createElement("template"),st=!!w&&w.createRange&&"createContextualFragment"in w.createRange();function lt(e){var n=w.createElement("template");return n.innerHTML=e,n.content.childNodes[0]}function ot(e){ce||(ce=w.createRange(),ce.selectNode(w.body));var n=ce.createContextualFragment(e);return n.childNodes[0]}function dt(e){var n=w.createElement("body");return n.innerHTML=e,n.childNodes[0]}function ct(e){return e=e.trim(),it?lt(e):st?ot(e):dt(e)}function fe(e,n){var t=e.nodeName,r=n.nodeName,a,i;return t===r?!0:(a=t.charCodeAt(0),i=r.charCodeAt(0),a<=90&&i>=97?t===r.toUpperCase():i<=90&&a>=97?r===t.toUpperCase():!1)}function ft(e,n){return!n||n===at?w.createElement(e):w.createElementNS(n,e)}function ut(e,n){for(var t=e.firstChild;t;){var r=t.nextSibling;n.appendChild(t),t=r}return n}function me(e,n,t){e[t]!==n[t]&&(e[t]=n[t],e[t]?e.setAttribute(t,""):e.removeAttribute(t))}var He={OPTION:function(e,n){var t=e.parentNode;if(t){var r=t.nodeName.toUpperCase();r==="OPTGROUP"&&(t=t.parentNode,r=t&&t.nodeName.toUpperCase()),r==="SELECT"&&!t.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!n.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),t.selectedIndex=-1)}me(e,n,"selected")},INPUT:function(e,n){me(e,n,"checked"),me(e,n,"disabled"),e.value!==n.value&&(e.value=n.value),n.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,n){var t=n.value;e.value!==t&&(e.value=t);var r=e.firstChild;if(r){var a=r.nodeValue;if(a==t||!t&&a==e.placeholder)return;r.nodeValue=t}},SELECT:function(e,n){if(!n.hasAttribute("multiple")){for(var t=-1,r=0,a=e.firstChild,i,s;a;)if(s=a.nodeName&&a.nodeName.toUpperCase(),s==="OPTGROUP")i=a,a=i.firstChild;else{if(s==="OPTION"){if(a.hasAttribute("selected")){t=r;break}r++}a=a.nextSibling,!a&&i&&(a=i.nextSibling,i=null)}e.selectedIndex=t}}},ie=1,Ve=11,Be=3,Ie=8;function W(){}function vt(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function pt(e){return function(t,r,a){if(a||(a={}),typeof r=="string")if(t.nodeName==="#document"||t.nodeName==="HTML"||t.nodeName==="BODY"){var i=r;r=w.createElement("html"),r.innerHTML=i}else r=ct(r);else r.nodeType===Ve&&(r=r.firstElementChild);var s=a.getNodeKey||vt,u=a.onBeforeNodeAdded||W,v=a.onNodeAdded||W,h=a.onBeforeElUpdated||W,m=a.onElUpdated||W,D=a.onBeforeNodeDiscarded||W,O=a.onNodeDiscarded||W,y=a.onBeforeElChildrenUpdated||W,A=a.skipFromChildren||W,k=a.addChild||function(o,d){return o.appendChild(d)},R=a.childrenOnly===!0,x=Object.create(null),I=[];function z(o){I.push(o)}function C(o,d){if(o.nodeType===ie)for(var g=o.firstChild;g;){var c=void 0;d&&(c=s(g))?z(c):(O(g),g.firstChild&&C(g,d)),g=g.nextSibling}}function F(o,d,g){D(o)!==!1&&(d&&d.removeChild(o),O(o),C(o,g))}function _(o){if(o.nodeType===ie||o.nodeType===Ve)for(var d=o.firstChild;d;){var g=s(d);g&&(x[g]=d),_(d),d=d.nextSibling}}_(t);function $(o){v(o);for(var d=o.firstChild;d;){var g=d.nextSibling,c=s(d);if(c){var p=x[c];p&&fe(d,p)?(d.parentNode.replaceChild(p,d),j(p,d)):$(d)}else $(d);d=g}}function Q(o,d,g){for(;d;){var c=d.nextSibling;(g=s(d))?z(g):F(d,o,!0),d=c}}function j(o,d,g){var c=s(d);if(c&&delete x[c],!g){var p=h(o,d);if(p===!1||(p instanceof HTMLElement&&(o=p,_(o)),e(o,d),m(o),y(o,d)===!1))return}o.nodeName!=="TEXTAREA"?le(o,d):He.TEXTAREA(o,d)}function le(o,d){var g=A(o,d),c=d.firstChild,p=o.firstChild,K,P,G,Y,U;e:for(;c;){for(Y=c.nextSibling,K=s(c);!g&&p;){if(G=p.nextSibling,c.isSameNode&&c.isSameNode(p)){c=Y,p=G;continue e}P=s(p);var Z=p.nodeType,H=void 0;if(Z===c.nodeType&&(Z===ie?(K?K!==P&&((U=x[K])?G===U?H=!1:(o.insertBefore(U,p),P?z(P):F(p,o,!0),p=U,P=s(p)):H=!1):P&&(H=!1),H=H!==!1&&fe(p,c),H&&j(p,c)):(Z===Be||Z==Ie)&&(H=!0,p.nodeValue!==c.nodeValue&&(p.nodeValue=c.nodeValue))),H){c=Y,p=G;continue e}P?z(P):F(p,o,!0),p=G}if(K&&(U=x[K])&&fe(U,c))g||k(o,U),j(U,c);else{var te=u(c);te!==!1&&(te&&(c=te),c.actualize&&(c=c.actualize(o.ownerDocument||w)),k(o,c),$(c))}c=Y,p=G}Q(o,p,P);var l=He[o.nodeName];l&&l(o,d)}var S=t,q=S.nodeType,oe=r.nodeType;if(!R){if(q===ie)oe===ie?fe(t,r)||(O(t),S=ut(t,ft(r.nodeName,r.namespaceURI))):S=r;else if(q===Be||q===Ie){if(oe===q)return S.nodeValue!==r.nodeValue&&(S.nodeValue=r.nodeValue),S;S=r}}if(S===r)O(t);else{if(r.isSameNode&&r.isSameNode(S))return;if(j(S,r,R),I)for(var J=0,de=I.length;J<de;J++){var ee=x[I[J]];ee&&F(ee,ee.parentNode,!1)}}return!R&&S!==t&&t.parentNode&&(S.actualize&&(S=S.actualize(t.ownerDocument||w)),t.parentNode.replaceChild(S,t)),S}}var ht=pt(rt);const gt=document.getElementById("root"),ne=document.createElement("div");ne.style.backgroundColor="white";ne.style.border="solid 1px darkgray";ne.style.padding="8px";gt.appendChild(ne);const qe=e=>{let n="";for(const t of e.split(`
`))n+=`<div>${t||"<br />"}</div>`;ht(ne,`<div>${n}</div>`,{childrenOnly:!0})};qe(`Hello World.
こんにちは。
👍❤️🧑‍🧑‍🧒`);tt(ne,{schema:nt({multiline:!0}),onChange:e=>{qe(e)}});
