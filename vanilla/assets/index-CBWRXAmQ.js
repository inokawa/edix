(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const me=([e],[t])=>e===t?0:e<t?1:-1,ee=(e,t)=>{const n=me(e,t);return n===0?e[1]===t[1]?0:e[1]<t[1]?1:-1:n},ve=([e,t])=>ee(e,t)===-1?[t,e]:[e,t],Ne=(e,t)=>e.reduce((n,r,a)=>(a!==0&&(n+=`
`),n+r.reduce((i,d)=>i+(ce(d)?d.text:t?t(d):""),"")),""),Ee=e=>e.split(`
`).map(t=>t?[{text:t}]:[]),Ge=e=>e.t!==3;class ie extends Array{static from(t){return new ie(...t)}insert(t,n){return this.push({t:2,o:t,i:n}),this}delete(t,n){return this.push({t:1,l:t,u:n}),this}select(t,n){return this.push({t:3,p:t,h:n}),this}transform(t){return this.reduce((n,r)=>Ge(r)?Se(n,r):n,t)}}const ce=e=>"text"in e,Xe=e=>ce(e)?e.text.length:1,Qe=e=>e.reduce((t,n)=>t+Xe(n),0),ge=(e,t)=>{const n=[...e];if(n.length)for(const r of t){const a=n.length-1,i=n[a];ce(r)&&ce(i)?n[a]={text:i.text+r.text}:n.push(r)}else n.push(...t);return n},oe=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n],a=Xe(r);if(a>t){const i=e.slice(0,n),d=e.slice(n+1);if(ce(r)){const b=r.text.slice(0,t),m=r.text.slice(t);b&&i.push({text:b}),m&&d.unshift({text:m})}else d.unshift(r);return[i,d]}t-=a}return[e,[]]},Me=(e,t,n,r)=>{const[a]=n,[i]=r||n,d=oe(e[n[0]],n[1]),b=d[0],m=r?oe(e[r[0]],r[1])[1]:d[1],u=[...t];u.length?(u[0]=ge(b,u[0]),u[u.length-1]=ge(u[u.length-1],m)):u.push(ge(b,m)),e.splice(a,i-a+1,...u)},et=e=>{switch(e.t){case 1:return ee(e.l,e.u)===1;case 2:return!!Ne(e.i)}return!0},tt=(e,t)=>{switch(t.t){case 1:Me(e,[],t.l,t.u);break;case 2:Me(e,t.i,t.o)}},Se=(e,t)=>{switch(t.t){case 1:{const{l:n,u:r}=t;if(ee(e,n)!==1)return ee(r,e)===1?[e[0]+n[0]-r[0],e[1]+(me(r,e)===0?n[1]-r[1]:0)]:n;break}case 2:{const{o:n,i:r}=t,a=r.length,i=a-1;if(ee(e,n)!==1)return[e[0]+i,e[1]+(me(e,n)===0?Qe(r[a-1])-(i===0?0:n[1]):0)];break}}return e},nt=(e,t,n)=>{const r=[...e],a=[...t];try{for(const i of n)et(i)&&(Ge(i)?(tt(e,i),t[0]=Se(t[0],i),t[1]=Se(t[1],i)):(i.p&&(t[0]=i.p),i.h&&(t[1]=i.h)))}catch(i){console.error("rollback transaction:",i),e.length=0,e.push(...r),t[0]=a[0],t[1]=a[1]}};let Q,O,q,ye,je,Oe=!1,De=!1;const rt=e=>e.nodeType===3,be=e=>e.nodeType===1,at=e=>e.nodeType===8,it=new Set(["EMBED","IMG","PICTURE","AUDIO","VIDEO","SVG","CANVAS","MATH","IFRAME","OBJECT"]),ze=e=>e.contentEditable==="false"||it.has(e.tagName),st=()=>O,$e=()=>q===1?O.data.length:q===2?1:0,lt=e=>{Q.currentNode=Q.currentNode.parentNode.children[e]},Pe=e=>{const t=e.nextSibling;return!!t&&!at(t)},ot=()=>{for(;;){if(q===2){const e=O;for(;(O=Q.nextNode())&&e.contains(O););}else O=Q.nextNode();if(q=null,!O)break;if(ye){if(ye.contains(O)){if(Oe=!0,De)break}else if(Oe)break}if(rt(O)){const e=O.data;if(e)return q=e===`
`?Pe(O)?3:6:1}else if(be(O)){if(O.tagName==="BR")return q=Pe(O)?3:5;if(ze(O))return q=2;if(je(O))return q=4}}},qe=(e,t,{m:n,_:r},a)=>{try{return je=r,Q=n.createTreeWalker(t,5),a&&(a.k&&(Q.currentNode=a.k,Q.previousNode()),a.D&&(ye=a.D),De=a.v||!1),e(ot)}finally{Q=O=q=ye=null,Oe=De=!1}},dt=Math.min,ut=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},ft=new Set(["DIV","H1","H2","H3","H4","H5","H6","P","PRE","LI","DT","DD","TR"]),ct=e=>ft.has(e.tagName),We=e=>e.ownerDocument,Je=e=>We(e).getSelection(),vt=(e,t)=>{if(e.rangeCount){const n=e.getRangeAt(0);if(t.contains(n.commonAncestorContainer))return n}},Ue=(e,t,n)=>{const r=Je(e);r.removeAllRanges(),r.addRange(t),n&&(r.collapseToEnd(),r.extend(t.startContainer,t.startOffset))},ke=(e,t,[n,r],a)=>{const i=ee(n,r),d=i===0,b=i===-1,m=b?r:n,u=b?n:r;if(m[0]===0&&m[1]===0&&d&&!t.hasChildNodes()){const I=e.createRange();return I.setStart(t,0),I.setEnd(t,0),Ue(t,I),!0}const T=Ie(t,m,a);if(!T)return!1;const U=d?T:Ie(t,u,a);if(!U)return!1;const E=e.createRange(),[k,W]=T,[R,K]=U;return be(k)?W<1?E.setStartBefore(k):E.setStartAfter(k):E.setStart(k,W),be(R)?K<1?E.setEndBefore(R):E.setEndAfter(R):E.setEnd(R,K),Ue(t,E,b),!0},Ie=(e,[t,n],r)=>qe(a=>{let i,d=!1;for(;i=a();)if(i===4)d||(d=!0,t!==0&&lt(t));else{const b=$e();if(n<=b)return[st(),n];n-=b}},e,r),Te=(e,t,n,r)=>{let a,i,d=!0;if(e===t&&!t.hasChildNodes())return[0,0];if(be(t)&&!ze(t)&&t.hasChildNodes()){const m=dt(n,t.childNodes.length-1);t=t.childNodes[m],d=m===n,n=0}const b=((m,u)=>{let T=u;for(;;){const U=T.parentElement;if(U===m)break;T=U}return T})(e,t);return r._(b)?(a=b,i=(m=>{let u=0;for(;m=m.previousElementSibling;)u++;return u})(a)):(a=e,i=0),qe(m=>{let u,T=0;for(;u=m();)u===3?(i++,T=0):T+=$e();return[i,T+n]},a,r,{D:t,v:d})},Ve=(e,t,{startOffset:n,startContainer:r,endOffset:a,endContainer:i})=>{const d=Te(e,r,n,t);return[d,r===i&&n===a?d:Te(e,i,a,t)]},pt=e=>ie.from(e.map(t=>t.t===2?{...t,i:[t.i.reduce((n,r)=>ge(n,r),[])]}:t)),Ae=()=>{},ht=({schema:{single:e,js:t,doc:n,copy:r,paste:a},doc:i,isBlock:d=ct,onChange:b,onKeyDown:m})=>{let u=[[0,0],[0,0]],T=!1,U=Ae;const E=()=>k.get()[0],k=(s=>{let A=0,S=0;const V=Date.now,D=[s],G=()=>D[A];return{get:G,set:M=>{D[A]=M},undo:()=>A>0?(A--,G()):void 0,redo:()=>A<D.length-1?(A++,G()):void 0,push:M=>{const X=V();A!==0&&X-S<500&&A--,S=X,D[++A]=M,D.splice(A+1),A>500&&(A--,D.shift())}}})([n(i),u]),W=[],R=s=>{T||(W.unshift(s),I(se))},K=new Set,I=s=>{K.has(s)||(K.add(s),ut(()=>{K.delete(s),s()}))},se=()=>{if(W.length){let S,V=[...E()],D=[...u];for(;S=W.pop();)e&&(S=pt(S)),nt(V,D,S);const G=E();A=G,(s=V).length===A.length&&s.every((M,X)=>M===A[X])||(k.set([G,u]),k.push([V,D]),b(t(V))),u=D}var s,A};return{input:s=>{if(!window.InputEvent||typeof InputEvent.prototype.getTargetRanges!="function")return console.error("beforeinput event is not supported."),Ae;const{contentEditable:A,role:S,ariaMultiLine:V,ariaReadOnly:D}=s,G=s.style.whiteSpace;s.role="textbox",s.style.whiteSpace="pre-wrap",e||(s.ariaMultiLine="true");let M=!1,X=!1,L=null,P=!1,te=!1,J=!1;const Y=We(s),F={m:Y,_:d};U=()=>{s.contentEditable=T?"false":"true",s.ariaReadOnly=T?"true":null},U();const l=((f,p)=>{let h=!1;const g=[],N=$=>{h&&g.push(...$)},x=new MutationObserver($=>{N($),h||p()}),w=()=>{N(x.takeRecords())};return x.observe(f,{characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{M($){!h&&$&&w(),h=$},O:()=>(w(),g.splice(0)),I(){g.splice(0),x.disconnect()}}})(s,()=>{te&&ke(Y,s,u,F)}),o=()=>{u=((f,p)=>{const h=Je(f),g=vt(h,f);if(!g)return[[0,0],[0,0]];const N=Ve(f,p,g);return(h.anchorNode===h.focusNode?h.anchorOffset>h.focusOffset:2&(x=h.anchorNode,w=h.focusNode,x.compareDocumentPosition(w)))?[N[1],N[0]]:N;var x,w})(s,F)},y=()=>{const f=l.O();if(l.M(!1),f.length){let p;for(;p=f.pop();)if(p.type==="childList"){const{target:h,removedNodes:g,addedNodes:N,nextSibling:x}=p;for(let w=g.length-1;w>=0;w--)h.insertBefore(g[w],x);for(let w=N.length-1;w>=0;w--)h.removeChild(N[w])}else p.target.nodeValue=p.oldValue;l.O(),X=ke(Y,s,u,F)}R(L),P=!1,L=null},c=f=>{if(!P){if(m&&m(f))f.preventDefault();else if((f.metaKey||f.ctrlKey)&&!f.altKey&&f.code==="KeyZ"&&(f.preventDefault(),l.M(!1),!T)){const p=f.shiftKey?k.redo():k.undo();p&&(b(t(p[0])),u=p[1])}}},v=()=>{P||y()},j=f=>{f.preventDefault();const p=f.inputType;if(p.startsWith("format")||p==="historyUndo"||p==="historyRedo")return;P?l.M(!0):o();const h=f.getTargetRanges()[0];if(h){const g=Ve(s,F,h);let N=p==="insertParagraph"||p==="insertLineBreak"?`
`:f.data;if(N==null){const x=f.dataTransfer;x&&(N=x.getData("text/plain"))}L||(L=new ie().select(...u)),ee(...g)!==0&&L.delete(...g),N&&L.insert(g[0],Ee(N))}P||y()},B=()=>{P||o(),P=!0},z=()=>{y()},ne=()=>{te=!0,o()},_=()=>{te=!1},re=()=>{X?X=!1:!te||P||J||o()},H=f=>{o(),ee(...u)!==0&&r(f,((p,h,g)=>me(h,g)===0?[oe(oe(p[h[0]],g[1])[0],h[1])[1]]:[oe(p[h[0]],h[1])[1],...p.slice(h[0]+1,g[0]),oe(p[g[0]],g[1])[0]])(E(),...ve(u)),s)},le=f=>{f.preventDefault(),H(f.clipboardData)},ue=f=>{f.preventDefault(),T||(H(f.clipboardData),R(new ie().delete(...ve(u))))},we=f=>{f.preventDefault();const[p,h]=ve(u);R(new ie().delete(p,h).insert(p,a(f.clipboardData,F)))},xe=f=>{f.preventDefault();const p=f.dataTransfer,h=((g,N,{clientX:x,clientY:w},$)=>{if(g.caretPositionFromPoint){const ae=g.caretPositionFromPoint(x,w);if(ae)return Te(N,ae.offsetNode,ae.offset,$)}else if(g.caretRangeFromPoint){const ae=g.caretRangeFromPoint(x,w);if(ae)return Te(N,ae.startContainer,ae.startOffset,$)}})(Y,s,f,F);if(p&&h){const g=new ie;J&&g.delete(...ve(u));const N=g.transform(h);g.select(N,N).insert(N,a(p,F)).select(N),R(g),s.focus({preventScroll:!0})}},Ce=f=>{J=!0,H(f.dataTransfer)},Re=()=>{J=!1};return Y.addEventListener("selectionchange",re),s.addEventListener("keydown",c),s.addEventListener("input",v),s.addEventListener("beforeinput",j),s.addEventListener("compositionstart",B),s.addEventListener("compositionend",z),s.addEventListener("focus",ne),s.addEventListener("blur",_),s.addEventListener("copy",le),s.addEventListener("cut",ue),s.addEventListener("paste",we),s.addEventListener("drop",xe),s.addEventListener("dragstart",Ce),s.addEventListener("dragend",Re),()=>{M||(M=!0,U=Ae,s.contentEditable=A,s.role=S,s.ariaMultiLine=V,s.ariaReadOnly=D,s.style.whiteSpace=G,l.I(),Y.removeEventListener("selectionchange",re),s.removeEventListener("keydown",c),s.removeEventListener("input",v),s.removeEventListener("beforeinput",j),s.removeEventListener("compositionstart",B),s.removeEventListener("compositionend",z),s.removeEventListener("focus",ne),s.removeEventListener("blur",_),s.removeEventListener("copy",le),s.removeEventListener("cut",ue),s.removeEventListener("paste",we),s.removeEventListener("drop",xe),s.removeEventListener("dragstart",Ce),s.removeEventListener("dragend",Re))}},command:(s,...A)=>{const S=s(E(),u,...A);S&&R(S)},readonly:s=>{T=s,U()}}},gt=({multiline:e}={})=>({single:!e,js:Ne,doc:Ee,copy:(t,n)=>{t.setData("text/plain",Ne(n))},paste:t=>Ee(t.getData("text/plain"))});var Be=11;function mt(e,t){var n=t.attributes,r,a,i,d,b;if(!(t.nodeType===Be||e.nodeType===Be)){for(var m=n.length-1;m>=0;m--)r=n[m],a=r.name,i=r.namespaceURI,d=r.value,i?(a=r.localName||a,b=e.getAttributeNS(i,a),b!==d&&(r.prefix==="xmlns"&&(a=r.name),e.setAttributeNS(i,a,d))):(b=e.getAttribute(a),b!==d&&e.setAttribute(a,d));for(var u=e.attributes,T=u.length-1;T>=0;T--)r=u[T],a=r.name,i=r.namespaceURI,i?(a=r.localName||a,t.hasAttributeNS(i,a)||e.removeAttributeNS(i,a)):t.hasAttribute(a)||e.removeAttribute(a)}}var pe,yt="http://www.w3.org/1999/xhtml",C=typeof document>"u"?void 0:document,bt=!!C&&"content"in C.createElement("template"),Tt=!!C&&C.createRange&&"createContextualFragment"in C.createRange();function At(e){var t=C.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function Lt(e){pe||(pe=C.createRange(),pe.selectNode(C.body));var t=pe.createContextualFragment(e);return t.childNodes[0]}function Nt(e){var t=C.createElement("body");return t.innerHTML=e,t.childNodes[0]}function Et(e){return e=e.trim(),bt?At(e):Tt?Lt(e):Nt(e)}function he(e,t){var n=e.nodeName,r=t.nodeName,a,i;return n===r?!0:(a=n.charCodeAt(0),i=r.charCodeAt(0),a<=90&&i>=97?n===r.toUpperCase():i<=90&&a>=97?r===n.toUpperCase():!1)}function St(e,t){return!t||t===yt?C.createElement(e):C.createElementNS(t,e)}function Ot(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}function Le(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var He={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();r==="OPTGROUP"&&(n=n.parentNode,r=n&&n.nodeName.toUpperCase()),r==="SELECT"&&!n.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}Le(e,t,"selected")},INPUT:function(e,t){Le(e,t,"checked"),Le(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var a=r.nodeValue;if(a==n||!n&&a==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n=-1,r=0,a=e.firstChild,i,d;a;)if(d=a.nodeName&&a.nodeName.toUpperCase(),d==="OPTGROUP")i=a,a=i.firstChild;else{if(d==="OPTION"){if(a.hasAttribute("selected")){n=r;break}r++}a=a.nextSibling,!a&&i&&(a=i.nextSibling,i=null)}e.selectedIndex=n}}},fe=1,Fe=11,_e=3,Ke=8;function Z(){}function Dt(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function wt(e){return function(n,r,a){if(a||(a={}),typeof r=="string")if(n.nodeName==="#document"||n.nodeName==="HTML"||n.nodeName==="BODY"){var i=r;r=C.createElement("html"),r.innerHTML=i}else r=Et(r);else r.nodeType===Fe&&(r=r.firstElementChild);var d=a.getNodeKey||Dt,b=a.onBeforeNodeAdded||Z,m=a.onNodeAdded||Z,u=a.onBeforeElUpdated||Z,T=a.onElUpdated||Z,U=a.onBeforeNodeDiscarded||Z,E=a.onNodeDiscarded||Z,k=a.onBeforeElChildrenUpdated||Z,W=a.skipFromChildren||Z,R=a.addChild||function(l,o){return l.appendChild(o)},K=a.childrenOnly===!0,I=Object.create(null),se=[];function s(l){se.push(l)}function A(l,o){if(l.nodeType===fe)for(var y=l.firstChild;y;){var c=void 0;o&&(c=d(y))?s(c):(E(y),y.firstChild&&A(y,o)),y=y.nextSibling}}function S(l,o,y){U(l)!==!1&&(o&&o.removeChild(l),E(l),A(l,y))}function V(l){if(l.nodeType===fe||l.nodeType===Fe)for(var o=l.firstChild;o;){var y=d(o);y&&(I[y]=o),V(o),o=o.nextSibling}}V(n);function D(l){m(l);for(var o=l.firstChild;o;){var y=o.nextSibling,c=d(o);if(c){var v=I[c];v&&he(o,v)?(o.parentNode.replaceChild(v,o),M(v,o)):D(o)}else D(o);o=y}}function G(l,o,y){for(;o;){var c=o.nextSibling;(y=d(o))?s(y):S(o,l,!0),o=c}}function M(l,o,y){var c=d(o);if(c&&delete I[c],!y){var v=u(l,o);if(v===!1||(v instanceof HTMLElement&&(l=v,V(l)),e(l,o),T(l),k(l,o)===!1))return}l.nodeName!=="TEXTAREA"?X(l,o):He.TEXTAREA(l,o)}function X(l,o){var y=W(l,o),c=o.firstChild,v=l.firstChild,j,B,z,ne,_;e:for(;c;){for(ne=c.nextSibling,j=d(c);!y&&v;){if(z=v.nextSibling,c.isSameNode&&c.isSameNode(v)){c=ne,v=z;continue e}B=d(v);var re=v.nodeType,H=void 0;if(re===c.nodeType&&(re===fe?(j?j!==B&&((_=I[j])?z===_?H=!1:(l.insertBefore(_,v),B?s(B):S(v,l,!0),v=_,B=d(v)):H=!1):B&&(H=!1),H=H!==!1&&he(v,c),H&&M(v,c)):(re===_e||re==Ke)&&(H=!0,v.nodeValue!==c.nodeValue&&(v.nodeValue=c.nodeValue))),H){c=ne,v=z;continue e}B?s(B):S(v,l,!0),v=z}if(j&&(_=I[j])&&he(_,c))y||R(l,_),M(_,c);else{var le=b(c);le!==!1&&(le&&(c=le),c.actualize&&(c=c.actualize(l.ownerDocument||C)),R(l,c),D(c))}c=ne,v=z}G(l,v,B);var ue=He[l.nodeName];ue&&ue(l,o)}var L=n,P=L.nodeType,te=r.nodeType;if(!K){if(P===fe)te===fe?he(n,r)||(E(n),L=Ot(n,St(r.nodeName,r.namespaceURI))):L=r;else if(P===_e||P===Ke){if(te===P)return L.nodeValue!==r.nodeValue&&(L.nodeValue=r.nodeValue),L;L=r}}if(L===r)E(n);else{if(r.isSameNode&&r.isSameNode(L))return;if(M(L,r,K),se)for(var J=0,Y=se.length;J<Y;J++){var F=I[se[J]];F&&S(F,F.parentNode,!1)}}return!K&&L!==n&&n.parentNode&&(L.actualize&&(L=L.actualize(n.ownerDocument||C)),n.parentNode.replaceChild(L,n)),L}}var xt=wt(mt);const Ct=document.getElementById("root"),de=document.createElement("div");de.style.backgroundColor="white";de.style.border="solid 1px darkgray";de.style.padding="8px";Ct.appendChild(de);const Ye=e=>{let t="";for(const n of e.split(`
`))t+=`<div>${n||"<br />"}</div>`;xt(de,`<div>${t}</div>`,{childrenOnly:!0})},Ze=`Hello world.
ã“ã‚“ã«ã¡ã¯ã€‚
ðŸ‘â¤ï¸ðŸ§‘â€ðŸ§‘â€ðŸ§’`;Ye(Ze);ht({doc:Ze,schema:gt({multiline:!0}),onChange:e=>{Ye(e)}}).input(de);
