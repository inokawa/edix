(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const ye=([e],[t])=>e===t?0:e<t?1:-1,ee=(e,t)=>{const n=ye(e,t);return n===0?e[1]===t[1]?0:e[1]<t[1]?1:-1:n},pe=([e,t])=>ee(e,t)===-1?[t,e]:[e,t],we=(e,t)=>e.reduce((n,r,i)=>(i!==0&&(n+=`
`),n+r.reduce((a,l)=>a+(ue(l)?l.text:t?t(l):""),"")),""),et=e=>e.split(`
`).map(t=>t?[{text:t}]:[]),tt=e=>e.t!==3;class ae extends Array{static from(t){return new ae(...t)}insert(t,n){return this.push({t:2,o:t,i:n}),this}delete(t,n){return this.push({t:1,l:t,u:n}),this}select(t,n){return this.push({t:3,p:t,m:n}),this}rebasePos(t){return this.reduce((n,r)=>tt(r)?xe(n,r):n,t)}}const ue=e=>"text"in e,nt=e=>ue(e)?e.text.length:1,lt=e=>e.reduce((t,n)=>t+nt(n),0),me=(e,t)=>{const n=[...e];if(n.length)for(const r of t){const i=n.length-1,a=n[i];ue(r)&&ue(a)?n[i]={text:a.text+r.text}:n.push(r)}else n.push(...t);return n},le=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n],i=nt(r);if(i>t){const a=e.slice(0,n),l=e.slice(n+1);if(ue(r)){const b=r.text.slice(0,t),g=r.text.slice(t);b&&a.push({text:b}),g&&l.unshift({text:g})}else l.unshift(r);return[a,l]}t-=i}return[e,[]]},Ge=(e,t,n,r)=>{const[i]=n,[a]=r||n,l=le(e[n[0]],n[1]),b=l[0],g=r?le(e[r[0]],r[1])[1]:l[1],L=[...t];L.length?(L[0]=me(b,L[0]),L[L.length-1]=me(L[L.length-1],g)):L.push(me(b,g)),e.splice(i,a-i+1,...L)},ct=e=>{switch(e.t){case 1:return ee(e.l,e.u)===1;case 2:return!!we(e.i)}return!0},dt=(e,t)=>{switch(t.t){case 1:Ge(e,[],t.l,t.u);break;case 2:Ge(e,t.i,t.o)}},xe=(e,t)=>{switch(t.t){case 1:{const{l:n,u:r}=t;if(ee(e,n)!==1)return ee(r,e)===1?[e[0]+n[0]-r[0],e[1]+(ye(r,e)===0?n[1]-r[1]:0)]:n;break}case 2:{const{o:n,i:r}=t,i=r.length,a=i-1;if(ee(e,n)!==1)return[e[0]+a,e[1]+(ye(e,n)===0?lt(r[i-1])-(a===0?0:n[1]):0)];break}}return e},ut=(e,t,n)=>{const r=[...e],i=[...t];try{for(const a of n)ct(a)&&(tt(a)?(dt(e,a),t[0]=xe(t[0],a),t[1]=xe(t[1],a)):(a.p&&(t[0]=a.p),a.m&&(t[1]=a.m)))}catch(a){console.error("rollback transaction:",a),e.length=0,e.push(...r),t[0]=i[0],t[1]=i[1]}};let Q,S,j,be,rt,De=!1,Ce=!1;const ft=e=>e.nodeType===3,Te=e=>e.nodeType===1,vt=e=>e.nodeType===8,pt=new Set(["EMBED","IMG","PICTURE","AUDIO","VIDEO","SVG","CANVAS","MATH","IFRAME","OBJECT"]),it=e=>e.contentEditable==="false"||pt.has(e.tagName),Re=()=>S,at=()=>j===1?S.data.length:j===2?1:0,Xe=e=>{const t=e.nextSibling;return!!t&&!vt(t)},ht=()=>{for(;;){if(j===2){const e=S;for(;(S=Q.nextNode())&&e.contains(S););}else S=Q.nextNode();if(j=null,!S)break;if(be){if(be.contains(S)){if(De=!0,Ce)break}else if(De)break}if(ft(S)){const e=S.data;if(e)return j=e===`
`?Xe(S)?3:6:1}else if(Te(S)){if(S.tagName==="BR")return j=Xe(S)?3:5;if(it(S))return j=2;if(rt(S))return j=4}}},Me=(e,t,{h:n,_:r},i)=>{try{return rt=r,Q=n.createTreeWalker(t,5),i&&(i.k&&(Q.currentNode=i.k,Q.previousNode()),i.v&&(be=i.v),Ce=i.D||!1),e(ht)}finally{Q=S=j=be=null,De=Ce=!1}},gt=Math.min,mt=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},yt=new Set(["DIV","H1","H2","H3","H4","H5","H6","P","PRE","LI","DT","DD","TR"]),bt=e=>yt.has(e.tagName),st=e=>e.ownerDocument,Pe=e=>st(e).getSelection(),ze=(e,t)=>{if(e.rangeCount){const n=e.getRangeAt(0);if(t.contains(n.commonAncestorContainer))return n}},je=(e,t,n)=>{const r=Pe(e);r.removeAllRanges(),r.addRange(t),n&&(r.collapseToEnd(),r.extend(t.startContainer,t.startOffset))},Oe=(e,t,[n,r],i)=>{const a=ee(n,r),l=a===0,b=a===-1,g=b?r:n,L=b?n:r;if(g[0]===0&&g[1]===0&&l&&!t.hasChildNodes()){const T=e.createRange();return T.setStart(t,0),T.setEnd(t,0),je(t,T),!0}const O=We(t,g,i);if(!O)return!1;const _=l?O:We(t,L,i);if(!_)return!1;const w=e.createRange(),[W,R]=O,[B,V]=_;return Te(W)?R<1?w.setStartBefore(W):w.setStartAfter(W):w.setStart(W,R),Te(B)?V<1?w.setEndBefore(B):w.setEndAfter(B):w.setEnd(B,V),je(t,w,b),!0},We=(e,[t,n],r)=>Me(i=>{let a,l=!1;for(;a=i();)if(a===4)l||(l=!0,t!==0&&(b=t,Q.currentNode=Q.currentNode.parentNode.children[b]));else{const g=at();if(n<=g)return[Re(),n];n-=g}var b},e,r),Ae=(e,t,n,r)=>{let i,a,l=!0;if(e===t&&!t.hasChildNodes())return[0,0];if(Te(t)&&!it(t)&&t.hasChildNodes()){const g=gt(n,t.childNodes.length-1);t=t.childNodes[g],l=g===n,n=0}const b=((g,L)=>{let O=L;for(;;){const _=O.parentElement;if(_===g)break;O=_}return O})(e,t);return r._(b)?(i=b,a=Array.prototype.indexOf.call(e.children,i)):(i=e,a=0),Me(g=>{let L,O=0;for(;L=g();)L===3?(a++,O=0):O+=at();return[a,O+n]},i,r,{v:t,D:l})},qe=(e,t,{startOffset:n,startContainer:r,endOffset:i,endContainer:a})=>{const l=Ae(e,r,n,t);return[l,r===a&&n===i?l:Ae(e,a,i,t)]},Tt=e=>ae.from(e.map(t=>t.t===2?{...t,i:[t.i.reduce((n,r)=>me(n,r),[])]}:t)),At=(e,{schema:{single:t,js:n,void:r,copy:i,paste:a},isBlock:l=bt,onChange:b,onKeyDown:g})=>{if(!window.InputEvent||typeof InputEvent.prototype.getTargetRanges!="function"){console.error("beforeinput event is not supported.");const s=()=>{};return{dispose:s,command:s,readonly:s}}const{contentEditable:L,role:O,ariaMultiLine:_,ariaReadOnly:w}=e,W=e.style.whiteSpace;e.role="textbox",e.style.whiteSpace="pre-wrap",t||(e.ariaMultiLine="true");let R=!1,B=!1,V=!1,T=[[0,0],[0,0]],P=null,F=null,M=!1,K=!1,q=!1;const U=st(e),H={h:U,_:l},te=()=>{e.contentEditable=R?"false":"true",e.ariaReadOnly=R?"true":null};te();const fe=(s,o)=>((u,f,p)=>Me(N=>{let y,A=null,x="",Le=!1;const ve=[],Fe=()=>{x&&(A||(A=[]),A.push({text:x}),x="")},Ne=()=>{Fe(),!A&&Le&&(A=[]),A&&ve.push(A),A=null,Le=!1};for(;y=N();)if(y===4)Ne();else if(Le=!0,y===1){let Ee=Re().data;x+=Ee}else if(y===2){Fe();const Ee=Re(),Ke=p(Ee);Ke&&A.push({data:Ke})}else y===3&&Ne();return Ne(),ve.length||ve.push([]),ve},u,f,void 0))(s,o,r),E=()=>G.get()[0],$=[],Y=s=>{R||($.unshift(s),d(h))},G=(s=>{let o=0,u=0;const f=Date.now,p=[s],N=()=>p[o];return{get:N,set:y=>{p[o]=y},undo:()=>o>0?(o--,N()):void 0,redo:()=>o<p.length-1?(o++,N()):void 0,push:y=>{const A=f();o!==0&&A-u<500&&o--,u=A,p[++o]=y,p.splice(o+1),o>500&&(o--,p.shift())}}})([fe(e,H),T]),Z=((s,o)=>{let u=!1;const f=[],p=A=>{u&&f.push(...A)},N=new MutationObserver(A=>{p(A),u||o()}),y=()=>{p(N.takeRecords())};return N.observe(s,{characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{M(A){!u&&A&&y(),u=A},O:()=>(y(),f.splice(0)),I(){f.splice(0),N.disconnect()}}})(e,()=>{K&&(Oe(U,e,T,H),F!=null&&(clearTimeout(F),F=null))}),ne=new Set,d=s=>{ne.has(s)||(ne.add(s),mt(()=>{ne.delete(s),s()}))},c=s=>{T=s,F=setTimeout(()=>{Oe(U,e,s,H)})},m=()=>{T=((s,o)=>{const u=Pe(s),f=ze(u,s);if(!f)return[[0,0],[0,0]];const p=qe(s,o,f);return(u.anchorNode===u.focusNode?u.anchorOffset>u.focusOffset:2&(N=u.anchorNode,y=u.focusNode,N.compareDocumentPosition(y)))?[p[1],p[0]]:p;var N,y})(e,H)},v=()=>{const s=Z.O();if(Z.M(!1),s.length){let o;for(;o=s.pop();)if(o.type==="childList"){const{target:u,removedNodes:f,addedNodes:p,nextSibling:N}=o;for(let y=f.length-1;y>=0;y--)u.insertBefore(f[y],N);for(let y=p.length-1;y>=0;y--)u.removeChild(p[y])}else o.target.nodeValue=o.oldValue;Z.O()}Y(P),M=!1,P=null,V=Oe(U,e,T,H)},h=()=>{if($.length){let u,f=[...E()],p=[...T];for(;u=$.pop();)t&&(u=Tt(u)),ut(f,p,u);const N=E(),y=T;o=N,(s=f).length===o.length&&s.every((A,x)=>A===o[x])||(G.set([N,y]),G.push([f,p]),b(n(f))),c(p)}var s,o},X=s=>{if(!M){if(g&&g(s))s.preventDefault();else if((s.metaKey||s.ctrlKey)&&!s.altKey&&s.code==="KeyZ"&&(s.preventDefault(),Z.M(!1),!R)){const o=s.shiftKey?G.redo():G.undo();o&&(b(n(o[0])),c(o[1]))}}},C=()=>{M||v()},z=s=>{s.preventDefault();const o=s.inputType;if(o.startsWith("format")||o==="historyUndo"||o==="historyRedo")return;M?Z.M(!0):m();const u=s.getTargetRanges()[0];if(u){const f=qe(e,H,u);let p=o==="insertParagraph"||o==="insertLineBreak"?`
`:s.data;if(p==null){const N=s.dataTransfer;N&&(p=N.getData("text/plain"))}P||(P=new ae().select(...T)),ee(...f)!==0&&P.delete(...f),p&&P.insert(f[0],et(p))}M||v()},re=()=>{M||m(),M=!0},k=()=>{v()},ie=()=>{K=!0,m()},I=()=>{K=!1},se=()=>{V?V=!1:!K||M||q||m()},oe=s=>{m(),ee(...T)!==0&&i(s,((o,u,f)=>ye(u,f)===0?[le(le(o[u[0]],f[1])[0],u[1])[1]]:[le(o[u[0]],u[1])[1],...o.slice(u[0]+1,f[0]),le(o[f[0]],f[1])[0]])(E(),...pe(T)),()=>ze(Pe(e),e).cloneContents())},Ue=s=>a(s,o=>fe(o,H)),ke=s=>{s.preventDefault(),oe(s.clipboardData)},Ie=s=>{s.preventDefault(),R||(oe(s.clipboardData),Y(new ae().delete(...pe(T))))},Be=s=>{s.preventDefault();const[o,u]=pe(T);Y(new ae().delete(o,u).insert(o,Ue(s.clipboardData)))},Ve=s=>{s.preventDefault();const o=s.dataTransfer,u=((f,p,{clientX:N,clientY:y},A)=>{if(f.caretPositionFromPoint){const x=f.caretPositionFromPoint(N,y);if(x)return Ae(p,x.offsetNode,x.offset,A)}else if(f.caretRangeFromPoint){const x=f.caretRangeFromPoint(N,y);if(x)return Ae(p,x.startContainer,x.startOffset,A)}})(U,e,s,H);if(o&&u){const f=new ae;q&&f.delete(...pe(T));const p=f.rebasePos(u);f.select(p,p).insert(p,Ue(o)).select(p),Y(f),e.focus({preventScroll:!0})}},He=s=>{q=!0,oe(s.dataTransfer)},_e=()=>{q=!1};return U.addEventListener("selectionchange",se),e.addEventListener("keydown",X),e.addEventListener("input",C),e.addEventListener("beforeinput",z),e.addEventListener("compositionstart",re),e.addEventListener("compositionend",k),e.addEventListener("focus",ie),e.addEventListener("blur",I),e.addEventListener("copy",ke),e.addEventListener("cut",Ie),e.addEventListener("paste",Be),e.addEventListener("drop",Ve),e.addEventListener("dragstart",He),e.addEventListener("dragend",_e),{dispose:()=>{B||(B=!0,e.contentEditable=L,e.role=O,e.ariaMultiLine=_,e.ariaReadOnly=w,e.style.whiteSpace=W,Z.I(),U.removeEventListener("selectionchange",se),e.removeEventListener("keydown",X),e.removeEventListener("input",C),e.removeEventListener("beforeinput",z),e.removeEventListener("compositionstart",re),e.removeEventListener("compositionend",k),e.removeEventListener("focus",ie),e.removeEventListener("blur",I),e.removeEventListener("copy",ke),e.removeEventListener("cut",Ie),e.removeEventListener("paste",Be),e.removeEventListener("drop",Ve),e.removeEventListener("dragstart",He),e.removeEventListener("dragend",_e))},command:(s,...o)=>{const u=s(E(),T,...o);u&&Y(u)},readonly:s=>{R=s,te()}}},Lt=({multiline:e}={})=>({single:!e,js:we,void:()=>{},copy:(t,n)=>{t.setData("text/plain",we(n))},paste:t=>et(t.getData("text/plain"))});var $e=11;function Nt(e,t){var n=t.attributes,r,i,a,l,b;if(!(t.nodeType===$e||e.nodeType===$e)){for(var g=n.length-1;g>=0;g--)r=n[g],i=r.name,a=r.namespaceURI,l=r.value,a?(i=r.localName||i,b=e.getAttributeNS(a,i),b!==l&&(r.prefix==="xmlns"&&(i=r.name),e.setAttributeNS(a,i,l))):(b=e.getAttribute(i),b!==l&&e.setAttribute(i,l));for(var L=e.attributes,O=L.length-1;O>=0;O--)r=L[O],i=r.name,a=r.namespaceURI,a?(i=r.localName||i,t.hasAttributeNS(a,i)||e.removeAttributeNS(a,i)):t.hasAttribute(i)||e.removeAttribute(i)}}var he,Et="http://www.w3.org/1999/xhtml",D=typeof document>"u"?void 0:document,Ot=!!D&&"content"in D.createElement("template"),St=!!D&&D.createRange&&"createContextualFragment"in D.createRange();function wt(e){var t=D.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function xt(e){he||(he=D.createRange(),he.selectNode(D.body));var t=he.createContextualFragment(e);return t.childNodes[0]}function Dt(e){var t=D.createElement("body");return t.innerHTML=e,t.childNodes[0]}function Ct(e){return e=e.trim(),Ot?wt(e):St?xt(e):Dt(e)}function ge(e,t){var n=e.nodeName,r=t.nodeName,i,a;return n===r?!0:(i=n.charCodeAt(0),a=r.charCodeAt(0),i<=90&&a>=97?n===r.toUpperCase():a<=90&&i>=97?r===n.toUpperCase():!1)}function Rt(e,t){return!t||t===Et?D.createElement(e):D.createElementNS(t,e)}function Pt(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}function Se(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var Ye={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();r==="OPTGROUP"&&(n=n.parentNode,r=n&&n.nodeName.toUpperCase()),r==="SELECT"&&!n.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}Se(e,t,"selected")},INPUT:function(e,t){Se(e,t,"checked"),Se(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var i=r.nodeValue;if(i==n||!n&&i==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n=-1,r=0,i=e.firstChild,a,l;i;)if(l=i.nodeName&&i.nodeName.toUpperCase(),l==="OPTGROUP")a=i,i=a.firstChild;else{if(l==="OPTION"){if(i.hasAttribute("selected")){n=r;break}r++}i=i.nextSibling,!i&&a&&(i=a.nextSibling,a=null)}e.selectedIndex=n}}},de=1,Ze=11,Je=3,Qe=8;function J(){}function Mt(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function Ut(e){return function(n,r,i){if(i||(i={}),typeof r=="string")if(n.nodeName==="#document"||n.nodeName==="HTML"||n.nodeName==="BODY"){var a=r;r=D.createElement("html"),r.innerHTML=a}else r=Ct(r);else r.nodeType===Ze&&(r=r.firstElementChild);var l=i.getNodeKey||Mt,b=i.onBeforeNodeAdded||J,g=i.onNodeAdded||J,L=i.onBeforeElUpdated||J,O=i.onElUpdated||J,_=i.onBeforeNodeDiscarded||J,w=i.onNodeDiscarded||J,W=i.onBeforeElChildrenUpdated||J,R=i.skipFromChildren||J,B=i.addChild||function(d,c){return d.appendChild(c)},V=i.childrenOnly===!0,T=Object.create(null),P=[];function F(d){P.push(d)}function M(d,c){if(d.nodeType===de)for(var m=d.firstChild;m;){var v=void 0;c&&(v=l(m))?F(v):(w(m),m.firstChild&&M(m,c)),m=m.nextSibling}}function K(d,c,m){_(d)!==!1&&(c&&c.removeChild(d),w(d),M(d,m))}function q(d){if(d.nodeType===de||d.nodeType===Ze)for(var c=d.firstChild;c;){var m=l(c);m&&(T[m]=c),q(c),c=c.nextSibling}}q(n);function U(d){g(d);for(var c=d.firstChild;c;){var m=c.nextSibling,v=l(c);if(v){var h=T[v];h&&ge(c,h)?(c.parentNode.replaceChild(h,c),te(h,c)):U(c)}else U(c);c=m}}function H(d,c,m){for(;c;){var v=c.nextSibling;(m=l(c))?F(m):K(c,d,!0),c=v}}function te(d,c,m){var v=l(c);if(v&&delete T[v],!m){var h=L(d,c);if(h===!1||(h instanceof HTMLElement&&(d=h,q(d)),e(d,c),O(d),W(d,c)===!1))return}d.nodeName!=="TEXTAREA"?fe(d,c):Ye.TEXTAREA(d,c)}function fe(d,c){var m=R(d,c),v=c.firstChild,h=d.firstChild,X,C,z,re,k;e:for(;v;){for(re=v.nextSibling,X=l(v);!m&&h;){if(z=h.nextSibling,v.isSameNode&&v.isSameNode(h)){v=re,h=z;continue e}C=l(h);var ie=h.nodeType,I=void 0;if(ie===v.nodeType&&(ie===de?(X?X!==C&&((k=T[X])?z===k?I=!1:(d.insertBefore(k,h),C?F(C):K(h,d,!0),h=k,C=l(h)):I=!1):C&&(I=!1),I=I!==!1&&ge(h,v),I&&te(h,v)):(ie===Je||ie==Qe)&&(I=!0,h.nodeValue!==v.nodeValue&&(h.nodeValue=v.nodeValue))),I){v=re,h=z;continue e}C?F(C):K(h,d,!0),h=z}if(X&&(k=T[X])&&ge(k,v))m||B(d,k),te(k,v);else{var se=b(v);se!==!1&&(se&&(v=se),v.actualize&&(v=v.actualize(d.ownerDocument||D)),B(d,v),U(v))}v=re,h=z}H(d,h,C);var oe=Ye[d.nodeName];oe&&oe(d,c)}var E=n,$=E.nodeType,Y=r.nodeType;if(!V){if($===de)Y===de?ge(n,r)||(w(n),E=Pt(n,Rt(r.nodeName,r.namespaceURI))):E=r;else if($===Je||$===Qe){if(Y===$)return E.nodeValue!==r.nodeValue&&(E.nodeValue=r.nodeValue),E;E=r}}if(E===r)w(n);else{if(r.isSameNode&&r.isSameNode(E))return;if(te(E,r,V),P)for(var G=0,Z=P.length;G<Z;G++){var ne=T[P[G]];ne&&K(ne,ne.parentNode,!1)}}return!V&&E!==n&&n.parentNode&&(E.actualize&&(E=E.actualize(n.ownerDocument||D)),n.parentNode.replaceChild(E,n)),E}}var kt=Ut(Nt);const It=document.getElementById("root"),ce=document.createElement("div");ce.style.backgroundColor="white";ce.style.border="solid 1px darkgray";ce.style.padding="8px";It.appendChild(ce);const ot=e=>{let t="";for(const n of e.split(`
`))t+=`<div>${n||"<br />"}</div>`;kt(ce,`<div>${t}</div>`,{childrenOnly:!0})};ot(`Hello world.
こんにちは。
👍❤️🧑‍🧑‍🧒`);At(ce,{schema:Lt({multiline:!0}),onChange:e=>{ot(e)}});
