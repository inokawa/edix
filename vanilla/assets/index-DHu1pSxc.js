(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();const{min:ve}=Math,Ee=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},pe="TEMPLATE",Le=e=>{if(e.tagName!=="BR")return!1;let r=!1,t=!1,n=e;for(;n=n.previousSibling;){if(ee(n)){r=!0;break}if(X(n)&&n.tagName!==pe)return!1}let a=e;for(;a=a.nextSibling;){if(ee(a)){t=!0;break}if(X(a)&&a.tagName!==pe)return!1}return r&&t},Ne=e=>e.ownerDocument,ee=e=>e.nodeType===3,X=e=>e.nodeType===1,Ce=new Set(["DIV","H1","H2","H3","H4","H5","H6","P","PRE","LI","DT","DD"]),le=e=>Ne(e).getSelection(),Oe=(e,r)=>{if(!e.rangeCount)return;const t=e.getRangeAt(0);return r.contains(t.commonAncestorContainer)?t:void 0},ue=(e,r)=>{if(r){const t=e.currentNode;let n;for(;(n=e.nextNode())&&t.contains(n););return n}return e.nextNode()},oe=(e,r,t,n,a)=>{const{start:i,end:s,backward:f}=t,h=he(e,r,i,n,a);if(!h)return!1;const b=he(e,r,s,n,a);if(!b)return!1;const u=e.createRange();{const[m,D]=h;X(m)?D<1?u.setStartBefore(m):u.setStartAfter(m):u.setStart(m,ve(D,m.data.length))}{const[m,D]=b;X(m)?D<1?u.setEndBefore(m):u.setEndAfter(m):u.setEnd(m,ve(D,m.data.length))}const L=le(r);return L.removeAllRanges(),L.addRange(u),f&&(L.collapseToEnd(),L.extend(u.startContainer,u.startOffset)),!0},he=(e,r,[t,n],a,i)=>{let s,f=0,h=!1;const b=i||r.childElementCount===0?r:r.children[t],u=e.createTreeWalker(b,5);for(;s=ue(u,h);)if(h=!1,ee(s)){const L=s.data.length;if(f+L>=n)return[s,n-f];f+=L}else if(X(s)){if(s.tagName==="BR"){if(f+1>=n)return[s,0];f++}else if(a(s)){if(h=!0,f+1>=n)return[s,n-f];f++}}},we=e=>{const r=(t=e.anchorNode,n=e.focusNode,t.compareDocumentPosition(n));var t,n;return r===0?e.anchorOffset>e.focusOffset:!!(2&r)},ce=(e,r,t,n,a,i)=>{let s,f=t;if(i||r.childElementCount===0)f=r,s=0;else{for(;f.parentNode!==r;)f=f.parentNode;s=Array.prototype.indexOf.call(r.children,f)}let h,b=0,u=!1;const L=!ee(t);L&&(t=t.childNodes[n]);const m=e.createTreeWalker(f,5);for(;h=ue(m,u);){if(u=!1,h===t){b+=L?0:n;break}ee(h)?b+=h.data.length:X(h)&&(Le(h)?(s++,b=0):a(h)&&(u=!0,b++))}return[s,b]},ge=(e,r,t,n)=>{const a=le(r),i=Oe(a,r);if(!i)return{start:[0,0],end:[0,0],backward:!1};let s,f;if(r===i.startContainer){if(!(i.startOffset===0&&i.endOffset!==0&&r.children.length<=i.endOffset))return{start:[0,0],end:[0,0],backward:!1};s=[0,0],f=ce(e,r,r.lastElementChild,r.lastElementChild.textContent.length,t,n)}else s=ce(e,r,i.startContainer,i.startOffset,t,n),f=ce(e,r,i.endContainer,i.endOffset,t,n);return{start:s,end:f,backward:we(a)}},ie=(e,r,t)=>{const n=[],a=e.createTreeWalker(r,5),i=()=>{n.push(f),f=""};let s,f="",h=!0,b=!1;for(;s=ue(a,b);)if(b=!1,ee(s))f+=s.data;else if(X(s))if(Ce.has(s.tagName)&&s.parentNode===r)h||i(),h=!1;else if(Le(s))i();else{const u=t(s);u!=null&&(b=!0,f+=u)}return i(),n},xe=(e,{multiline:r,readonly:t,nodes:n,onChange:a})=>{const{contentEditable:i,role:s,ariaMultiLine:f,ariaReadOnly:h}=e,b=e.style.whiteSpace;e.contentEditable="true",e.role="textbox",e.style.whiteSpace="pre-wrap",r&&(e.ariaMultiLine="true");let u,L=!1,m=!1,D=!1,q=null,_=!1,F=!1,C=!1;const R=!r,I=d=>{if(n)return n.find(v=>typeof v.is=="function"?v.is(d):d.nodeName===v.is.toUpperCase())},z=d=>{const v=I(d);if(v)return v.serialize?v.serialize(d):d.textContent},k=d=>!!I(d),j=()=>{e.ariaReadOnly=t?"true":null};j();const A=Ne(e),$=(d=>{let v=0;const y=[d],E=()=>y[v];return{get:E,undo:()=>v>0?(v--,E()):void 0,redo:()=>v<y.length-1?(v++,E()):void 0,push:(Y,V)=>{V||v++,y[v]=Y,y.splice(v+1),v>500&&(v--,y.shift())}}})([ie(A,e,z),{start:[0,0],end:[0,0],backward:!1}]),M=((d,v)=>{let y=!1;const E=[],Y=O=>{y&&E.push(...O)},V=new MutationObserver(O=>{Y(O),y||v()}),N=()=>{Y(V.takeRecords())};return V.observe(d,{characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{t(O){!y&&O&&N(),y=O},o:()=>(N(),E.splice(0)),i(){E.splice(0),V.disconnect()}}})(e,()=>{F&&u&&(oe(A,e,u,k,R),q!=null&&(cancelAnimationFrame(q),q=null))}),re=d=>{a(d.join(r?`
`:""))},T=()=>{M.t(!0)},U=()=>{D||(D=!0,Ee(()=>{D=!1;const d=M.o();if(M.t(!1),d.length){const v=ge(A,e,k,R),y=ie(A,e,z);(V=>{let N;for(;N=V.pop();){N.oldValue!==null&&(N.target.textContent=N.oldValue);for(let O=N.removedNodes.length-1;O>=0;O--)N.target.insertBefore(N.removedNodes[O],N.nextSibling);for(let O=N.addedNodes.length-1;O>=0;O--)N.addedNodes[O].parentNode&&N.target.removeChild(N.addedNodes[O])}})(d),M.o();const E=u||{start:[0,0],end:[0,0],backward:!1};m=oe(A,e,E,k,R);const Y=ie(A,e,z);t||($.push([Y,E],!0),$.push([y,v]),u=v,re(y)),u&&(V=>{q=requestAnimationFrame(()=>{oe(A,e,V,k,R)})})(u)}}))},Z=d=>{const v=!le(e).isCollapsed;T(),v&&A.execCommand("delete",!1),A.execCommand("insertText",!1,d),U()},J=d=>{const v=(y=>{const E=Oe(le(y),y);if(E)return E.cloneContents()})(e);v&&d.setData("text/plain",ie(A,v,z).join(`
`))},ae=d=>{_||!d.metaKey&&!d.ctrlKey||d.altKey||d.code!=="KeyZ"||(d.preventDefault(),(v=>{if(t)return;const y=v?$.redo():$.undo();y&&(M.t(!1),u=y[1],re(y[0]))})(d.shiftKey))},Q=()=>{_||C||U()},l=d=>{switch(d.inputType){case"historyUndo":case"historyRedo":return void d.preventDefault();case"insertLineBreak":case"insertParagraph":if(R)return void d.preventDefault()}T()},o=()=>{_=!0},g=()=>{_=!1,U()},c=()=>{m?m=!1:_||C||(u=ge(A,e,k,R))},p=d=>{d.preventDefault(),J(d.clipboardData)},H=d=>{d.preventDefault(),J(d.clipboardData),Z("")},w=d=>{d.preventDefault(),Z(d.clipboardData.getData("text/plain"))},B=()=>{F=!0},G=()=>{F=!1},P=()=>{C=!0},W=()=>{C&&(C=!1,U())};A.addEventListener("selectionchange",c),e.addEventListener("keydown",ae),e.addEventListener("input",Q),e.addEventListener("beforeinput",l),e.addEventListener("compositionstart",o),e.addEventListener("compositionend",g),e.addEventListener("copy",p),e.addEventListener("cut",H),e.addEventListener("paste",w),e.addEventListener("focus",B),e.addEventListener("blur",G),e.addEventListener("dragstart",P),e.addEventListener("dragend",W);const x=()=>{L||(L=!0,e.contentEditable=i,e.role=s,e.ariaMultiLine=f,e.ariaReadOnly=h,e.style.whiteSpace=b,M.i(),A.removeEventListener("selectionchange",c),e.removeEventListener("keydown",ae),e.removeEventListener("input",Q),e.removeEventListener("beforeinput",l),e.removeEventListener("compositionstart",o),e.removeEventListener("compositionend",g),e.removeEventListener("copy",p),e.removeEventListener("cut",H),e.removeEventListener("paste",w),e.removeEventListener("focus",B),e.removeEventListener("blur",G),e.removeEventListener("dragstart",P),e.removeEventListener("dragend",W))};return x.insert=Z,x.readonly=d=>{t=d,j()},x};var me=11;function De(e,r){var t=r.attributes,n,a,i,s,f;if(!(r.nodeType===me||e.nodeType===me)){for(var h=t.length-1;h>=0;h--)n=t[h],a=n.name,i=n.namespaceURI,s=n.value,i?(a=n.localName||a,f=e.getAttributeNS(i,a),f!==s&&(n.prefix==="xmlns"&&(a=n.name),e.setAttributeNS(i,a,s))):(f=e.getAttribute(a),f!==s&&e.setAttribute(a,s));for(var b=e.attributes,u=b.length-1;u>=0;u--)n=b[u],a=n.name,i=n.namespaceURI,i?(a=n.localName||a,r.hasAttributeNS(i,a)||e.removeAttributeNS(i,a)):r.hasAttribute(a)||e.removeAttribute(a)}}var se,Re="http://www.w3.org/1999/xhtml",S=typeof document>"u"?void 0:document,Me=!!S&&"content"in S.createElement("template"),Pe=!!S&&S.createRange&&"createContextualFragment"in S.createRange();function ke(e){var r=S.createElement("template");return r.innerHTML=e,r.content.childNodes[0]}function Ue(e){se||(se=S.createRange(),se.selectNode(S.body));var r=se.createContextualFragment(e);return r.childNodes[0]}function He(e){var r=S.createElement("body");return r.innerHTML=e,r.childNodes[0]}function Be(e){return e=e.trim(),Me?ke(e):Pe?Ue(e):He(e)}function de(e,r){var t=e.nodeName,n=r.nodeName,a,i;return t===n?!0:(a=t.charCodeAt(0),i=n.charCodeAt(0),a<=90&&i>=97?t===n.toUpperCase():i<=90&&a>=97?n===t.toUpperCase():!1)}function Ve(e,r){return!r||r===Re?S.createElement(e):S.createElementNS(r,e)}function _e(e,r){for(var t=e.firstChild;t;){var n=t.nextSibling;r.appendChild(t),t=n}return r}function fe(e,r,t){e[t]!==r[t]&&(e[t]=r[t],e[t]?e.setAttribute(t,""):e.removeAttribute(t))}var be={OPTION:function(e,r){var t=e.parentNode;if(t){var n=t.nodeName.toUpperCase();n==="OPTGROUP"&&(t=t.parentNode,n=t&&t.nodeName.toUpperCase()),n==="SELECT"&&!t.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!r.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),t.selectedIndex=-1)}fe(e,r,"selected")},INPUT:function(e,r){fe(e,r,"checked"),fe(e,r,"disabled"),e.value!==r.value&&(e.value=r.value),r.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,r){var t=r.value;e.value!==t&&(e.value=t);var n=e.firstChild;if(n){var a=n.nodeValue;if(a==t||!t&&a==e.placeholder)return;n.nodeValue=t}},SELECT:function(e,r){if(!r.hasAttribute("multiple")){for(var t=-1,n=0,a=e.firstChild,i,s;a;)if(s=a.nodeName&&a.nodeName.toUpperCase(),s==="OPTGROUP")i=a,a=i.firstChild;else{if(s==="OPTION"){if(a.hasAttribute("selected")){t=n;break}n++}a=a.nextSibling,!a&&i&&(a=i.nextSibling,i=null)}e.selectedIndex=t}}},ne=1,ye=11,Te=3,Ae=8;function K(){}function Ke(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function Fe(e){return function(t,n,a){if(a||(a={}),typeof n=="string")if(t.nodeName==="#document"||t.nodeName==="HTML"||t.nodeName==="BODY"){var i=n;n=S.createElement("html"),n.innerHTML=i}else n=Be(n);else n.nodeType===ye&&(n=n.firstElementChild);var s=a.getNodeKey||Ke,f=a.onBeforeNodeAdded||K,h=a.onNodeAdded||K,b=a.onBeforeElUpdated||K,u=a.onElUpdated||K,L=a.onBeforeNodeDiscarded||K,m=a.onNodeDiscarded||K,D=a.onBeforeElChildrenUpdated||K,q=a.skipFromChildren||K,_=a.addChild||function(l,o){return l.appendChild(o)},F=a.childrenOnly===!0,C=Object.create(null),R=[];function I(l){R.push(l)}function z(l,o){if(l.nodeType===ne)for(var g=l.firstChild;g;){var c=void 0;o&&(c=s(g))?I(c):(m(g),g.firstChild&&z(g,o)),g=g.nextSibling}}function k(l,o,g){L(l)!==!1&&(o&&o.removeChild(l),m(l),z(l,g))}function j(l){if(l.nodeType===ne||l.nodeType===ye)for(var o=l.firstChild;o;){var g=s(o);g&&(C[g]=o),j(o),o=o.nextSibling}}j(t);function A(l){h(l);for(var o=l.firstChild;o;){var g=o.nextSibling,c=s(o);if(c){var p=C[c];p&&de(o,p)?(o.parentNode.replaceChild(p,o),M(p,o)):A(o)}else A(o);o=g}}function $(l,o,g){for(;o;){var c=o.nextSibling;(g=s(o))?I(g):k(o,l,!0),o=c}}function M(l,o,g){var c=s(o);if(c&&delete C[c],!g){var p=b(l,o);if(p===!1||(p instanceof HTMLElement&&(l=p,j(l)),e(l,o),u(l),D(l,o)===!1))return}l.nodeName!=="TEXTAREA"?re(l,o):be.TEXTAREA(l,o)}function re(l,o){var g=q(l,o),c=o.firstChild,p=l.firstChild,H,w,B,G,P;e:for(;c;){for(G=c.nextSibling,H=s(c);!g&&p;){if(B=p.nextSibling,c.isSameNode&&c.isSameNode(p)){c=G,p=B;continue e}w=s(p);var W=p.nodeType,x=void 0;if(W===c.nodeType&&(W===ne?(H?H!==w&&((P=C[H])?B===P?x=!1:(l.insertBefore(P,p),w?I(w):k(p,l,!0),p=P,w=s(p)):x=!1):w&&(x=!1),x=x!==!1&&de(p,c),x&&M(p,c)):(W===Te||W==Ae)&&(x=!0,p.nodeValue!==c.nodeValue&&(p.nodeValue=c.nodeValue))),x){c=G,p=B;continue e}w?I(w):k(p,l,!0),p=B}if(H&&(P=C[H])&&de(P,c))g||_(l,P),M(P,c);else{var d=f(c);d!==!1&&(d&&(c=d),c.actualize&&(c=c.actualize(l.ownerDocument||S)),_(l,c),A(c))}c=G,p=B}$(l,p,w);var v=be[l.nodeName];v&&v(l,o)}var T=t,U=T.nodeType,Z=n.nodeType;if(!F){if(U===ne)Z===ne?de(t,n)||(m(t),T=_e(t,Ve(n.nodeName,n.namespaceURI))):T=n;else if(U===Te||U===Ae){if(Z===U)return T.nodeValue!==n.nodeValue&&(T.nodeValue=n.nodeValue),T;T=n}}if(T===n)m(t);else{if(n.isSameNode&&n.isSameNode(T))return;if(M(T,n,F),R)for(var J=0,ae=R.length;J<ae;J++){var Q=C[R[J]];Q&&k(Q,Q.parentNode,!1)}}return!F&&T!==t&&t.parentNode&&(T.actualize&&(T=T.actualize(t.ownerDocument||S)),t.parentNode.replaceChild(T,t)),T}}var Ie=Fe(De);const ze=document.getElementById("root"),te=document.createElement("div");te.style.backgroundColor="white";te.style.border="solid 1px darkgray";te.style.padding="8px";ze.appendChild(te);const Se=e=>{let r="";for(const t of e.split(`
`))r+=`<div>${t||"<br />"}</div>`;Ie(te,`<div>${r}</div>`,{childrenOnly:!0})};Se(`Hello World.
こんにちは。
👍❤️🧑‍🧑‍🧒`);xe(te,{multiline:!0,onChange:e=>{Se(e)}});
