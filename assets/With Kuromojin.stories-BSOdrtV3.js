import{j as er}from"./jsx-runtime-u17CrQMm.js";import{c as $r,r as fr}from"./iframe-DtaWnhEU.js";import{r as oo}from"./index-CR0aolDF.js";import{c as Pn}from"./editor-CDmih3Kc.js";import{p as uo}from"./plain-DMmhstEn.js";import"./preload-helper-PPVm8Dsz.js";import"./index-Bo_pH-9p.js";var ke={},ir={},Ae,fn;function Un(){if(fn)return Ae;fn=1;function m(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function d(u,n){for(var t="",f=0,l=-1,g=0,h,c=0;c<=u.length;++c){if(c<u.length)h=u.charCodeAt(c);else{if(h===47)break;h=47}if(h===47){if(!(l===c-1||g===1))if(l!==c-1&&g===2){if(t.length<2||f!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var y=t.lastIndexOf("/");if(y!==t.length-1){y===-1?(t="",f=0):(t=t.slice(0,y),f=t.length-1-t.lastIndexOf("/")),l=c,g=0;continue}}else if(t.length===2||t.length===1){t="",f=0,l=c,g=0;continue}}n&&(t.length>0?t+="/..":t="..",f=2)}else t.length>0?t+="/"+u.slice(l+1,c):t=u.slice(l+1,c),f=c-l-1;l=c,g=0}else h===46&&g!==-1?++g:g=-1}return t}function a(u,n){var t=n.dir||n.root,f=n.base||(n.name||"")+(n.ext||"");return t?t===n.root?t+f:t+u+f:f}var i={resolve:function(){for(var n="",t=!1,f,l=arguments.length-1;l>=-1&&!t;l--){var g;l>=0?g=arguments[l]:(f===void 0&&(f=process.cwd()),g=f),m(g),g.length!==0&&(n=g+"/"+n,t=g.charCodeAt(0)===47)}return n=d(n,!t),t?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(m(n),n.length===0)return".";var t=n.charCodeAt(0)===47,f=n.charCodeAt(n.length-1)===47;return n=d(n,!t),n.length===0&&!t&&(n="."),n.length>0&&f&&(n+="/"),t?"/"+n:n},isAbsolute:function(n){return m(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,t=0;t<arguments.length;++t){var f=arguments[t];m(f),f.length>0&&(n===void 0?n=f:n+="/"+f)}return n===void 0?".":i.normalize(n)},relative:function(n,t){if(m(n),m(t),n===t||(n=i.resolve(n),t=i.resolve(t),n===t))return"";for(var f=1;f<n.length&&n.charCodeAt(f)===47;++f);for(var l=n.length,g=l-f,h=1;h<t.length&&t.charCodeAt(h)===47;++h);for(var c=t.length,y=c-h,k=g<y?g:y,x=-1,I=0;I<=k;++I){if(I===k){if(y>k){if(t.charCodeAt(h+I)===47)return t.slice(h+I+1);if(I===0)return t.slice(h+I)}else g>k&&(n.charCodeAt(f+I)===47?x=I:I===0&&(x=0));break}var V=n.charCodeAt(f+I),Y=t.charCodeAt(h+I);if(V!==Y)break;V===47&&(x=I)}var b="";for(I=f+x+1;I<=l;++I)(I===l||n.charCodeAt(I)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+t.slice(h+x):(h+=x,t.charCodeAt(h)===47&&++h,t.slice(h))},_makeLong:function(n){return n},dirname:function(n){if(m(n),n.length===0)return".";for(var t=n.charCodeAt(0),f=t===47,l=-1,g=!0,h=n.length-1;h>=1;--h)if(t=n.charCodeAt(h),t===47){if(!g){l=h;break}}else g=!1;return l===-1?f?"/":".":f&&l===1?"//":n.slice(0,l)},basename:function(n,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');m(n);var f=0,l=-1,g=!0,h;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";var c=t.length-1,y=-1;for(h=n.length-1;h>=0;--h){var k=n.charCodeAt(h);if(k===47){if(!g){f=h+1;break}}else y===-1&&(g=!1,y=h+1),c>=0&&(k===t.charCodeAt(c)?--c===-1&&(l=h):(c=-1,l=y))}return f===l?l=y:l===-1&&(l=n.length),n.slice(f,l)}else{for(h=n.length-1;h>=0;--h)if(n.charCodeAt(h)===47){if(!g){f=h+1;break}}else l===-1&&(g=!1,l=h+1);return l===-1?"":n.slice(f,l)}},extname:function(n){m(n);for(var t=-1,f=0,l=-1,g=!0,h=0,c=n.length-1;c>=0;--c){var y=n.charCodeAt(c);if(y===47){if(!g){f=c+1;break}continue}l===-1&&(g=!1,l=c+1),y===46?t===-1?t=c:h!==1&&(h=1):t!==-1&&(h=-1)}return t===-1||l===-1||h===0||h===1&&t===l-1&&t===f+1?"":n.slice(t,l)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return a("/",n)},parse:function(n){m(n);var t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;var f=n.charCodeAt(0),l=f===47,g;l?(t.root="/",g=1):g=0;for(var h=-1,c=0,y=-1,k=!0,x=n.length-1,I=0;x>=g;--x){if(f=n.charCodeAt(x),f===47){if(!k){c=x+1;break}continue}y===-1&&(k=!1,y=x+1),f===46?h===-1?h=x:I!==1&&(I=1):h!==-1&&(I=-1)}return h===-1||y===-1||I===0||I===1&&h===y-1&&h===c+1?y!==-1&&(c===0&&l?t.base=t.name=n.slice(1,y):t.base=t.name=n.slice(c,y)):(c===0&&l?(t.name=n.slice(1,h),t.base=n.slice(1,y)):(t.name=n.slice(c,h),t.base=n.slice(c,y)),t.ext=n.slice(h,y)),c>0?t.dir=n.slice(0,c-1):l&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,Ae=i,Ae}var Dr={exports:{}},so=Dr.exports,cn;function fo(){return cn||(cn=1,(function(m,d){(function(a,i){i(d)})(so,function(a){const i=Symbol("newer"),u=Symbol("older");class n{constructor(c,y){typeof c!="number"&&(y=c,c=0),this.size=0,this.limit=c,this.oldest=this.newest=void 0,this._keymap=new Map,y&&(this.assign(y),c<1&&(this.limit=this.size))}_markEntryAsUsed(c){c!==this.newest&&(c[i]&&(c===this.oldest&&(this.oldest=c[i]),c[i][u]=c[u]),c[u]&&(c[u][i]=c[i]),c[i]=void 0,c[u]=this.newest,this.newest&&(this.newest[i]=c),this.newest=c)}assign(c){let y,k=this.limit||Number.MAX_VALUE;this._keymap.clear();let x=c[Symbol.iterator]();for(let I=x.next();!I.done;I=x.next()){let V=new t(I.value[0],I.value[1]);if(this._keymap.set(V.key,V),y?(y[i]=V,V[u]=y):this.oldest=V,y=V,k--==0)throw new Error("overflow")}this.newest=y,this.size=this._keymap.size}get(c){var y=this._keymap.get(c);return y?(this._markEntryAsUsed(y),y.value):void 0}set(c,y){var k=this._keymap.get(c);return k?(k.value=y,this._markEntryAsUsed(k),this):(this._keymap.set(c,k=new t(c,y)),this.newest?(this.newest[i]=k,k[u]=this.newest):this.oldest=k,this.newest=k,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var c=this.oldest;if(c)return this.oldest[i]?(this.oldest=this.oldest[i],this.oldest[u]=void 0):(this.oldest=void 0,this.newest=void 0),c[i]=c[u]=void 0,this._keymap.delete(c.key),--this.size,[c.key,c.value]}find(c){let y=this._keymap.get(c);return y?y.value:void 0}has(c){return this._keymap.has(c)}delete(c){var y=this._keymap.get(c);return y?(this._keymap.delete(y.key),y[i]&&y[u]?(y[u][i]=y[i],y[i][u]=y[u]):y[i]?(y[i][u]=void 0,this.oldest=y[i]):y[u]?(y[u][i]=void 0,this.newest=y[u]):this.oldest=this.newest=void 0,this.size--,y.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new l(this.oldest)}values(){return new g(this.oldest)}entries(){return this}[Symbol.iterator](){return new f(this.oldest)}forEach(c,y){typeof y!="object"&&(y=this);let k=this.oldest;for(;k;)c.call(y,k.value,k.key,this),k=k[i]}toJSON(){for(var c=new Array(this.size),y=0,k=this.oldest;k;)c[y++]={key:k.key,value:k.value},k=k[i];return c}toString(){for(var c="",y=this.oldest;y;)c+=String(y.key)+":"+y.value,y=y[i],y&&(c+=" < ");return c}}a.LRUMap=n;function t(h,c){this.key=h,this.value=c,this[i]=void 0,this[u]=void 0}function f(h){this.entry=h}f.prototype[Symbol.iterator]=function(){return this},f.prototype.next=function(){let h=this.entry;return h?(this.entry=h[i],{done:!1,value:[h.key,h.value]}):{done:!0,value:void 0}};function l(h){this.entry=h}l.prototype[Symbol.iterator]=function(){return this},l.prototype.next=function(){let h=this.entry;return h?(this.entry=h[i],{done:!1,value:h.key}):{done:!0,value:void 0}};function g(h){this.entry=h}g.prototype[Symbol.iterator]=function(){return this},g.prototype.next=function(){let h=this.entry;return h?(this.entry=h[i],{done:!1,value:h.value}):{done:!0,value:void 0}}})})(Dr,Dr.exports)),Dr.exports}var re={},ln;function co(){if(ln)return re;ln=1,Object.defineProperty(re,"__esModule",{value:!0});var m=(function(){function d(){var a=this;this.promise=new Promise(function(i,u){a.resolve=i,a.reject=u})}return d})();return re.default=m,re}var Se,hn;function qn(){if(hn)return Se;hn=1;function m(d,a,i,u,n,t,f,l){this.name=d,this.cost=a,this.start_pos=i,this.length=u,this.left_id=t,this.right_id=f,this.prev=null,this.surface_form=l,n==="BOS"?this.shortest_cost=0:this.shortest_cost=Number.MAX_VALUE,this.type=n}return Se=m,Se}var Ce,vn;function lo(){if(vn)return Ce;vn=1;var m=qn();function d(){this.nodes_end_at=[],this.nodes_end_at[0]=[new m(-1,0,0,0,"BOS",0,0,"")],this.eos_pos=1}return d.prototype.append=function(a){var i=a.start_pos+a.length-1;this.eos_pos<i&&(this.eos_pos=i);var u=this.nodes_end_at[i];u==null&&(u=[]),u.push(a),this.nodes_end_at[i]=u},d.prototype.appendEos=function(){var a=this.nodes_end_at.length;this.eos_pos++,this.nodes_end_at[a]=[new m(-1,0,this.eos_pos,0,"EOS",0,0,"")]},Ce=d,Ce}var Te,pn;function Mn(){if(pn)return Te;pn=1;function m(d){this.str=d,this.index_mapping=[];for(var a=0;a<d.length;a++){var i=d.charAt(a);this.index_mapping.push(a),m.isSurrogatePair(i)&&a++}this.length=this.index_mapping.length}return m.prototype.slice=function(d){if(this.index_mapping.length<=d)return"";var a=this.index_mapping[d];return this.str.slice(a)},m.prototype.charAt=function(d){if(this.str.length<=d)return"";var a=this.index_mapping[d],i=this.index_mapping[d+1];return i==null?this.str.slice(a):this.str.slice(a,i)},m.prototype.charCodeAt=function(d){if(this.index_mapping.length<=d)return NaN;var a=this.index_mapping[d],i=this.str.charCodeAt(a),u;return i>=55296&&i<=56319&&a<this.str.length&&(u=this.str.charCodeAt(a+1),u>=56320&&u<=57343)?(i-55296)*1024+u-56320+65536:i},m.prototype.toString=function(){return this.str},m.isSurrogatePair=function(d){var a=d.charCodeAt(0);return a>=55296&&a<=56319},Te=m,Te}var De,yn;function ho(){if(yn)return De;yn=1;var m=qn(),d=lo(),a=Mn();function i(u){this.trie=u.trie,this.token_info_dictionary=u.token_info_dictionary,this.unknown_dictionary=u.unknown_dictionary}return i.prototype.build=function(u){for(var n=new d,t=new a(u),f,l,g,h,c,y=0;y<t.length;y++){for(var k=t.slice(y),x=this.trie.commonPrefixSearch(k),I=0;I<x.length;I++){l=x[I].v,f=x[I].k;for(var V=this.token_info_dictionary.target_map[l],Y=0;Y<V.length;Y++){var b=parseInt(V[Y]);g=this.token_info_dictionary.dictionary.getShort(b),h=this.token_info_dictionary.dictionary.getShort(b+2),c=this.token_info_dictionary.dictionary.getShort(b+4),n.append(new m(b,c,y+1,f.length,"KNOWN",g,h,f))}}var E=new a(k),F=new a(E.charAt(0)),D=this.unknown_dictionary.lookup(F.toString());if(x==null||x.length===0||D.is_always_invoke===1){if(f=F,D.is_grouping===1&&1<E.length)for(var T=1;T<E.length;T++){var A=E.charAt(T),j=this.unknown_dictionary.lookup(A);if(D.class_name!==j.class_name)break;f+=A}for(var B=this.unknown_dictionary.target_map[D.class_id],O=0;O<B.length;O++){var z=parseInt(B[O]);g=this.unknown_dictionary.dictionary.getShort(z),h=this.unknown_dictionary.dictionary.getShort(z+2),c=this.unknown_dictionary.dictionary.getShort(z+4),n.append(new m(z,c,y+1,f.length,"UNKNOWN",g,h,f.toString()))}}}return n.appendEos(),n},De=i,De}var je,dn;function vo(){if(dn)return je;dn=1;function m(d){this.connection_costs=d}return m.prototype.search=function(d){return d=this.forward(d),this.backward(d)},m.prototype.forward=function(d){var a,i,u;for(a=1;a<=d.eos_pos;a++){var n=d.nodes_end_at[a];if(n!=null)for(i=0;i<n.length;i++){var t=n[i],f=Number.MAX_VALUE,l,g=d.nodes_end_at[t.start_pos-1];if(g!=null){for(u=0;u<g.length;u++){var h=g[u],c;t.left_id==null||h.right_id==null?(console.log("Left or right is null"),c=0):c=this.connection_costs.get(h.right_id,t.left_id);var y=h.shortest_cost+c+t.cost;y<f&&(l=h,f=y)}t.prev=l,t.shortest_cost=f}}}return d},m.prototype.backward=function(d){var a=[],i=d.nodes_end_at[d.nodes_end_at.length-1][0],u=i.prev;if(u==null)return[];for(;u.type!=="BOS";){if(a.push(u),u.prev==null)return[];u=u.prev}return a.reverse()},je=m,je}var Be,gn;function po(){if(gn)return Be;gn=1;function m(){}return m.prototype.formatEntry=function(d,a,i,u){var n={};return n.word_id=d,n.word_type=i,n.word_position=a,n.surface_form=u[0],n.pos=u[1],n.pos_detail_1=u[2],n.pos_detail_2=u[3],n.pos_detail_3=u[4],n.conjugated_type=u[5],n.conjugated_form=u[6],n.basic_form=u[7],n.reading=u[8],n.pronunciation=u[9],n},m.prototype.formatUnknownEntry=function(d,a,i,u,n){var t={};return t.word_id=d,t.word_type=i,t.word_position=a,t.surface_form=n,t.pos=u[1],t.pos_detail_1=u[2],t.pos_detail_2=u[3],t.pos_detail_3=u[4],t.conjugated_type=u[5],t.conjugated_form=u[6],t.basic_form=u[7],t},Be=m,Be}var Ee,mn;function yo(){if(mn)return Ee;mn=1;var m=ho(),d=vo(),a=po(),i=/、|。/;function u(n){this.token_info_dictionary=n.token_info_dictionary,this.unknown_dictionary=n.unknown_dictionary,this.viterbi_builder=new m(n),this.viterbi_searcher=new d(n.connection_costs),this.formatter=new a}return u.splitByPunctuation=function(n){for(var t=[],f=n;f!=="";){var l=f.search(i);if(l<0){t.push(f);break}t.push(f.substring(0,l+1)),f=f.substring(l+1)}return t},u.prototype.tokenize=function(n){for(var t=u.splitByPunctuation(n),f=[],l=0;l<t.length;l++){var g=t[l];this.tokenizeForSentence(g,f)}return f},u.prototype.tokenizeForSentence=function(n,t){t==null&&(t=[]);var f=this.getLattice(n),l=this.viterbi_searcher.search(f),g=0;t.length>0&&(g=t[t.length-1].word_position);for(var h=0;h<l.length;h++){var c=l[h],y,k,x;c.type==="KNOWN"?(x=this.token_info_dictionary.getFeatures(c.name),x==null?k=[]:k=x.split(","),y=this.formatter.formatEntry(c.name,g+c.start_pos,c.type,k)):c.type==="UNKNOWN"?(x=this.unknown_dictionary.getFeatures(c.name),x==null?k=[]:k=x.split(","),y=this.formatter.formatUnknownEntry(c.name,g+c.start_pos,c.type,k,c.surface_form)):y=this.formatter.formatEntry(c.name,g+c.start_pos,c.type,[]),t.push(y)}return t},u.prototype.getLattice=function(n){return this.viterbi_builder.build(n)},Ee=u,Ee}var jr={exports:{}},go=jr.exports,_n;function mo(){return _n||(_n=1,(function(m,d){(function(a,i){i(d)})(go,(function(a){function i(r,e){e=e|0;for(var o=Math.max(r.length-e,0),s=Array(o),v=0;v<o;v++)s[v]=r[e+v];return s}var u=function(r){var e=i(arguments,1);return function(){var o=i(arguments);return r.apply(null,e.concat(o))}},n=function(r){return function(){var e=i(arguments),o=e.pop();r.call(this,e,o)}};function t(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var f=typeof setImmediate=="function"&&setImmediate,l=typeof process=="object"&&typeof process.nextTick=="function";function g(r){setTimeout(r,0)}function h(r){return function(e){var o=i(arguments,1);r(function(){e.apply(null,o)})}}var c;f?c=setImmediate:l?c=process.nextTick:c=g;var y=h(c);function k(r){return n(function(e,o){var s;try{s=r.apply(this,e)}catch(v){return o(v)}t(s)&&typeof s.then=="function"?s.then(function(v){x(o,null,v)},function(v){x(o,v.message?v:new Error(v))}):o(null,s)})}function x(r,e,o){try{r(e,o)}catch(s){y(I,s)}}function I(r){throw r}var V=typeof Symbol=="function";function Y(r){return V&&r[Symbol.toStringTag]==="AsyncFunction"}function b(r){return Y(r)?k(r):r}function E(r){return function(e){var o=i(arguments,1),s=n(function(v,p){var _=this;return r(e,function(w,S){b(w).apply(_,v.concat(S))},p)});return o.length?s.apply(this,o):s}}var F=typeof $r=="object"&&$r&&$r.Object===Object&&$r,D=typeof self=="object"&&self&&self.Object===Object&&self,T=F||D||Function("return this")(),A=T.Symbol,j=Object.prototype,B=j.hasOwnProperty,O=j.toString,z=A?A.toStringTag:void 0;function G(r){var e=B.call(r,z),o=r[z];try{r[z]=void 0;var s=!0}catch{}var v=O.call(r);return s&&(e?r[z]=o:delete r[z]),v}var tr=Object.prototype,te=tr.toString;function Jn(r){return te.call(r)}var Xn="[object Null]",Qn="[object Undefined]",Je=A?A.toStringTag:void 0;function Br(r){return r==null?r===void 0?Qn:Xn:Je&&Je in Object(r)?G(r):Jn(r)}var Zn="[object AsyncFunction]",$n="[object Function]",ri="[object GeneratorFunction]",ei="[object Proxy]";function ti(r){if(!t(r))return!1;var e=Br(r);return e==$n||e==ri||e==Zn||e==ei}var ni=9007199254740991;function Xe(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=ni}function gr(r){return r!=null&&Xe(r.length)&&!ti(r)}var ne={};function P(){}function ar(r){return function(){if(r!==null){var e=r;r=null,e.apply(this,arguments)}}}var ie=typeof Symbol=="function"&&Symbol.iterator,ii=function(r){return ie&&r[ie]&&r[ie]()};function ai(r,e){for(var o=-1,s=Array(r);++o<r;)s[o]=e(o);return s}function Er(r){return r!=null&&typeof r=="object"}var oi="[object Arguments]";function Qe(r){return Er(r)&&Br(r)==oi}var Ze=Object.prototype,ui=Ze.hasOwnProperty,si=Ze.propertyIsEnumerable,fi=Qe((function(){return arguments})())?Qe:function(r){return Er(r)&&ui.call(r,"callee")&&!si.call(r,"callee")},X=Array.isArray;function ci(){return!1}var $e=typeof a=="object"&&a&&!a.nodeType&&a,rt=$e&&!0&&m&&!m.nodeType&&m,li=rt&&rt.exports===$e,et=li?T.Buffer:void 0,hi=et?et.isBuffer:void 0,vi=hi||ci,pi=9007199254740991,yi=/^(?:0|[1-9]\d*)$/;function di(r,e){var o=typeof r;return e=e??pi,!!e&&(o=="number"||o!="symbol"&&yi.test(r))&&r>-1&&r%1==0&&r<e}var gi="[object Arguments]",mi="[object Array]",_i="[object Boolean]",bi="[object Date]",wi="[object Error]",ki="[object Function]",Ai="[object Map]",Si="[object Number]",Ci="[object Object]",Ti="[object RegExp]",Di="[object Set]",ji="[object String]",Bi="[object WeakMap]",Ei="[object ArrayBuffer]",Fi="[object DataView]",Li="[object Float32Array]",Ii="[object Float64Array]",Oi="[object Int8Array]",xi="[object Int16Array]",zi="[object Int32Array]",Ri="[object Uint8Array]",Pi="[object Uint8ClampedArray]",Ui="[object Uint16Array]",qi="[object Uint32Array]",U={};U[Li]=U[Ii]=U[Oi]=U[xi]=U[zi]=U[Ri]=U[Pi]=U[Ui]=U[qi]=!0,U[gi]=U[mi]=U[Ei]=U[_i]=U[Fi]=U[bi]=U[wi]=U[ki]=U[Ai]=U[Si]=U[Ci]=U[Ti]=U[Di]=U[ji]=U[Bi]=!1;function Mi(r){return Er(r)&&Xe(r.length)&&!!U[Br(r)]}function Ni(r){return function(e){return r(e)}}var tt=typeof a=="object"&&a&&!a.nodeType&&a,mr=tt&&!0&&m&&!m.nodeType&&m,Vi=mr&&mr.exports===tt,ae=Vi&&F.process,nt=(function(){try{var r=mr&&mr.require&&mr.require("util").types;return r||ae&&ae.binding&&ae.binding("util")}catch{}})(),it=nt&&nt.isTypedArray,Gi=it?Ni(it):Mi,Ki=Object.prototype,Wi=Ki.hasOwnProperty;function Hi(r,e){var o=X(r),s=!o&&fi(r),v=!o&&!s&&vi(r),p=!o&&!s&&!v&&Gi(r),_=o||s||v||p,w=_?ai(r.length,String):[],S=w.length;for(var L in r)Wi.call(r,L)&&!(_&&(L=="length"||v&&(L=="offset"||L=="parent")||p&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||di(L,S)))&&w.push(L);return w}var Yi=Object.prototype;function Ji(r){var e=r&&r.constructor,o=typeof e=="function"&&e.prototype||Yi;return r===o}function Xi(r,e){return function(o){return r(e(o))}}var Qi=Xi(Object.keys,Object),Zi=Object.prototype,$i=Zi.hasOwnProperty;function ra(r){if(!Ji(r))return Qi(r);var e=[];for(var o in Object(r))$i.call(r,o)&&o!="constructor"&&e.push(o);return e}function oe(r){return gr(r)?Hi(r):ra(r)}function ea(r){var e=-1,o=r.length;return function(){return++e<o?{value:r[e],key:e}:null}}function ta(r){var e=-1;return function(){var s=r.next();return s.done?null:(e++,{value:s.value,key:e})}}function na(r){var e=oe(r),o=-1,s=e.length;return function v(){var p=e[++o];return p==="__proto__"?v():o<s?{value:r[p],key:p}:null}}function ia(r){if(gr(r))return ea(r);var e=ii(r);return e?ta(e):na(r)}function Z(r){return function(){if(r===null)throw new Error("Callback was already called.");var e=r;r=null,e.apply(this,arguments)}}function Fr(r){return function(e,o,s){if(s=ar(s||P),r<=0||!e)return s(null);var v=ia(e),p=!1,_=0,w=!1;function S(C,R){if(_-=1,C)p=!0,s(C);else{if(R===ne||p&&_<=0)return p=!0,s(null);w||L()}}function L(){for(w=!0;_<r&&!p;){var C=v();if(C===null){p=!0,_<=0&&s(null);return}_+=1,o(C.value,C.key,Z(S))}w=!1}L()}}function sr(r,e,o,s){Fr(e)(r,b(o),s)}function W(r,e){return function(o,s,v){return r(o,e,s,v)}}function aa(r,e,o){o=ar(o||P);var s=0,v=0,p=r.length;p===0&&o(null);function _(w,S){w?o(w):(++v===p||S===ne)&&o(null)}for(;s<p;s++)e(r[s],s,Z(_))}var oa=W(sr,1/0),or=function(r,e,o){var s=gr(r)?aa:oa;s(r,b(e),o)};function cr(r){return function(e,o,s){return r(or,e,b(o),s)}}function at(r,e,o,s){s=s||P,e=e||[];var v=[],p=0,_=b(o);r(e,function(w,S,L){var C=p++;_(w,function(R,q){v[C]=q,L(R)})},function(w){s(w,v)})}var Lr=cr(at),ot=E(Lr);function lr(r){return function(e,o,s,v){return r(Fr(o),e,b(s),v)}}var hr=lr(at),ue=W(hr,1),ut=E(ue);function Ir(r,e){for(var o=-1,s=r==null?0:r.length;++o<s&&e(r[o],o,r)!==!1;);return r}function ua(r){return function(e,o,s){for(var v=-1,p=Object(e),_=s(e),w=_.length;w--;){var S=_[++v];if(o(p[S],S,p)===!1)break}return e}}var sa=ua();function _r(r,e){return r&&sa(r,e,oe)}function fa(r,e,o,s){for(var v=r.length,p=o+-1;++p<v;)if(e(r[p],p,r))return p;return-1}function ca(r){return r!==r}function la(r,e,o){for(var s=o-1,v=r.length;++s<v;)if(r[s]===e)return s;return-1}function Or(r,e,o){return e===e?la(r,e,o):fa(r,ca,o)}var se=function(r,e,o){typeof e=="function"&&(o=e,e=null),o=ar(o||P);var s=oe(r),v=s.length;if(!v)return o(null);e||(e=v);var p={},_=0,w=!1,S=Object.create(null),L=[],C=[],R={};_r(r,function(M,N){if(!X(M)){q(N,[M]),C.push(N);return}var K=M.slice(0,M.length-1),nr=K.length;if(nr===0){q(N,M),C.push(N);return}R[N]=nr,Ir(K,function(dr){if(!r[dr])throw new Error("async.auto task `"+N+"` has a non-existent dependency `"+dr+"` in "+K.join(", "));$(dr,function(){nr--,nr===0&&q(N,M)})})}),to(),H();function q(M,N){L.push(function(){rr(M,N)})}function H(){if(L.length===0&&_===0)return o(null,p);for(;L.length&&_<e;){var M=L.shift();M()}}function $(M,N){var K=S[M];K||(K=S[M]=[]),K.push(N)}function J(M){var N=S[M]||[];Ir(N,function(K){K()}),H()}function rr(M,N){if(!w){var K=Z(function(dr,be){if(_--,arguments.length>2&&(be=i(arguments,1)),dr){var we={};_r(p,function(io,ao){we[ao]=io}),we[M]=be,w=!0,S=Object.create(null),o(dr,we)}else p[M]=be,J(M)});_++;var nr=b(N[N.length-1]);N.length>1?nr(p,K):nr(K)}}function to(){for(var M,N=0;C.length;)M=C.pop(),N++,Ir(no(M),function(K){--R[K]===0&&C.push(K)});if(N!==v)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function no(M){var N=[];return _r(r,function(K,nr){X(K)&&Or(K,M,0)>=0&&N.push(nr)}),N}};function vr(r,e){for(var o=-1,s=r==null?0:r.length,v=Array(s);++o<s;)v[o]=e(r[o],o,r);return v}var ha="[object Symbol]";function va(r){return typeof r=="symbol"||Er(r)&&Br(r)==ha}var st=A?A.prototype:void 0,ft=st?st.toString:void 0;function fe(r){if(typeof r=="string")return r;if(X(r))return vr(r,fe)+"";if(va(r))return ft?ft.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function pa(r,e,o){var s=-1,v=r.length;e<0&&(e=-e>v?0:v+e),o=o>v?v:o,o<0&&(o+=v),v=e>o?0:o-e>>>0,e>>>=0;for(var p=Array(v);++s<v;)p[s]=r[s+e];return p}function ya(r,e,o){var s=r.length;return o=o===void 0?s:o,!e&&o>=s?r:pa(r,e,o)}function da(r,e){for(var o=r.length;o--&&Or(e,r[o],0)>-1;);return o}function ga(r,e){for(var o=-1,s=r.length;++o<s&&Or(e,r[o],0)>-1;);return o}function ma(r){return r.split("")}var _a="\\ud800-\\udfff",ba="\\u0300-\\u036f",wa="\\ufe20-\\ufe2f",ka="\\u20d0-\\u20ff",Aa=ba+wa+ka,Sa="\\ufe0e\\ufe0f",Ca="\\u200d",Ta=RegExp("["+Ca+_a+Aa+Sa+"]");function Da(r){return Ta.test(r)}var ct="\\ud800-\\udfff",ja="\\u0300-\\u036f",Ba="\\ufe20-\\ufe2f",Ea="\\u20d0-\\u20ff",Fa=ja+Ba+Ea,La="\\ufe0e\\ufe0f",Ia="["+ct+"]",ce="["+Fa+"]",le="\\ud83c[\\udffb-\\udfff]",Oa="(?:"+ce+"|"+le+")",lt="[^"+ct+"]",ht="(?:\\ud83c[\\udde6-\\uddff]){2}",vt="[\\ud800-\\udbff][\\udc00-\\udfff]",xa="\\u200d",pt=Oa+"?",yt="["+La+"]?",za="(?:"+xa+"(?:"+[lt,ht,vt].join("|")+")"+yt+pt+")*",Ra=yt+pt+za,Pa="(?:"+[lt+ce+"?",ce,ht,vt,Ia].join("|")+")",Ua=RegExp(le+"(?="+le+")|"+Pa+Ra,"g");function qa(r){return r.match(Ua)||[]}function dt(r){return Da(r)?qa(r):ma(r)}function Ma(r){return r==null?"":fe(r)}var Na=/^\s+|\s+$/g;function Va(r,e,o){if(r=Ma(r),r&&e===void 0)return r.replace(Na,"");if(!r||!(e=fe(e)))return r;var s=dt(r),v=dt(e),p=ga(s,v),_=da(s,v)+1;return ya(s,p,_).join("")}var Ga=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,Ka=/,/,Wa=/(=.+)?(\s*)$/,Ha=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;function Ya(r){return r=r.toString().replace(Ha,""),r=r.match(Ga)[2].replace(" ",""),r=r?r.split(Ka):[],r=r.map(function(e){return Va(e.replace(Wa,""))}),r}function gt(r,e){var o={};_r(r,function(s,v){var p,_=Y(s),w=!_&&s.length===1||_&&s.length===0;if(X(s))p=s.slice(0,-1),s=s[s.length-1],o[v]=p.concat(p.length>0?S:s);else if(w)o[v]=s;else{if(p=Ya(s),s.length===0&&!_&&p.length===0)throw new Error("autoInject task functions require explicit parameters.");_||p.pop(),o[v]=p.concat(S)}function S(L,C){var R=vr(p,function(q){return L[q]});R.push(C),b(s).apply(null,R)}}),se(o,e)}function Q(){this.head=this.tail=null,this.length=0}function mt(r,e){r.length=1,r.head=r.tail=e}Q.prototype.removeLink=function(r){return r.prev?r.prev.next=r.next:this.head=r.next,r.next?r.next.prev=r.prev:this.tail=r.prev,r.prev=r.next=null,this.length-=1,r},Q.prototype.empty=function(){for(;this.head;)this.shift();return this},Q.prototype.insertAfter=function(r,e){e.prev=r,e.next=r.next,r.next?r.next.prev=e:this.tail=e,r.next=e,this.length+=1},Q.prototype.insertBefore=function(r,e){e.prev=r.prev,e.next=r,r.prev?r.prev.next=e:this.head=e,r.prev=e,this.length+=1},Q.prototype.unshift=function(r){this.head?this.insertBefore(this.head,r):mt(this,r)},Q.prototype.push=function(r){this.tail?this.insertAfter(this.tail,r):mt(this,r)},Q.prototype.shift=function(){return this.head&&this.removeLink(this.head)},Q.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},Q.prototype.toArray=function(){for(var r=Array(this.length),e=this.head,o=0;o<this.length;o++)r[o]=e.data,e=e.next;return r},Q.prototype.remove=function(r){for(var e=this.head;e;){var o=e.next;r(e)&&this.removeLink(e),e=o}return this};function _t(r,e,o){if(e==null)e=1;else if(e===0)throw new Error("Concurrency must not be zero");var s=b(r),v=0,p=[],_=!1;function w(R,q,H){if(H!=null&&typeof H!="function")throw new Error("task callback must be a function");if(C.started=!0,X(R)||(R=[R]),R.length===0&&C.idle())return y(function(){C.drain()});for(var $=0,J=R.length;$<J;$++){var rr={data:R[$],callback:H||P};q?C._tasks.unshift(rr):C._tasks.push(rr)}_||(_=!0,y(function(){_=!1,C.process()}))}function S(R){return function(q){v-=1;for(var H=0,$=R.length;H<$;H++){var J=R[H],rr=Or(p,J,0);rr===0?p.shift():rr>0&&p.splice(rr,1),J.callback.apply(J,arguments),q!=null&&C.error(q,J.data)}v<=C.concurrency-C.buffer&&C.unsaturated(),C.idle()&&C.drain(),C.process()}}var L=!1,C={_tasks:new Q,concurrency:e,payload:o,saturated:P,unsaturated:P,buffer:e/4,empty:P,drain:P,error:P,started:!1,paused:!1,push:function(R,q){w(R,!1,q)},kill:function(){C.drain=P,C._tasks.empty()},unshift:function(R,q){w(R,!0,q)},remove:function(R){C._tasks.remove(R)},process:function(){if(!L){for(L=!0;!C.paused&&v<C.concurrency&&C._tasks.length;){var R=[],q=[],H=C._tasks.length;C.payload&&(H=Math.min(H,C.payload));for(var $=0;$<H;$++){var J=C._tasks.shift();R.push(J),p.push(J),q.push(J.data)}v+=1,C._tasks.length===0&&C.empty(),v===C.concurrency&&C.saturated();var rr=Z(S(R));s(q,rr)}L=!1}},length:function(){return C._tasks.length},running:function(){return v},workersList:function(){return p},idle:function(){return C._tasks.length+v===0},pause:function(){C.paused=!0},resume:function(){C.paused!==!1&&(C.paused=!1,y(C.process))}};return C}function bt(r,e){return _t(r,1,e)}var pr=W(sr,1);function ur(r,e,o,s){s=ar(s||P);var v=b(o);pr(r,function(p,_,w){v(e,p,function(S,L){e=L,w(S)})},function(p){s(p,e)})}function he(){var r=vr(arguments,b);return function(){var e=i(arguments),o=this,s=e[e.length-1];typeof s=="function"?e.pop():s=P,ur(r,e,function(v,p,_){p.apply(o,v.concat(function(w){var S=i(arguments,1);_(w,S)}))},function(v,p){s.apply(o,[v].concat(p))})}}var wt=function(){return he.apply(null,i(arguments).reverse())},Ja=Array.prototype.concat,xr=function(r,e,o,s){s=s||P;var v=b(o);hr(r,e,function(p,_){v(p,function(w){return w?_(w):_(null,i(arguments,1))})},function(p,_){for(var w=[],S=0;S<_.length;S++)_[S]&&(w=Ja.apply(w,_[S]));return s(p,w)})},kt=W(xr,1/0),At=W(xr,1),St=function(){var r=i(arguments),e=[null].concat(r);return function(){var o=arguments[arguments.length-1];return o.apply(this,e)}};function br(r){return r}function yr(r,e){return function(o,s,v,p){p=p||P;var _=!1,w;o(s,function(S,L,C){v(S,function(R,q){R?C(R):r(q)&&!w?(_=!0,w=e(!0,S),C(null,ne)):C()})},function(S){S?p(S):p(null,_?w:e(!1))})}}function Ct(r,e){return e}var zr=cr(yr(br,Ct)),wr=lr(yr(br,Ct)),Rr=W(wr,1);function Tt(r){return function(e){var o=i(arguments,1);o.push(function(s){var v=i(arguments,1);typeof console=="object"&&(s?console.error&&console.error(s):console[r]&&Ir(v,function(p){console[r](p)}))}),b(e).apply(null,o)}}var Dt=Tt("dir");function jt(r,e,o){o=Z(o||P);var s=b(r),v=b(e);function p(w){if(w)return o(w);var S=i(arguments,1);S.push(_),v.apply(this,S)}function _(w,S){if(w)return o(w);if(!S)return o(null);s(p)}_(null,!0)}function ve(r,e,o){o=Z(o||P);var s=b(r),v=function(p){if(p)return o(p);var _=i(arguments,1);if(e.apply(this,_))return s(v);o.apply(null,[null].concat(_))};s(v)}function Bt(r,e,o){ve(r,function(){return!e.apply(this,arguments)},o)}function Et(r,e,o){o=Z(o||P);var s=b(e),v=b(r);function p(w){if(w)return o(w);v(_)}function _(w,S){if(w)return o(w);if(!S)return o(null);s(p)}v(_)}function Ft(r){return function(e,o,s){return r(e,s)}}function Pr(r,e,o){or(r,Ft(b(e)),o)}function kr(r,e,o,s){Fr(e)(r,Ft(b(o)),s)}var Ar=W(kr,1);function pe(r){return Y(r)?r:n(function(e,o){var s=!0;e.push(function(){var v=arguments;s?y(function(){o.apply(null,v)}):o.apply(null,v)}),r.apply(this,e),s=!1})}function Ur(r){return!r}var qr=cr(yr(Ur,Ur)),Sr=lr(yr(Ur,Ur)),Mr=W(Sr,1);function Lt(r){return function(e){return e?.[r]}}function Xa(r,e,o,s){var v=new Array(e.length);r(e,function(p,_,w){o(p,function(S,L){v[_]=!!L,w(S)})},function(p){if(p)return s(p);for(var _=[],w=0;w<e.length;w++)v[w]&&_.push(e[w]);s(null,_)})}function Qa(r,e,o,s){var v=[];r(e,function(p,_,w){o(p,function(S,L){S?w(S):(L&&v.push({index:_,value:p}),w())})},function(p){p?s(p):s(null,vr(v.sort(function(_,w){return _.index-w.index}),Lt("value")))})}function ye(r,e,o,s){var v=gr(e)?Xa:Qa;v(r,e,b(o),s||P)}var Nr=cr(ye),Cr=lr(ye),Vr=W(Cr,1);function It(r,e){var o=Z(e||P),s=b(pe(r));function v(p){if(p)return o(p);s(v)}v()}var Gr=function(r,e,o,s){s=s||P;var v=b(o);hr(r,e,function(p,_){v(p,function(w,S){return w?_(w):_(null,{key:S,val:p})})},function(p,_){for(var w={},S=Object.prototype.hasOwnProperty,L=0;L<_.length;L++)if(_[L]){var C=_[L].key,R=_[L].val;S.call(w,C)?w[C].push(R):w[C]=[R]}return s(p,w)})},Ot=W(Gr,1/0),xt=W(Gr,1),zt=Tt("log");function Kr(r,e,o,s){s=ar(s||P);var v={},p=b(o);sr(r,e,function(_,w,S){p(_,w,function(L,C){if(L)return S(L);v[w]=C,S()})},function(_){s(_,v)})}var Rt=W(Kr,1/0),Pt=W(Kr,1);function Ut(r,e){return e in r}function qt(r,e){var o=Object.create(null),s=Object.create(null);e=e||br;var v=b(r),p=n(function(w,S){var L=e.apply(null,w);Ut(o,L)?y(function(){S.apply(null,o[L])}):Ut(s,L)?s[L].push(S):(s[L]=[S],v.apply(null,w.concat(function(){var C=i(arguments);o[L]=C;var R=s[L];delete s[L];for(var q=0,H=R.length;q<H;q++)R[q].apply(null,C)})))});return p.memo=o,p.unmemoized=r,p}var Wr;l?Wr=process.nextTick:f?Wr=setImmediate:Wr=g;var Mt=h(Wr);function de(r,e,o){o=o||P;var s=gr(e)?[]:{};r(e,function(v,p,_){b(v)(function(w,S){arguments.length>2&&(S=i(arguments,1)),s[p]=S,_(w)})},function(v){o(v,s)})}function Nt(r,e){de(or,r,e)}function Vt(r,e,o){de(Fr(e),r,o)}var ge=function(r,e){var o=b(r);return _t(function(s,v){o(s[0],v)},e,1)},Gt=function(r,e){var o=ge(r,e);return o.push=function(s,v,p){if(p==null&&(p=P),typeof p!="function")throw new Error("task callback must be a function");if(o.started=!0,X(s)||(s=[s]),s.length===0)return y(function(){o.drain()});v=v||0;for(var _=o._tasks.head;_&&v>=_.priority;)_=_.next;for(var w=0,S=s.length;w<S;w++){var L={data:s[w],priority:v,callback:p};_?o._tasks.insertBefore(_,L):o._tasks.push(L)}y(o.process)},delete o.unshift,o};function Kt(r,e){if(e=ar(e||P),!X(r))return e(new TypeError("First argument to race must be an array of functions"));if(!r.length)return e();for(var o=0,s=r.length;o<s;o++)b(r[o])(e)}function Hr(r,e,o,s){var v=i(r).reverse();ur(v,e,o,s)}function Yr(r){var e=b(r);return n(function(s,v){return s.push(function(_,w){if(_)v(null,{error:_});else{var S;arguments.length<=2?S=w:S=i(arguments,1),v(null,{value:S})}}),e.apply(this,s)})}function Wt(r){var e;return X(r)?e=vr(r,Yr):(e={},_r(r,function(o,s){e[s]=Yr.call(this,o)})),e}function Ht(r,e,o,s){ye(r,e,function(v,p){o(v,function(_,w){p(_,!w)})},s)}var Yt=cr(Ht),me=lr(Ht),Jt=W(me,1);function Xt(r){return function(){return r}}function Jr(r,e,o){var s=5,v=0,p={times:s,intervalFunc:Xt(v)};function _(C,R){if(typeof R=="object")C.times=+R.times||s,C.intervalFunc=typeof R.interval=="function"?R.interval:Xt(+R.interval||v),C.errorFilter=R.errorFilter;else if(typeof R=="number"||typeof R=="string")C.times=+R||s;else throw new Error("Invalid arguments for async.retry")}if(arguments.length<3&&typeof r=="function"?(o=e||P,e=r):(_(p,r),o=o||P),typeof e!="function")throw new Error("Invalid arguments for async.retry");var w=b(e),S=1;function L(){w(function(C){C&&S++<p.times&&(typeof p.errorFilter!="function"||p.errorFilter(C))?setTimeout(L,p.intervalFunc(S)):o.apply(null,arguments)})}L()}var Qt=function(r,e){e||(e=r,r=null);var o=b(e);return n(function(s,v){function p(_){o.apply(null,s.concat(_))}r?Jr(r,p,v):Jr(p,v)})};function Zt(r,e){de(pr,r,e)}var Xr=cr(yr(Boolean,br)),Tr=lr(yr(Boolean,br)),Qr=W(Tr,1);function $t(r,e,o){var s=b(e);Lr(r,function(p,_){s(p,function(w,S){if(w)return _(w);_(null,{value:p,criteria:S})})},function(p,_){if(p)return o(p);o(null,vr(_.sort(v),Lt("value")))});function v(p,_){var w=p.criteria,S=_.criteria;return w<S?-1:w>S?1:0}}function rn(r,e,o){var s=b(r);return n(function(v,p){var _=!1,w;function S(){var L=r.name||"anonymous",C=new Error('Callback function "'+L+'" timed out.');C.code="ETIMEDOUT",o&&(C.info=o),_=!0,p(C)}v.push(function(){_||(p.apply(null,arguments),clearTimeout(w))}),w=setTimeout(S,e),s.apply(null,v)})}var Za=Math.ceil,$a=Math.max;function ro(r,e,o,s){for(var v=-1,p=$a(Za((e-r)/o),0),_=Array(p);p--;)_[++v]=r,r+=o;return _}function Zr(r,e,o,s){var v=b(o);hr(ro(0,r,1),e,v,s)}var en=W(Zr,1/0),tn=W(Zr,1);function nn(r,e,o,s){arguments.length<=3&&(s=o,o=e,e=X(r)?[]:{}),s=ar(s||P);var v=b(o);or(r,function(p,_,w){v(e,p,_,w)},function(p){s(p,e)})}function an(r,e){var o=null,s;e=e||P,Ar(r,function(v,p){b(v)(function(_,w){arguments.length>2?s=i(arguments,1):s=w,o=_,p(!_)})},function(){e(o,s)})}function on(r){return function(){return(r.unmemoized||r).apply(null,arguments)}}function _e(r,e,o){o=Z(o||P);var s=b(e);if(!r())return o(null);var v=function(p){if(p)return o(p);if(r())return s(v);var _=i(arguments,1);o.apply(null,[null].concat(_))};s(v)}function un(r,e,o){_e(function(){return!r.apply(this,arguments)},e,o)}var sn=function(r,e){if(e=ar(e||P),!X(r))return e(new Error("First argument to waterfall must be an array of functions"));if(!r.length)return e();var o=0;function s(p){var _=b(r[o++]);p.push(Z(v)),_.apply(null,p)}function v(p){if(p||o===r.length)return e.apply(null,arguments);s(i(arguments,1))}s([])},eo={apply:u,applyEach:ot,applyEachSeries:ut,asyncify:k,auto:se,autoInject:gt,cargo:bt,compose:wt,concat:kt,concatLimit:xr,concatSeries:At,constant:St,detect:zr,detectLimit:wr,detectSeries:Rr,dir:Dt,doDuring:jt,doUntil:Bt,doWhilst:ve,during:Et,each:Pr,eachLimit:kr,eachOf:or,eachOfLimit:sr,eachOfSeries:pr,eachSeries:Ar,ensureAsync:pe,every:qr,everyLimit:Sr,everySeries:Mr,filter:Nr,filterLimit:Cr,filterSeries:Vr,forever:It,groupBy:Ot,groupByLimit:Gr,groupBySeries:xt,log:zt,map:Lr,mapLimit:hr,mapSeries:ue,mapValues:Rt,mapValuesLimit:Kr,mapValuesSeries:Pt,memoize:qt,nextTick:Mt,parallel:Nt,parallelLimit:Vt,priorityQueue:Gt,queue:ge,race:Kt,reduce:ur,reduceRight:Hr,reflect:Yr,reflectAll:Wt,reject:Yt,rejectLimit:me,rejectSeries:Jt,retry:Jr,retryable:Qt,seq:he,series:Zt,setImmediate:y,some:Xr,someLimit:Tr,someSeries:Qr,sortBy:$t,timeout:rn,times:en,timesLimit:Zr,timesSeries:tn,transform:nn,tryEach:an,unmemoize:on,until:un,waterfall:sn,whilst:_e,all:qr,allLimit:Sr,allSeries:Mr,any:Xr,anyLimit:Tr,anySeries:Qr,find:zr,findLimit:wr,findSeries:Rr,forEach:Pr,forEachSeries:Ar,forEachLimit:kr,forEachOf:or,forEachOfSeries:pr,forEachOfLimit:sr,inject:ur,foldl:ur,foldr:Hr,select:Nr,selectLimit:Cr,selectSeries:Vr,wrapSync:k};a.default=eo,a.apply=u,a.applyEach=ot,a.applyEachSeries=ut,a.asyncify=k,a.auto=se,a.autoInject=gt,a.cargo=bt,a.compose=wt,a.concat=kt,a.concatLimit=xr,a.concatSeries=At,a.constant=St,a.detect=zr,a.detectLimit=wr,a.detectSeries=Rr,a.dir=Dt,a.doDuring=jt,a.doUntil=Bt,a.doWhilst=ve,a.during=Et,a.each=Pr,a.eachLimit=kr,a.eachOf=or,a.eachOfLimit=sr,a.eachOfSeries=pr,a.eachSeries=Ar,a.ensureAsync=pe,a.every=qr,a.everyLimit=Sr,a.everySeries=Mr,a.filter=Nr,a.filterLimit=Cr,a.filterSeries=Vr,a.forever=It,a.groupBy=Ot,a.groupByLimit=Gr,a.groupBySeries=xt,a.log=zt,a.map=Lr,a.mapLimit=hr,a.mapSeries=ue,a.mapValues=Rt,a.mapValuesLimit=Kr,a.mapValuesSeries=Pt,a.memoize=qt,a.nextTick=Mt,a.parallel=Nt,a.parallelLimit=Vt,a.priorityQueue=Gt,a.queue=ge,a.race=Kt,a.reduce=ur,a.reduceRight=Hr,a.reflect=Yr,a.reflectAll=Wt,a.reject=Yt,a.rejectLimit=me,a.rejectSeries=Jt,a.retry=Jr,a.retryable=Qt,a.seq=he,a.series=Zt,a.setImmediate=y,a.some=Xr,a.someLimit=Tr,a.someSeries=Qr,a.sortBy=$t,a.timeout=rn,a.times=en,a.timesLimit=Zr,a.timesSeries=tn,a.transform=nn,a.tryEach=an,a.unmemoize=on,a.until=un,a.waterfall=sn,a.whilst=_e,a.all=qr,a.allLimit=Sr,a.allSeries=Mr,a.any=Xr,a.anyLimit=Tr,a.anySeries=Qr,a.find=zr,a.findLimit=wr,a.findSeries=Rr,a.forEach=Pr,a.forEachSeries=Ar,a.forEachLimit=kr,a.forEachOf=or,a.forEachOfSeries=pr,a.forEachOfLimit=sr,a.inject=ur,a.foldl=ur,a.foldr=Hr,a.select=Nr,a.selectLimit=Cr,a.selectSeries=Vr,a.wrapSync=k,Object.defineProperty(a,"__esModule",{value:!0})}))})(jr,jr.exports)),jr.exports}var Fe={exports:{}},bn;function Nn(){return bn||(bn=1,(function(m){(function(){var d="\0",a=0,i=0,u=-1,n=!0,t=!0,f=4,l=4,g=2,h=function(b){b==null&&(b=1024);var E=function(B,O,z){for(var G=O;G<z;G++)B[G]=-G+1;if(0<j.array[j.array.length-1]){for(var tr=j.array.length-2;0<j.array[tr];)tr--;B[O]=-tr}},F=function(B,O,z){for(var G=O;G<z;G++)B[G]=-G-1},D=function(B){var O=B*g,z=k(A.signed,A.bytes,O);E(z,A.array.length,O),z.set(A.array),A.array=null,A.array=z;var G=k(j.signed,j.bytes,O);F(G,j.array.length,O),G.set(j.array),j.array=null,j.array=G},T=i+1,A={signed:n,bytes:f,array:k(n,f,b)},j={signed:t,bytes:l,array:k(t,l,b)};return A.array[i]=1,j.array[i]=i,E(A.array,i+1,A.array.length),F(j.array,i+1,j.array.length),{getBaseBuffer:function(){return A.array},getCheckBuffer:function(){return j.array},loadBaseBuffer:function(B){return A.array=B,this},loadCheckBuffer:function(B){return j.array=B,this},size:function(){return Math.max(A.array.length,j.array.length)},getBase:function(B){return A.array.length-1<B?-B+1:A.array[B]},getCheck:function(B){return j.array.length-1<B?-B-1:j.array[B]},setBase:function(B,O){A.array.length-1<B&&D(B),A.array[B]=O},setCheck:function(B,O){j.array.length-1<B&&D(B),j.array[B]=O},setFirstUnusedNode:function(B){T=B},getFirstUnusedNode:function(){return T},shrink:function(){for(var B=this.size()-1;!(0<=j.array[B]);)B--;A.array=A.array.subarray(0,B+2),j.array=j.array.subarray(0,B+2)},calc:function(){for(var B=0,O=j.array.length,z=0;z<O;z++)j.array[z]<0&&B++;return{all:O,unused:B,efficiency:(O-B)/O}},dump:function(){var B="",O="",z;for(z=0;z<A.array.length;z++)B=B+" "+this.getBase(z);for(z=0;z<j.array.length;z++)O=O+" "+this.getCheck(z);return console.log("base:"+B),console.log("chck:"+O),"base:"+B+" chck:"+O}}};function c(b){this.bc=h(b),this.keys=[]}c.prototype.append=function(b,E){return this.keys.push({k:b,v:E}),this},c.prototype.build=function(b,E){if(b==null&&(b=this.keys),b==null)return new y(this.bc);E==null&&(E=!1);var F=b.map(function(D){return{k:I(D.k+d),v:D.v}});return E?this.keys=F:this.keys=F.sort(function(D,T){for(var A=D.k,j=T.k,B=Math.min(A.length,j.length),O=0;O<B;O++)if(A[O]!==j[O])return A[O]-j[O];return A.length-j.length}),F=null,this._build(i,0,0,this.keys.length),new y(this.bc)},c.prototype._build=function(b,E,F,D){var T=this.getChildrenInfo(E,F,D),A=this.findAllocatableBase(T);this.setBC(b,T,A);for(var j=0;j<T.length;j=j+3){var B=T[j];if(B!==a){var O=T[j+1],z=T[j+2],G=A+B;this._build(G,E+1,O,z)}}},c.prototype.getChildrenInfo=function(b,E,F){var D=this.keys[E].k[b],T=0,A=new Int32Array(F*3);A[T++]=D,A[T++]=E;for(var j=E,B=E;j<E+F;j++){var O=this.keys[j].k[b];D!==O&&(A[T++]=j-B,A[T++]=O,A[T++]=j,D=O,B=j)}return A[T++]=j-B,A=A.subarray(0,T),A},c.prototype.setBC=function(b,E,F){var D=this.bc;D.setBase(b,F);var T;for(T=0;T<E.length;T=T+3){var A=E[T],j=F+A,B=-D.getBase(j),O=-D.getCheck(j);j!==D.getFirstUnusedNode()?D.setCheck(B,-O):D.setFirstUnusedNode(O),D.setBase(O,-B);var z=b;if(D.setCheck(j,z),A===a){var G=E[T+1],tr=this.keys[G].v;tr==null&&(tr=0);var te=-tr-1;D.setBase(j,te)}}},c.prototype.findAllocatableBase=function(b){for(var E=this.bc,F,D=E.getFirstUnusedNode();;){if(F=D-b[0],F<0){D=-E.getCheck(D);continue}for(var T=!0,A=0;A<b.length;A=A+3){var j=b[A],B=F+j;if(!this.isUnusedNode(B)){D=-E.getCheck(D),T=!1;break}}if(T)return F}},c.prototype.isUnusedNode=function(b){var E=this.bc,F=E.getCheck(b);return b===i?!1:F<0};function y(b){this.bc=b,this.bc.shrink()}y.prototype.contain=function(b){var E=this.bc;b+=d;for(var F=I(b),D=i,T=u,A=0;A<F.length;A++){var j=F[A];if(T=this.traverse(D,j),T===u)return!1;if(E.getBase(T)<=0)return!0;D=T}return!1},y.prototype.lookup=function(b){b+=d;for(var E=I(b),F=i,D=u,T=0;T<E.length;T++){var A=E[T];if(D=this.traverse(F,A),D===u)return u;F=D}var j=this.bc.getBase(D);return j<=0?-j-1:u},y.prototype.commonPrefixSearch=function(b){for(var E=I(b),F=i,D=u,T=[],A=0;A<E.length;A++){var j=E[A];if(D=this.traverse(F,j),D!==u){F=D;var B=this.traverse(D,a);if(B!==u){var O=this.bc.getBase(B),z={};O<=0&&(z.v=-O-1),z.k=V(x(E,0,A+1)),T.push(z)}continue}else break}return T},y.prototype.traverse=function(b,E){var F=this.bc.getBase(b)+E;return this.bc.getCheck(F)===b?F:u},y.prototype.size=function(){return this.bc.size()},y.prototype.calc=function(){return this.bc.calc()},y.prototype.dump=function(){return this.bc.dump()};var k=function(b,E,F){switch(E){case 1:return new Int8Array(F);case 2:return new Int16Array(F);case 4:return new Int32Array(F);default:throw new RangeError("Invalid newArray parameter element_bytes:"+E)}},x=function(b,E,F){var D=new ArrayBuffer(F),T=new Uint8Array(D,0,F),A=b.subarray(E,F);return T.set(A),T},I=function(b){for(var E=new Uint8Array(new ArrayBuffer(b.length*4)),F=0,D=0;F<b.length;){var T,A=b.charCodeAt(F++);if(A>=55296&&A<=56319){var j=A,B=b.charCodeAt(F++);if(B>=56320&&B<=57343)T=(j-55296)*1024+65536+(B-56320);else return null}else T=A;T<128?E[D++]=T:T<2048?(E[D++]=T>>>6|192,E[D++]=T&63|128):T<65536?(E[D++]=T>>>12|224,E[D++]=T>>6&63|128,E[D++]=T&63|128):T<1<<21&&(E[D++]=T>>>18|240,E[D++]=T>>12&63|128,E[D++]=T>>6&63|128,E[D++]=T&63|128)}return E.subarray(0,D)},V=function(b){for(var E="",F,D,T,A,j,B,O,z=0;z<b.length;)D=b[z++],D<128?F=D:D>>5===6?(T=b[z++],F=(D&31)<<6|T&63):D>>4===14?(T=b[z++],A=b[z++],F=(D&15)<<12|(T&63)<<6|A&63):(T=b[z++],A=b[z++],j=b[z++],F=(D&7)<<18|(T&63)<<12|(A&63)<<6|j&63),F<65536?E+=String.fromCharCode(F):(F-=65536,B=55296|F>>10,O=56320|F&1023,E+=String.fromCharCode(B,O));return E},Y={builder:function(b){return new c(b)},load:function(b,E){var F=h(0);return F.loadBaseBuffer(b),F.loadCheckBuffer(E),new y(F)}};m.exports=Y})()})(Fe)),Fe.exports}var Le,wn;function He(){if(wn)return Le;wn=1;var m=function(i){for(var u=new Uint8Array(i.length*4),n=0,t=0;n<i.length;){var f,l=i.charCodeAt(n++);if(l>=55296&&l<=56319){var g=l,h=i.charCodeAt(n++);if(h>=56320&&h<=57343)f=(g-55296)*1024+65536+(h-56320);else return null}else f=l;f<128?u[t++]=f:f<2048?(u[t++]=f>>>6|192,u[t++]=f&63|128):f<65536?(u[t++]=f>>>12|224,u[t++]=f>>6&63|128,u[t++]=f&63|128):f<1<<21&&(u[t++]=f>>>18|240,u[t++]=f>>12&63|128,u[t++]=f>>6&63|128,u[t++]=f&63|128)}return u.subarray(0,t)},d=function(i){for(var u="",n,t,f,l,g,h,c,y=0;y<i.length;)t=i[y++],t<128?n=t:t>>5===6?(f=i[y++],n=(t&31)<<6|f&63):t>>4===14?(f=i[y++],l=i[y++],n=(t&15)<<12|(f&63)<<6|l&63):(f=i[y++],l=i[y++],g=i[y++],n=(t&7)<<18|(f&63)<<12|(l&63)<<6|g&63),n<65536?u+=String.fromCharCode(n):(n-=65536,h=55296|n>>10,c=56320|n&1023,u+=String.fromCharCode(h,c));return u};function a(i){var u;if(i==null)u=1024*1024;else if(typeof i=="number")u=i;else if(i instanceof Uint8Array){this.buffer=i,this.position=0;return}else throw typeof i+" is invalid parameter type for ByteBuffer constructor";this.buffer=new Uint8Array(u),this.position=0}return a.prototype.size=function(){return this.buffer.length},a.prototype.reallocate=function(){var i=new Uint8Array(this.buffer.length*2);i.set(this.buffer),this.buffer=i},a.prototype.shrink=function(){return this.buffer=this.buffer.subarray(0,this.position),this.buffer},a.prototype.put=function(i){this.buffer.length<this.position+1&&this.reallocate(),this.buffer[this.position++]=i},a.prototype.get=function(i){return i==null&&(i=this.position,this.position+=1),this.buffer.length<i+1?0:this.buffer[i]},a.prototype.putShort=function(i){if(65535<i)throw i+" is over short value";var u=255&i,n=(65280&i)>>8;this.put(u),this.put(n)},a.prototype.getShort=function(i){if(i==null&&(i=this.position,this.position+=2),this.buffer.length<i+2)return 0;var u=this.buffer[i],n=this.buffer[i+1],t=(n<<8)+u;return t&32768&&(t=-(t-1^65535)),t},a.prototype.putInt=function(i){if(4294967295<i)throw i+" is over integer value";var u=255&i,n=(65280&i)>>8,t=(16711680&i)>>16,f=(4278190080&i)>>24;this.put(u),this.put(n),this.put(t),this.put(f)},a.prototype.getInt=function(i){if(i==null&&(i=this.position,this.position+=4),this.buffer.length<i+4)return 0;var u=this.buffer[i],n=this.buffer[i+1],t=this.buffer[i+2],f=this.buffer[i+3];return(f<<24)+(t<<16)+(n<<8)+u},a.prototype.readInt=function(){var i=this.position;return this.position+=4,this.getInt(i)},a.prototype.putString=function(i){for(var u=m(i),n=0;n<u.length;n++)this.put(u[n]);this.put(0)},a.prototype.getString=function(i){var u=[],n;for(i==null&&(i=this.position);!(this.buffer.length<i+1||(n=this.get(i++),n===0));)u.push(n);return this.position=i,d(u)},Le=a,Le}var Ie,kn;function Ye(){if(kn)return Ie;kn=1;var m=He();function d(){this.dictionary=new m(10*1024*1024),this.target_map={},this.pos_buffer=new m(10*1024*1024)}return d.prototype.buildDictionary=function(a){for(var i={},u=0;u<a.length;u++){var n=a[u];if(!(n.length<4)){var t=n[0],f=n[1],l=n[2],g=n[3],h=n.slice(4).join(",");(!isFinite(f)||!isFinite(l)||!isFinite(g))&&console.log(n);var c=this.put(f,l,g,t,h);i[c]=t}}return this.dictionary.shrink(),this.pos_buffer.shrink(),i},d.prototype.put=function(a,i,u,n,t){var f=this.dictionary.position,l=this.pos_buffer.position;return this.dictionary.putShort(a),this.dictionary.putShort(i),this.dictionary.putShort(u),this.dictionary.putInt(l),this.pos_buffer.putString(n+","+t),f},d.prototype.addMapping=function(a,i){var u=this.target_map[a];u==null&&(u=[]),u.push(i),this.target_map[a]=u},d.prototype.targetMapToBuffer=function(){var a=new m,i=Object.keys(this.target_map).length;a.putInt(i);for(var u in this.target_map){var n=this.target_map[u],t=n.length;a.putInt(parseInt(u)),a.putInt(t);for(var f=0;f<n.length;f++)a.putInt(n[f])}return a.shrink()},d.prototype.loadDictionary=function(a){return this.dictionary=new m(a),this},d.prototype.loadPosVector=function(a){return this.pos_buffer=new m(a),this},d.prototype.loadTargetMap=function(a){var i=new m(a);for(i.position=0,this.target_map={},i.readInt();!(i.buffer.length<i.position+1);)for(var u=i.readInt(),n=i.readInt(),t=0;t<n;t++){var f=i.readInt();this.addMapping(u,f)}return this},d.prototype.getFeatures=function(a){var i=parseInt(a);if(isNaN(i))return"";var u=this.dictionary.getInt(i+6);return this.pos_buffer.getString(u)},Ie=d,Ie}var Oe,An;function Vn(){if(An)return Oe;An=1;function m(d,a){this.forward_dimension=d,this.backward_dimension=a,this.buffer=new Int16Array(d*a+2),this.buffer[0]=d,this.buffer[1]=a}return m.prototype.put=function(d,a,i){var u=d*this.backward_dimension+a+2;if(this.buffer.length<u+1)throw"ConnectionCosts buffer overflow";this.buffer[u]=i},m.prototype.get=function(d,a){var i=d*this.backward_dimension+a+2;if(this.buffer.length<i+1)throw"ConnectionCosts buffer overflow";return this.buffer[i]},m.prototype.loadConnectionCosts=function(d){this.forward_dimension=d[0],this.backward_dimension=d[1],this.buffer=d},Oe=m,Oe}var xe,Sn;function Gn(){if(Sn)return xe;Sn=1;function m(d,a,i,u,n){this.class_id=d,this.class_name=a,this.is_always_invoke=i,this.is_grouping=u,this.max_length=n}return xe=m,xe}var ze,Cn;function Kn(){if(Cn)return ze;Cn=1;var m=He(),d=Gn();function a(){this.map=[],this.lookup_table={}}return a.load=function(i){for(var u=new a,n=[],t=new m(i);t.position+1<t.size();){var f=n.length,l=t.get(),g=t.get(),h=t.getInt(),c=t.getString();n.push(new d(f,c,l,g,h))}return u.init(n),u},a.prototype.init=function(i){if(i!=null)for(var u=0;u<i.length;u++){var n=i[u];this.map[u]=n,this.lookup_table[n.class_name]=u}},a.prototype.getCharacterClass=function(i){return this.map[i]},a.prototype.lookup=function(i){var u=this.lookup_table[i];return u??null},a.prototype.toBuffer=function(){for(var i=new m,u=0;u<this.map.length;u++){var n=this.map[u];i.put(n.is_always_invoke),i.put(n.is_grouping),i.putInt(n.max_length),i.putString(n.class_name)}return i.shrink(),i.buffer},ze=a,ze}var Re,Tn;function Wn(){if(Tn)return Re;Tn=1;var m=Kn(),d=Gn(),a=Mn(),i="DEFAULT";function u(){this.character_category_map=new Uint8Array(65536),this.compatible_category_map=new Uint32Array(65536),this.invoke_definition_map=null}return u.load=function(n,t,f){var l=new u;return l.character_category_map=n,l.compatible_category_map=t,l.invoke_definition_map=m.load(f),l},u.parseCharCategory=function(n,t){var f=t[1],l=parseInt(t[2]),g=parseInt(t[3]),h=parseInt(t[4]);if(!isFinite(l)||l!==0&&l!==1)return console.log("char.def parse error. INVOKE is 0 or 1 in:"+l),null;if(!isFinite(g)||g!==0&&g!==1)return console.log("char.def parse error. GROUP is 0 or 1 in:"+g),null;if(!isFinite(h)||h<0)return console.log("char.def parse error. LENGTH is 1 to n:"+h),null;var c=l===1,y=g===1;return new d(n,f,c,y,h)},u.parseCategoryMapping=function(n){var t=parseInt(n[1]),f=n[2],l=3<n.length?n.slice(3):[];return(!isFinite(t)||t<0||t>65535)&&console.log("char.def parse error. CODE is invalid:"+t),{start:t,default:f,compatible:l}},u.parseRangeCategoryMapping=function(n){var t=parseInt(n[1]),f=parseInt(n[2]),l=n[3],g=4<n.length?n.slice(4):[];return(!isFinite(t)||t<0||t>65535)&&console.log("char.def parse error. CODE is invalid:"+t),(!isFinite(f)||f<0||f>65535)&&console.log("char.def parse error. CODE is invalid:"+f),{start:t,end:f,default:l,compatible:g}},u.prototype.initCategoryMappings=function(n){var t;if(n!=null)for(var f=0;f<n.length;f++){var l=n[f],g=l.end||l.start;for(t=l.start;t<=g;t++){this.character_category_map[t]=this.invoke_definition_map.lookup(l.default);for(var h=0;h<l.compatible.length;h++){var c=this.compatible_category_map[t],y=l.compatible[h];if(y!=null){var k=this.invoke_definition_map.lookup(y);if(k!=null){var x=1<<k;c=c|x,this.compatible_category_map[t]=c}}}}}var I=this.invoke_definition_map.lookup(i);if(I!=null)for(t=0;t<this.character_category_map.length;t++)this.character_category_map[t]===0&&(this.character_category_map[t]=1<<I)},u.prototype.lookupCompatibleCategory=function(n){var t=[],f=n.charCodeAt(0),l;if(f<this.compatible_category_map.length&&(l=this.compatible_category_map[f]),l==null||l===0)return t;for(var g=0;g<32;g++)if(l<<31-g>>>31===1){var h=this.invoke_definition_map.getCharacterClass(g);if(h==null)continue;t.push(h)}return t},u.prototype.lookup=function(n){var t,f=n.charCodeAt(0);return a.isSurrogatePair(n)?t=this.invoke_definition_map.lookup(i):f<this.character_category_map.length&&(t=this.character_category_map[f]),t==null&&(t=this.invoke_definition_map.lookup(i)),this.invoke_definition_map.getCharacterClass(t)},Re=u,Re}var Pe,Dn;function Hn(){if(Dn)return Pe;Dn=1;var m=Ye(),d=Wn(),a=He();function i(){this.dictionary=new a(10*1024*1024),this.target_map={},this.pos_buffer=new a(10*1024*1024),this.character_definition=null}return i.prototype=Object.create(m.prototype),i.prototype.characterDefinition=function(u){return this.character_definition=u,this},i.prototype.lookup=function(u){return this.character_definition.lookup(u)},i.prototype.lookupCompatibleCategory=function(u){return this.character_definition.lookupCompatibleCategory(u)},i.prototype.loadUnknownDictionaries=function(u,n,t,f,l,g){this.loadDictionary(u),this.loadPosVector(n),this.loadTargetMap(t),this.character_definition=d.load(f,l,g)},Pe=i,Pe}var Ue,jn;function Yn(){if(jn)return Ue;jn=1;var m=Nn(),d=Ye(),a=Vn(),i=Hn();function u(n,t,f,l){n!=null?this.trie=n:this.trie=m.builder(0).build([{k:"",v:1}]),t!=null?this.token_info_dictionary=t:this.token_info_dictionary=new d,f!=null?this.connection_costs=f:this.connection_costs=new a(0,0),l!=null?this.unknown_dictionary=l:this.unknown_dictionary=new i}return u.prototype.loadTrie=function(n,t){return this.trie=m.load(n,t),this},u.prototype.loadTokenInfoDictionaries=function(n,t,f){return this.token_info_dictionary.loadDictionary(n),this.token_info_dictionary.loadPosVector(t),this.token_info_dictionary.loadTargetMap(f),this},u.prototype.loadConnectionCosts=function(n){return this.connection_costs.loadConnectionCosts(n),this},u.prototype.loadUnknownDictionaries=function(n,t,f,l,g,h){return this.unknown_dictionary.loadUnknownDictionaries(n,t,f,l,g,h),this},Ue=u,Ue}var qe,Bn;function _o(){if(Bn)return qe;Bn=1;var m=Un(),d=mo(),a=Yn();function i(u){this.dic=new a,this.dic_path=u}return i.prototype.loadArrayBuffer=function(u,n){throw new Error("DictionaryLoader#loadArrayBuffer should be overwrite")},i.prototype.load=function(u){var n=this.dic,t=this.dic_path,f=this.loadArrayBuffer;d.parallel([function(l){d.map(["base.dat.gz","check.dat.gz"],function(g,h){f(m.join(t,g),function(c,y){if(c)return h(c);h(null,y)})},function(g,h){if(g)return l(g);var c=new Int32Array(h[0]),y=new Int32Array(h[1]);n.loadTrie(c,y),l(null)})},function(l){d.map(["tid.dat.gz","tid_pos.dat.gz","tid_map.dat.gz"],function(g,h){f(m.join(t,g),function(c,y){if(c)return h(c);h(null,y)})},function(g,h){if(g)return l(g);var c=new Uint8Array(h[0]),y=new Uint8Array(h[1]),k=new Uint8Array(h[2]);n.loadTokenInfoDictionaries(c,y,k),l(null)})},function(l){f(m.join(t,"cc.dat.gz"),function(g,h){if(g)return l(g);var c=new Int16Array(h);n.loadConnectionCosts(c),l(null)})},function(l){d.map(["unk.dat.gz","unk_pos.dat.gz","unk_map.dat.gz","unk_char.dat.gz","unk_compat.dat.gz","unk_invoke.dat.gz"],function(g,h){f(m.join(t,g),function(c,y){if(c)return h(c);h(null,y)})},function(g,h){if(g)return l(g);var c=new Uint8Array(h[0]),y=new Uint8Array(h[1]),k=new Uint8Array(h[2]),x=new Uint8Array(h[3]),I=new Uint32Array(h[4]),V=new Uint8Array(h[5]);n.loadUnknownDictionaries(c,y,k,x,I,V),l(null)})}],function(l){u(l,n)})},qe=i,qe}var Me,En;function bo(){if(En)return Me;En=1;var m=_o();function d(a){m.apply(this,[a])}return d.prototype=Object.create(m.prototype),d.prototype.loadArrayBuffer=function(a,i){var u=new XMLHttpRequest;u.open("GET",a,!0),u.responseType="arraybuffer",u.onload=function(){if(this.status>0&&this.status!==200){i(u.statusText,null);return}var n=this.response;const t=new DecompressionStream("gzip"),l=new Blob([n]).stream().pipeThrough(t);new Response(l).arrayBuffer().then(g=>{i(null,g)})},u.onerror=function(n){i(n,null)},u.send()},Me=d,Me}var Ne,Fn;function wo(){if(Fn)return Ne;Fn=1;var m=yo(),d=bo();function a(i){i.dicPath==null?this.dic_path="dict/":this.dic_path=i.dicPath}return a.prototype.build=function(i){var u=new d(this.dic_path);u.load(function(n,t){i(n,new m(t))})},Ne=a,Ne}var Ve,Ln;function ko(){if(Ln)return Ve;Ln=1;var m=Vn();function d(){this.lines=0,this.connection_cost=null}return d.prototype.putLine=function(a){if(this.lines===0){var i=a.split(" "),u=i[0],n=i[1];if(u<0||n<0)throw"Parse error of matrix.def";return this.connection_cost=new m(u,n),this.lines++,this}var t=a.split(" ");if(t.length!==3)return this;var f=parseInt(t[0]),l=parseInt(t[1]),g=parseInt(t[2]);if(f<0||l<0||!isFinite(f)||!isFinite(l)||this.connection_cost.forward_dimension<=f||this.connection_cost.backward_dimension<=l)throw"Parse error of matrix.def";return this.connection_cost.put(f,l,g),this.lines++,this},d.prototype.build=function(){return this.connection_cost},Ve=d,Ve}var Ge,In;function Ao(){if(In)return Ge;In=1;var m=Wn(),d=Kn(),a=/^(\w+)\s+(\d)\s+(\d)\s+(\d)/,i=/^(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/,u=/^(0x[0-9A-F]{4})\.\.(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/;function n(){this.char_def=new m,this.char_def.invoke_definition_map=new d,this.character_category_definition=[],this.category_mapping=[]}return n.prototype.putLine=function(t){var f=a.exec(t);if(f!=null){var l=this.character_category_definition.length,g=m.parseCharCategory(l,f);if(g==null)return;this.character_category_definition.push(g);return}var h=i.exec(t);if(h!=null){var c=m.parseCategoryMapping(h);this.category_mapping.push(c)}var y=u.exec(t);if(y!=null){var k=m.parseRangeCategoryMapping(y);this.category_mapping.push(k)}},n.prototype.build=function(){return this.char_def.invoke_definition_map.init(this.character_category_definition),this.char_def.initCategoryMappings(this.category_mapping),this.char_def},Ge=n,Ge}var Ke,On;function So(){if(On)return Ke;On=1;var m=Nn(),d=Yn(),a=Ye(),i=ko(),u=Ao(),n=Hn();function t(){this.tid_entries=[],this.unk_entries=[],this.cc_builder=new i,this.cd_builder=new u}return t.prototype.addTokenInfoDictionary=function(f){var l=f.split(",");return this.tid_entries.push(l),this},t.prototype.putCostMatrixLine=function(f){return this.cc_builder.putLine(f),this},t.prototype.putCharDefLine=function(f){return this.cd_builder.putLine(f),this},t.prototype.putUnkDefLine=function(f){return this.unk_entries.push(f.split(",")),this},t.prototype.build=function(){var f=this.buildTokenInfoDictionary(),l=this.buildUnknownDictionary();return new d(f.trie,f.token_info_dictionary,this.cc_builder.build(),l)},t.prototype.buildTokenInfoDictionary=function(){var f=new a,l=f.buildDictionary(this.tid_entries),g=this.buildDoubleArray();for(var h in l){var c=l[h],y=g.lookup(c);f.addMapping(y,h)}return{trie:g,token_info_dictionary:f}},t.prototype.buildUnknownDictionary=function(){var f=new n,l=f.buildDictionary(this.unk_entries),g=this.cd_builder.build();f.characterDefinition(g);for(var h in l){var c=l[h],y=g.invoke_definition_map.lookup(c);f.addMapping(y,h)}return f},t.prototype.buildDoubleArray=function(){var f=0,l=this.tid_entries.map(function(h){var c=h[0];return{k:c,v:f++}}),g=m.builder(1024*1024);return g.build(l)},Ke=t,Ke}var We,xn;function Co(){if(xn)return We;xn=1;var m=wo(),d=So(),a={builder:function(i){return new m(i)},dictionaryBuilder:function(){return new d}};return We=a,We}var zn;function To(){if(zn)return ir;zn=1;var m={},d=ir&&ir.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(ir,"__esModule",{value:!0}),ir.tokenize=ir.getTokenizer=void 0;var a=d(Un()),i=fo(),u=d(co()),n=d(Co()),t=new u.default,f=function(){if(typeof process<"u"&&typeof m=="object"&&m.KUROMOJIN_DIC_PATH)return m.KUROMOJIN_DIC_PATH;var k=typeof window<"u"?window:void 0;if(typeof k<"u"&&typeof k.kuromojin=="object"&&typeof k.kuromojin.dicPath=="string")return k.kuromojin.dicPath;var x=a.default.dirname(require.resolve("kuromoji"));return a.default.join(x,"..","dict")},l=null,g=!1,h=new i.LRUMap(1e4);function c(k){return k===void 0&&(k={dicPath:f()}),l?Promise.resolve(l):(g||(g=!0,n.default.builder(k).build(function(x,I){if(x)return t.reject(x);l=I,t.resolve(I)})),t.promise)}ir.getTokenizer=c;function y(k,x){return c(x).then(function(I){if(x?.noCacheTokenize)return I.tokenizeForSentence(k);var V=h.get(k);if(V)return V;var Y=I.tokenizeForSentence(k);return h.set(k,Y),Y})}return ir.tokenize=y,ir}var Rn;function Do(){return Rn||(Rn=1,(function(m){Object.defineProperty(m,"__esModule",{value:!0}),m.tokenize=m.getTokenizer=void 0;var d=To();Object.defineProperty(m,"getTokenizer",{enumerable:!0,get:function(){return d.getTokenizer}}),Object.defineProperty(m,"tokenize",{enumerable:!0,get:function(){return d.tokenize}})})(ke)),ke}var jo=Do();const Uo={component:Pn},Bo={width:"400px",height:"400px",background:"white"},Eo=({token:{pos:m,pos_detail_1:d,pos_detail_2:a,pos_detail_3:i,surface_form:u},children:n})=>{const t=fr.useRef(null),[f,l]=fr.useState(null),g=m==="名詞"?"rgba(255, 0, 0, 0.2)":m==="動詞"?"rgba(0, 255, 0, 0.2)":m==="形容詞"?"rgba(0, 0, 255, 0.2)":m==="副詞"?"rgba(255, 0, 255, 0.2)":m==="助詞"?"rgba(0, 255, 255, 0.2)":m==="助動詞"?"rgba(255, 255, 0, 0.2)":void 0;return er.jsxs("span",{ref:t,style:{position:"relative",background:g,outline:"solid 1px lightgray"},onMouseEnter:h=>{if(!t.current)return;const c=t.current.getBoundingClientRect();l({top:c.top-c.height*2,left:c.left,description:`${u}: ${m} | ${d} | ${a} | ${i}`})},onMouseLeave:()=>l(null),children:[n,f&&oo.createPortal(er.jsx("div",{style:{position:"fixed",top:f.top,left:f.left,background:"white",fontSize:16,padding:2,border:"solid 1px gray"},children:f.description}),document.body)]})},Fo=({tokenizer:m})=>{const[d,a]=fr.useState(`すもももももももものうち。

吾輩 （ わがはい ） は猫である。名前はまだ無い。

あのイーハトーヴォのすきとおった風、夏でも底に冷たさをもつ青いそら、うつくしい森で飾られたモリーオ市、郊外のぎらぎらひかる草の波。

山路を登りながら、こう考えた。智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい。住みにくさが高じると、安い所へ引き越したくなる。どこへ越しても住みにくいと悟った時、詩が生れて、画が出来る。`),i=fr.useRef(null);return fr.useEffect(()=>{if(i.current)return Pn({doc:d,schema:uo({multiline:!0}),onChange:a}).input(i.current)},[]),er.jsx("div",{ref:i,style:Bo,children:d.split(`
`).map((u,n)=>er.jsx("div",{children:u?m.tokenize(u).map(t=>er.jsx(Eo,{token:t,children:t.surface_form},t.word_position)):er.jsx("br",{})},n))})},ee={render:()=>{const[m,d]=fr.useState(null);return fr.useEffect(()=>{(async()=>{const a=await jo.getTokenizer({dicPath:"/edix/dict"});d(a)})().catch(a=>{d(a.toString())})},[]),m?typeof m=="string"?er.jsxs("div",{children:["Error: ",m.toString()]}):er.jsx("div",{style:{marginTop:32},children:er.jsx(Fo,{tokenizer:m})}):er.jsx("div",{children:"Loading dictionaries"})}};ee.parameters={...ee.parameters,docs:{...ee.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [tokenizer, setTokenizer] = useState<Tokenizer | string | null>(null);
    useEffect(() => {
      (async () => {
        const tokenizer = await getTokenizer({
          dicPath: (import.meta as any).env.STORYBOOK_DEPLOY ? "/edix/dict" : "/dict"
        });
        setTokenizer(tokenizer);
      })().catch(e => {
        setTokenizer(e.toString());
      });
    }, []);
    if (!tokenizer) {
      return <div>{"Loading dictionaries"}</div>;
    }
    if (typeof tokenizer === "string") {
      return <div>Error: {tokenizer.toString()}</div>;
    }
    return <div style={{
      marginTop: 32
    }}>
        <Editor tokenizer={tokenizer} />
      </div>;
  }
}`,...ee.parameters?.docs?.source}}};const qo=["WithKuromojin"];export{ee as WithKuromojin,qo as __namedExportsOrder,Uo as default};
