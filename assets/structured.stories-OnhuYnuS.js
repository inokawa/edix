import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{r as c}from"./iframe--__0NnYW.js";import{i as b,a as v,s as j,d as w,b as C,e as S,f as E,c as h}from"./editor-Dw_XHXbx.js";const k=()=>"",f=({is:e,data:r,plain:l=k})=>({is:e,data:r,plain:l}),g=({multiline:e,void:r={}})=>{const l=Object.entries(r),n=new WeakMap,d=new WeakMap,o=a=>a.reduce((u,s)=>{if(E(s)){let i=n.get(s);i||n.set(s,i={type:"text",text:s.text}),u.push(i)}else u.push(d.get(s.data));return u},[]),p=a=>{for(const[u,s]of l)if(s.is(a)){const i=s.data(a);return d.set(i,{type:u,data:{...i}}),i}},y=a=>{if(a.type==="text")return{text:a.text};const{type:u,data:s}=a;return d.set(s,{type:u,data:s}),{data:s}};return{single:!e,js:e?a=>a.map(o):a=>o(a[0]),doc:a=>e?a.map(u=>u.map(y)):[a.map(y)],copy:(a,u,s)=>{a.setData("text/plain",w(u,m=>{const x=d.get(m.data);return r[x.type].plain(m.data)}));const i=document.createElement("div");i.appendChild(C(S(s),s).cloneContents()),a.setData("text/html",i.innerHTML)},paste:(a,u)=>{const s=a.getData("text/html");if(s){let i=new DOMParser().parseFromString(s,"text/html").body,m=!1;for(const x of[...i.childNodes])b(x)?x.data==="StartFragment"?(m=!0,i=new DocumentFragment):x.data==="EndFragment"&&(m=!1):m&&i.appendChild(x);return v(i,u,p)}return j(a.getData("text/plain"))}}},T={component:h},D=g({multiline:!0}),F={render:()=>{const e=c.useRef(null),[r,l]=c.useState([[{type:"text",text:"Hello world."}],[{type:"text",text:"ã“ã‚“ã«ã¡ã¯ã€‚"}],[{type:"text",text:"ðŸ‘â¤ï¸ðŸ§‘â€ðŸ§‘â€ðŸ§’"}]]);return c.useEffect(()=>{if(e.current)return h({doc:r,schema:D,onChange:l}).input(e.current)},[]),t.jsx("div",{ref:e,style:{backgroundColor:"white",border:"solid 1px darkgray",padding:8},children:r.map((n,d)=>t.jsx("div",{children:n.length?n.map((o,p)=>t.jsx("span",{children:o.text},p)):t.jsx("br",{})},d))})}},I=g({void:{tag:f({is:e=>e.contentEditable==="false",data:e=>({label:e.textContent,value:e.dataset.tagValue}),plain:e=>e.label})}}),W={render:()=>{const e=c.useRef(null),[r,l]=c.useState([{type:"text",text:"Hello "},{type:"tag",data:{label:"Apple",value:"1"}},{type:"text",text:" world "},{type:"tag",data:{label:"Orange",value:"2"}}]);return c.useEffect(()=>{if(e.current)return h({doc:r,schema:I,onChange:l}).input(e.current)},[]),t.jsx("div",{ref:e,style:{backgroundColor:"white",padding:8},children:r.length?r.map((n,d)=>n.type==="tag"?t.jsx("span",{contentEditable:!1,"data-tag-value":n.data.value,style:{background:"slategray",color:"white",fontSize:12,padding:4,borderRadius:8},children:n.data.label},d):t.jsx("span",{children:n.text},d)):t.jsx("br",{})})}},N=g({multiline:!0,void:{image:f({is:e=>e.tagName==="IMG",data:e=>({src:e.src})})}}),_={render:()=>{const e=c.useRef(null),[r,l]=c.useState([[{type:"text",text:"Hello "},{type:"image",data:{src:"https://loremflickr.com/320/240/cats?lock=1"}},{type:"text",text:" world "},{type:"image",data:{src:"https://loremflickr.com/320/240/cats?lock=2"}}]]);return c.useEffect(()=>{if(e.current)return h({doc:r,schema:N,onChange:l}).input(e.current)},[]),t.jsx("div",{ref:e,style:{backgroundColor:"white",padding:8},children:r.map((n,d)=>t.jsx("div",{children:n.length?n.map((o,p)=>o.type==="image"?t.jsx("img",{src:o.data.src},p):t.jsx("span",{children:o.text},p)):t.jsx("br",{})},d))})}},V=g({multiline:!0,void:{video:f({is:e=>e.tagName==="VIDEO",data:e=>({src:e.childNodes[0].src})})}}),q={render:()=>{const e=c.useRef(null),[r,l]=c.useState([[{type:"text",text:"Hello "},{type:"video",data:{src:"https://download.samplelib.com/mp4/sample-5s.mp4"}},{type:"text",text:" world "}]]);return c.useEffect(()=>{if(e.current)return h({doc:r,schema:V,onChange:l}).input(e.current)},[]),t.jsx("div",{ref:e,style:{backgroundColor:"white",padding:8},children:r.map((n,d)=>t.jsx("div",{children:n.length?n.map((o,p)=>o.type==="video"?t.jsx("video",{width:400,controls:!0,contentEditable:"false",suppressContentEditableWarning:!0,children:t.jsx("source",{src:o.data.src})},p):t.jsx("span",{children:o.text},p)):t.jsx("br",{})},d))})}},R=g({multiline:!0,void:{youtube:f({is:e=>!!e.dataset.youtubeNode,data:e=>({id:e.dataset.youtubeId})})}}),M=({id:e})=>t.jsx("iframe",{"data-youtube-node":!0,"data-youtube-id":e,width:"560",height:"315",src:"https://www.youtube.com/embed/"+e,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"}),Y={render:()=>{const e=c.useRef(null),[r,l]=c.useState([[{type:"text",text:"Hello "},{type:"youtube",data:{id:"IqKz0SfHaqI"}},{type:"text",text:" Youtube"}]]);return c.useEffect(()=>{if(e.current)return h({doc:r,schema:R,onChange:l}).input(e.current)},[]),t.jsx("div",{children:t.jsx("div",{ref:e,style:{backgroundColor:"white",padding:8},children:r.map((n,d)=>t.jsx("div",{children:n.length?n.map((o,p)=>o.type==="youtube"?t.jsx(M,{id:o.data.id},p):t.jsx("span",{children:o.text},p)):t.jsx("br",{})},d))})})}},A=["Multiline","Tag","Image","Video","Iframe"];export{Y as Iframe,_ as Image,F as Multiline,W as Tag,q as Video,A as __namedExportsOrder,T as default};
