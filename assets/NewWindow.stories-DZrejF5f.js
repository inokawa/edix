import{e as X,j as f}from"./editable-Be6T3Otz.js";import{R as $,r as g}from"./index-Bk3ZmH4I.js";import{t as ee}from"./index-Dv_J4l4u.js";import{p as ne}from"./plain-B6Q8EY_h.js";import"./index-0rGdlud-.js";function te(o,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}function k(o,e){return k=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},k(o,e)}function T(o){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(o)}function oe(o,e){if(e&&(T(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(o)}function x(o){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(o)}var H,F,M,Y,u={exports:{}};function re(o){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,n=x(o);if(e){var s=x(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return oe(this,t)}}u.exports=function(){if(Y)return M;Y=1;var o=F?H:(F=1,H="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function e(){}function t(){}return t.resetWarningCache=e,M=function(){function n(r,a,y,P,I,c){if(c!==o){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}function s(){return n}n.isRequired=n;var i={array:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i}}()();var R,_,j,W=function(o){(function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),r&&k(i,r)})(s,$.PureComponent);var e,t,n=re(s);function s(i){var r;return function(a,y){if(!(a instanceof y))throw new TypeError("Cannot call a class as a function")}(this,s),(r=n.call(this,i)).container=null,r.window=null,r.windowCheckerInterval=null,r.released=!1,r.state={mounted:!1},r}return e=s,(t=[{key:"render",value:function(){return this.state.mounted?ee.createPortal(this.props.children,this.container):null}},{key:"componentDidMount",value:function(){this.window||this.container||(this.openChild(),this.setState({mounted:!0}))}},{key:"openChild",value:function(){var i,r=this,a=this.props,y=a.url,P=a.title,I=a.name,c=a.features,m=a.onBlock,U=a.onOpen,E=a.center;if(typeof E!="string"||c.width!==void 0&&c.height!==void 0){if(E==="parent")c.left=window.top.outerWidth/2+window.top.screenX-c.width/2,c.top=window.top.outerHeight/2+window.top.screenY-c.height/2;else if(E==="screen"){var z=window.screenLeft!==void 0?window.screenLeft:window.screen.left,G=window.screenTop!==void 0?window.screenTop:window.screen.top,J=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,Q=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height;c.left=J/2-c.width/2+z,c.top=Q/2-c.height/2+G}}else console.warn("width and height window features must be present when a center prop is provided");if(this.window=window.open(y,I,(i=c,Object.keys(i).reduce(function(w,l){var d=i[l];return typeof d=="boolean"?w.push("".concat(l,"=").concat(d?"yes":"no")):w.push("".concat(l,"=").concat(d)),w},[]).join(","))),this.container=this.window.document.createElement("div"),this.windowCheckerInterval=setInterval(function(){r.window&&!r.window.closed||r.release()},50),this.window){if(this.window.document.title=P,this.container=this.window.document.getElementById("new-window-container"),this.container===null)this.container=this.window.document.createElement("div"),this.container.setAttribute("id","new-window-container"),this.window.document.body.appendChild(this.container);else{var Z=this.window.document.getElementById("new-window-container-static");this.window.document.body.removeChild(Z)}this.props.copyStyles&&setTimeout(function(){return w=document,l=r.window.document,d=l.createDocumentFragment(),Array.from(w.styleSheets).forEach(function(v){var N;try{N=v.cssRules}catch(h){console.error(h)}if(N){var A=[];Array.from(v.cssRules).forEach(function(h){var C=h.type;if(C!==CSSRule.UNKNOWN_RULE){var B="";B=C===CSSRule.KEYFRAMES_RULE?function(b){var p=["@keyframes",b.name,"{"];return Array.from(b.cssRules).forEach(function(D){p.push(D.keyText,"{",D.style.cssText,"}")}),p.push("}"),p.join(" ")}(h):[CSSRule.IMPORT_RULE,CSSRule.FONT_FACE_RULE].includes(C)?function(b){return b.cssText.split("url(").map(function(p){return p[1]==="/"?"".concat(p.slice(0,1)).concat(window.location.origin).concat(p.slice(1)):p}).join("url(")}(h):h.cssText,A.push(B)}});var L=l.createElement("style");L.textContent=A.join(`
`),d.appendChild(L)}else if(v.href){var S=l.createElement("link");S.rel="stylesheet",S.href=v.href,d.appendChild(S)}}),void l.head.appendChild(d);var w,l,d},0),typeof U=="function"&&U(this.window),this.window.addEventListener("beforeunload",function(){return r.release()})}else typeof m=="function"?m(null):console.warn("A new window could not be opened. Maybe it was blocked.")}},{key:"componentWillUnmount",value:function(){if(this.state.mounted&&this.window){if(this.props.closeOnUnmount)this.window.close();else if(this.props.children){var i=this.container.cloneNode(!0);i.setAttribute("id","new-window-container-static"),this.window.document.body.appendChild(i)}}}},{key:"release",value:function(){if(!this.released){this.released=!0,clearInterval(this.windowCheckerInterval);var i=this.props.onUnload;typeof i=="function"&&i(null)}}}])&&te(e.prototype,t),s}();j={url:"",name:"",title:"",features:{width:"600px",height:"640px"},onBlock:null,onOpen:null,onUnload:null,center:"parent",copyStyles:!0,closeOnUnmount:!0},(_="defaultProps")in(R=W)?Object.defineProperty(R,_,{value:j,enumerable:!0,configurable:!0,writable:!0}):R[_]=j,W.propTypes={children:u.exports.node,url:u.exports.string,name:u.exports.string,title:u.exports.string,features:u.exports.object,onUnload:u.exports.func,onBlock:u.exports.func,onOpen:u.exports.func,center:u.exports.oneOf(["parent","screen"]),copyStyles:u.exports.bool,closeOnUnmount:u.exports.bool};const de={component:X},ie=()=>{const o=g.useRef(null),[e,t]=g.useState("This is new window!");return g.useEffect(()=>{if(o.current)return X(o.current,{schema:ne({multiline:!0}),onChange:t}).dispose},[]),f.jsx("div",{ref:o,style:{background:"white"},children:e.split(`
`).map((n,s)=>f.jsx("div",{children:n||f.jsx("br",{})},s))})},O={name:"NewWindow",render:()=>{const[o,e]=g.useState(!1);return f.jsxs("div",{children:[f.jsxs("button",{onClick:()=>{e(t=>!t)},children:[o?"close":"open"," window"]}),o&&f.jsx(W,{features:{width:400,height:200},onUnload:()=>{e(!1)},children:f.jsx(ie,{})})]})}};var K,V,q;O.parameters={...O.parameters,docs:{...(K=O.parameters)==null?void 0:K.docs,source:{originalSource:`{
  name: "NewWindow",
  render: () => {
    const [isWindowOpened, setIsWindowOpened] = useState(false);
    return <div>
        <button onClick={() => {
        setIsWindowOpened(prev => !prev);
      }}>
          {isWindowOpened ? "close" : "open"} window
        </button>
        {isWindowOpened && <NewWindow features={{
        width: 400,
        height: 200
      }} onUnload={() => {
        setIsWindowOpened(false);
      }}>
            <Content />
          </NewWindow>}
      </div>;
  }
}`,...(q=(V=O.parameters)==null?void 0:V.docs)==null?void 0:q.source}}};const pe=["Default"];export{O as Default,pe as __namedExportsOrder,de as default};
