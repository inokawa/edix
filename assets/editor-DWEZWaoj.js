import{h as V,i as ke,j as Ie,k as $e,l as Je,r as Ze}from"./iframe-CAuxARJ3.js";import{a as Qe}from"./jsx-runtime-CfwpuQoo.js";function et(e){const t=Qe({...e,addons:[ke,Ie,$e,...e.addons??[]]}),n=t.meta.bind(t);return t.meta=s=>{const o=n(s),r=o.story.bind(o);return o.story=a=>{const l=r(a);return l.Component=l.__compose(),l},o},t}V(et,"__definePreview");const{global:tt}=__STORYBOOK_MODULE_GLOBAL__;var{window:we}=tt;we&&(we.STORYBOOK_ENV="react");const{composeConfigs:nt,composeStories:st,composeStory:rt,setProjectAnnotations:ot,setDefaultProjectAnnotations:it}=__STORYBOOK_MODULE_PREVIEW_API__;function at(e){return it(Me),ot(e)}V(at,"setProjectAnnotations");var Me=nt([ke,Ie,{renderToCanvas:V(async(e,t)=>{if(e.storyContext.testingLibraryRender==null)return Je(e,t);const{storyContext:{context:n,unboundStoryFn:s,testingLibraryRender:o}}=e,{unmount:r}=o(Ze.createElement(s,{...n}),{container:n.canvasElement});return r},"renderToCanvas")}]);function Ae(e,t,n,s){return rt(e,t,n,globalThis.globalProjectAnnotations??Me,s)}V(Ae,"composeStory");function ct(e,t){return st(e,t,Ae)}V(ct,"composeStories");const q=([e],[t])=>e===t?0:e<t?1:-1,D=(e,t)=>{const n=q(e,t);return n===0?e[1]===t[1]?0:e[1]<t[1]?1:-1:n},G=([e,t])=>D(e,t)===-1?[t,e]:[e,t],lt=(e,t)=>e.reduce((n,s,o)=>(o!==0&&(n+=`
`),n+s.reduce((r,a)=>r+(H(a)?a.text:t?t(a):""),"")),""),ut=e=>e.split(`
`).map(t=>t?[{text:t}]:[]),Q=1,ee=2,Be=3,Ke=e=>e._type!==Be;class R extends Array{static from(t){return new R(...t)}insert(t,n){return this.push({_type:ee,_pos:t,_fragment:n}),this}delete(t,n){return this.push({_type:Q,_start:t,_end:n}),this}select(t,n){return this.push({_type:Be,_anchor:t,_focus:n}),this}transform(t){return this.reduce((n,s)=>Ke(s)?oe(n,s):n,t)}}const dt=(e,t)=>e.length===t.length&&e.every((n,s)=>n===t[s]),H=e=>"text"in e,He=e=>H(e)?e.text.length:1,ft=e=>e.reduce((t,n)=>t+He(n),0),W=(e,t)=>{const n=[...e];if(!n.length)n.push(...t);else for(const s of t){const o=n.length-1,r=n[o];H(s)&&H(r)?n[o]={text:r.text+s.text}:n.push(s)}return n},A=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n],o=He(s);if(o>t){const r=e.slice(0,n),a=e.slice(n+1);if(H(s)){const l=s.text.slice(0,t),d=s.text.slice(t);l&&r.push({text:l}),d&&a.unshift({text:d})}else a.unshift(s);return[r,a]}t-=o}return[e,[]]},xe=(e,t,n,s)=>{const[o]=n,[r]=s||n,a=A(e[n[0]],n[1]),l=a[0],d=s?A(e[s[0]],s[1])[1]:a[1],c=[...t];c.length?(c[0]=W(l,c[0]),c[c.length-1]=W(c[c.length-1],d)):c.push(W(l,d)),e.splice(o,r-o+1,...c)},pt=(e,t,n)=>q(t,n)===0?[A(A(e[t[0]],n[1])[0],t[1])[1]]:[A(e[t[0]],t[1])[1],...e.slice(t[0]+1,n[0]),A(e[n[0]],n[1])[0]],Et=e=>{switch(e._type){case Q:return D(e._start,e._end)===1;case ee:return!!lt(e._fragment)}return!0},_t=(e,t)=>{switch(t._type){case Q:{xe(e,[],t._start,t._end);break}case ee:{xe(e,t._fragment,t._pos);break}}},oe=(e,t)=>{switch(t._type){case Q:{const{_start:n,_end:s}=t;if(D(e,n)!==1)return D(s,e)===1?[e[0]+n[0]-s[0],e[1]+(q(s,e)===0?n[1]-s[1]:0)]:n;break}case ee:{const{_pos:n,_fragment:s}=t,o=s.length,r=o-1;if(D(e,n)!==1)return[e[0]+r,e[1]+(q(e,n)===0?ft(s[o-1])-(r===0?0:n[1]):0)];break}}return e},ht=(e,t,n)=>{const s=[...e],o=[...t];try{for(const r of n)Et(r)&&(Ke(r)?(_t(e,r),t[0]=oe(t[0],r),t[1]=oe(t[1],r)):(r._anchor&&(t[0]=r._anchor),r._focus&&(t[1]=r._focus)))}catch(r){console.error("rollback transaction:",r),e.length=0,e.push(...s),t[0]=o[0],t[1]=o[1]}},gt=500,vt=500,Tt=e=>{let t=0,n=0;const s=Date.now,o=[e],r=()=>o[t],a=()=>t>0,l=()=>t<o.length-1;return{get:r,set:d=>{o[t]=d},undo:()=>{if(a())return t--,r()},redo:()=>{if(l())return t++,r()},push:d=>{const c=s();t!==0&&c-n<vt&&t--,n=c,o[++t]=d,o.splice(t+1),t>gt&&(t--,o.shift())}}};let O,E,S,z,ie=!1,ae=!1,Ve;const yt=1,Nt=4,le=1,X=2,$=3,ue=4,St=5,mt=6,Lt=1,Ot=3,Dt=8,wt=e=>e.nodeType===Ot,J=e=>e.nodeType===Lt,xt=e=>e.nodeType===Dt,bt=new Set(["EMBED","IMG","PICTURE","AUDIO","VIDEO","SVG","CANVAS","MATH","IFRAME","OBJECT"]),Fe=e=>e.contentEditable==="false"||bt.has(e.tagName),ce=()=>E,je=()=>S===le?E.data.length:S===X?1:0,Rt=e=>{O.currentNode=O.currentNode.parentNode.children[e]},be=e=>{const t=e.nextSibling;return!!t&&!xt(t)},Ct=()=>{for(;;){if(S===X){const e=E;for(;(E=O.nextNode())&&e.contains(E););}else E=O.nextNode();if(S=null,!E)break;if(z){if(z.contains(E)){if(ie=!0,ae)break}else if(ie)break}if(wt(E)){const e=E.data;if(e)return e===`
`?S=be(E)?$:mt:S=le}else if(J(E)){if(E.tagName==="BR")return S=be(E)?$:St;if(Fe(E))return S=X;if(Ve(E))return S=ue}}},de=(e,t,{_document:n,_isBlock:s},o)=>{try{return Ve=s,O=n.createTreeWalker(t,Nt|yt),o&&(o._startNode&&(O.currentNode=o._startNode,O.previousNode()),o._endNode&&(z=o._endNode),ae=o._excludeEnd||!1),e(Ct)}finally{O=E=S=z=null,ie=ae=!1}},Pt=Math.min,kt=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},It=new Set(["DIV","H1","H2","H3","H4","H5","H6","P","PRE","LI","DT","DD","TR"]),Mt=e=>It.has(e.tagName),At=2,Ue=e=>e.ownerDocument,Ye=e=>Ue(e).getSelection(),Bt=(e,t)=>{if(e.rangeCount){const n=e.getRangeAt(0);if(t.contains(n.commonAncestorContainer))return n}},Re=(e,t,n)=>{const s=Ye(e);s.removeAllRanges(),s.addRange(t),n&&(s.collapseToEnd(),s.extend(t.startContainer,t.startOffset))},Ce=(e,t,[n,s],o)=>{const r=D(n,s),a=r===0,l=r===-1,d=l?s:n,c=l?n:s;if(d[0]===0&&d[1]===0&&a&&!t.hasChildNodes()){const B=e.createRange();return B.setStart(t,0),B.setEnd(t,0),Re(t,B),!0}const p=Pe(t,d,o);if(!p)return!1;const v=a?p:Pe(t,c,o);if(!v)return!1;const _=e.createRange(),[h,C]=p,[y,P]=v;return J(h)?C<1?_.setStartBefore(h):_.setStartAfter(h):_.setStart(h,C),J(y)?P<1?_.setEndBefore(y):_.setEndAfter(y):_.setEnd(y,P),Re(t,_,l),!0},Pe=(e,[t,n],s)=>de(o=>{let r,a=!1;for(;r=o();)if(r===ue)a||(a=!0,t!==0&&Rt(t));else{const l=je();if(n<=l)return[ce(),n];n-=l}},e,s),Kt=(e,t)=>{let n=t;for(;;){const s=n.parentElement;if(s===e)break;n=s}return n},Ht=e=>{let t=0;for(;e=e.previousElementSibling;)t++;return t},Z=(e,t,n,s)=>{let o,r,a=!0;if(e===t&&!t.hasChildNodes())return[0,0];if(J(t)&&!Fe(t)&&t.hasChildNodes()){const d=Pt(n,t.childNodes.length-1);t=t.childNodes[d],a=d===n,n=0}const l=Kt(e,t);return s._isBlock(l)?(o=l,r=Ht(o)):(o=e,r=0),de(d=>{let c,p=0;for(;c=d();)c===$?(r++,p=0):p+=je();return[r,p+n]},o,s,{_endNode:t,_excludeEnd:a})},Ge=(e,t,{startOffset:n,startContainer:s,endOffset:o,endContainer:r})=>{const a=Z(e,s,n,t);return[a,s===r&&n===o?a:Z(e,r,o,t)]},We=()=>[[0,0],[0,0]],Vt=(e,t)=>e.compareDocumentPosition(t),Ft=(e,t)=>{const n=Ye(e),s=Bt(n,e);if(!s)return We();const o=Ge(e,t,s);return(n.anchorNode===n.focusNode?n.anchorOffset>n.focusOffset:(Vt(n.anchorNode,n.focusNode)&At)!==0)?[o[1],o[0]]:o},qt=(e,t,n,s)=>de(o=>{let r,a=null,l="",d=!1;const c=[],p=()=>{l&&(a||(a=[]),a.push({text:l}),l="")},v=()=>{p(),!a&&d&&(a=[]),a&&c.push(a),a=null,d=!1};for(;r=o();)if(r===ue)v();else if(d=!0,r===le){let h=ce().data;l+=h}else if(r===X){p();const _=ce(),h=n(_);h&&a.push({data:h})}else r===$&&v();return v(),c.length||c.push([]),c},e,t,s),jt=(e,t,{clientX:n,clientY:s},o)=>{if(e.caretPositionFromPoint){const r=e.caretPositionFromPoint(n,s);if(r)return Z(t,r.offsetNode,r.offset,o)}else if(e.caretRangeFromPoint){const r=e.caretRangeFromPoint(n,s);if(r)return Z(t,r.startContainer,r.startOffset,o)}},Ut=(e,t)=>{let n=!1;const s=[],o=l=>{n&&s.push(...l)},r=new MutationObserver(l=>{o(l),n||t()}),a=()=>{o(r.takeRecords())};return r.observe(e,{characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{_record(l){!n&&l&&a(),n=l},_flush:()=>(a(),s.splice(0)),_dispose(){s.splice(0),r.disconnect()}}},Yt=e=>R.from(e.map(t=>t._type===2?{...t,_fragment:[t._fragment.reduce((n,s)=>W(n,s),[])]}:t)),re=()=>{},zt=({schema:{single:e,js:t,doc:n,copy:s,paste:o},doc:r,isBlock:a=Mt,onChange:l,onKeyDown:d})=>{let c=We(),p=!1,v=re;const _=()=>h.get()[0],h=Tt([n(r),c]),C=[],y=i=>{p||(C.unshift(i),B(qe))},P=new Set,B=i=>{P.has(i)||(P.add(i),kt(()=>{P.delete(i),i()}))},qe=()=>{if(C.length){let i=[..._()],w=[...c],m;for(;m=C.pop();)e&&(m=Yt(m)),ht(i,w,m);const F=_();dt(i,F)||(h.set([F,c]),h.push([i,w]),l(t(i))),c=w}};return{input:i=>{if(!(window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"))return console.error("beforeinput event is not supported."),re;const{contentEditable:w,role:m,ariaMultiLine:F,ariaReadOnly:ze}=i,Xe=i.style.whiteSpace;i.role="textbox",i.style.whiteSpace="pre-wrap",e||(i.ariaMultiLine="true");let fe=!1,te=!1,k=null,L=!1,j=!1,U=!1;const I=Ue(i),x={_document:I,_isBlock:a};v=()=>{i.contentEditable=p?"false":"true",i.ariaReadOnly=p?"true":null},v();const M=Ut(i,()=>{j&&Ce(I,i,c,x)}),K=()=>{c=Ft(i,x)},ne=()=>{const u=M._flush();if(M._record(!1),u.length){let f;for(;f=u.pop();)if(f.type==="childList"){const{target:N,removedNodes:T,addedNodes:g,nextSibling:Y}=f;for(let b=T.length-1;b>=0;b--)N.insertBefore(T[b],Y);for(let b=g.length-1;b>=0;b--)N.removeChild(g[b])}else f.target.nodeValue=f.oldValue;M._flush(),te=Ce(I,i,c,x)}y(k),L=!1,k=null},pe=u=>{if(!L){if(d&&d(u)){u.preventDefault();return}if((u.metaKey||u.ctrlKey)&&!u.altKey&&u.code==="KeyZ"&&(u.preventDefault(),M._record(!1),!p)){const f=u.shiftKey?h.redo():h.undo();f&&(l(t(f[0])),c=f[1])}}},Ee=()=>{L||ne()},_e=u=>{u.preventDefault();const f=u.inputType;if(f.startsWith("format")||f==="historyUndo"||f==="historyRedo")return;L?M._record(!0):K();const N=u.getTargetRanges()[0];if(N){const T=Ge(i,x,N);let g=f==="insertParagraph"||f==="insertLineBreak"?`
`:u.data;if(g==null){const Y=u.dataTransfer;Y&&(g=Y.getData("text/plain"))}k||(k=new R().select(...c)),D(...T)!==0&&k.delete(...T),g&&k.insert(T[0],ut(g))}L||ne()},he=()=>{L||K(),L=!0},ge=()=>{ne()},ve=()=>{j=!0,K()},Te=()=>{j=!1},ye=()=>{if(te){te=!1;return}j&&!L&&!U&&K()},se=u=>{K(),D(...c)!==0&&s(u,pt(_(),...G(c)),i)},Ne=u=>{u.preventDefault(),se(u.clipboardData)},Se=u=>{u.preventDefault(),p||(se(u.clipboardData),y(new R().delete(...G(c))))},me=u=>{u.preventDefault();const[f,N]=G(c);y(new R().delete(f,N).insert(f,o(u.clipboardData,x)))},Le=u=>{u.preventDefault();const f=u.dataTransfer,N=jt(I,i,u,x);if(f&&N){const T=new R;U&&T.delete(...G(c));const g=T.transform(N);T.select(g,g).insert(g,o(f,x)).select(g),y(T),i.focus({preventScroll:!0})}},Oe=u=>{U=!0,se(u.dataTransfer)},De=()=>{U=!1};return I.addEventListener("selectionchange",ye),i.addEventListener("keydown",pe),i.addEventListener("input",Ee),i.addEventListener("beforeinput",_e),i.addEventListener("compositionstart",he),i.addEventListener("compositionend",ge),i.addEventListener("focus",ve),i.addEventListener("blur",Te),i.addEventListener("copy",Ne),i.addEventListener("cut",Se),i.addEventListener("paste",me),i.addEventListener("drop",Le),i.addEventListener("dragstart",Oe),i.addEventListener("dragend",De),()=>{fe||(fe=!0,v=re,i.contentEditable=w,i.role=m,i.ariaMultiLine=F,i.ariaReadOnly=ze,i.style.whiteSpace=Xe,M._dispose(),I.removeEventListener("selectionchange",ye),i.removeEventListener("keydown",pe),i.removeEventListener("input",Ee),i.removeEventListener("beforeinput",_e),i.removeEventListener("compositionstart",he),i.removeEventListener("compositionend",ge),i.removeEventListener("focus",ve),i.removeEventListener("blur",Te),i.removeEventListener("copy",Ne),i.removeEventListener("cut",Se),i.removeEventListener("paste",me),i.removeEventListener("drop",Le),i.removeEventListener("dragstart",Oe),i.removeEventListener("dragend",De))}},command:(i,...w)=>{const m=i(_(),c,...w);m&&y(m)},readonly:i=>{p=i,v()}}};export{R as T,qt as a,Bt as b,zt as c,lt as d,Ye as e,H as f,ft as g,xt as i,G as r,ut as s};
