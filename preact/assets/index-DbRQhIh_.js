(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))r(_);new MutationObserver(_=>{for(const o of _)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(_){const o={};return _.integrity&&(o.integrity=_.integrity),_.referrerPolicy&&(o.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?o.credentials="include":_.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(_){if(_.ep)return;_.ep=!0;const o=n(_);fetch(_.href,o)}})();var ge,k,xt,q,lt,Nt,Ne,Dt,Re,De,Pe,ee={},Pt=[],zt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ie=Array.isArray;function B(e,t){for(var n in t)e[n]=t[n];return e}function Fe(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Gt(e,t,n){var r,_,o,s={};for(o in t)o=="key"?r=t[o]:o=="ref"?_=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?ge.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)s[o]===void 0&&(s[o]=e.defaultProps[o]);return se(e,s,r,_,null)}function se(e,t,n,r,_){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:_??++xt,__i:-1,__u:0};return _==null&&k.vnode!=null&&k.vnode(o),o}function re(e){return e.children}function le(e,t){this.props=e,this.context=t}function J(e,t){if(t==null)return e.__?J(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?J(e):null}function St(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return St(e)}}function ct(e){(!e.__d&&(e.__d=!0)&&q.push(e)&&!fe.__r++||lt!==k.debounceRendering)&&((lt=k.debounceRendering)||Nt)(fe)}function fe(){var e,t,n,r,_,o,s,a;for(q.sort(Ne);e=q.shift();)e.__d&&(t=q.length,r=void 0,o=(_=(n=e).__v).__e,s=[],a=[],n.__P&&((r=B({},_)).__v=_.__v+1,k.vnode&&k.vnode(r),Ue(n.__P,r,_,n.__n,n.__P.namespaceURI,32&_.__u?[o]:null,s,o??J(_),!!(32&_.__u),a),r.__v=_.__v,r.__.__k[r.__i]=r,Ht(s,r,a),r.__e!=o&&St(r)),q.length>t&&q.sort(Ne));fe.__r=0}function Ct(e,t,n,r,_,o,s,a,l,c,p){var i,v,d,$,P,w,h=r&&r.__k||Pt,b=t.length;for(l=Zt(n,t,h,l),i=0;i<b;i++)(d=n.__k[i])!=null&&(v=d.__i===-1?ee:h[d.__i]||ee,d.__i=i,w=Ue(e,d,v,_,o,s,a,l,c,p),$=d.__e,d.ref&&v.ref!=d.ref&&(v.ref&&Be(v.ref,null,d),p.push(d.ref,d.__c||$,d)),P==null&&$!=null&&(P=$),4&d.__u||v.__k===d.__k?l=Tt(d,l,e):typeof d.type=="function"&&w!==void 0?l=w:$&&(l=$.nextSibling),d.__u&=-7);return n.__e=P,l}function Zt(e,t,n,r){var _,o,s,a,l,c=t.length,p=n.length,i=p,v=0;for(e.__k=[],_=0;_<c;_++)(o=t[_])!=null&&typeof o!="boolean"&&typeof o!="function"?(a=_+v,(o=e.__k[_]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?se(null,o,null,null,null):Ie(o)?se(re,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?se(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,s=null,(l=o.__i=Jt(o,n,a,i))!==-1&&(i--,(s=n[l])&&(s.__u|=2)),s==null||s.__v===null?(l==-1&&v--,typeof o.type!="function"&&(o.__u|=4)):l!==a&&(l==a-1?v--:l==a+1?v++:(l>a?v--:v++,o.__u|=4))):o=e.__k[_]=null;if(i)for(_=0;_<p;_++)(s=n[_])!=null&&!(2&s.__u)&&(s.__e==r&&(r=J(s)),Mt(s,s));return r}function Tt(e,t,n){var r,_;if(typeof e.type=="function"){for(r=e.__k,_=0;r&&_<r.length;_++)r[_]&&(r[_].__=e,t=Tt(r[_],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=J(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Jt(e,t,n,r){var _=e.key,o=e.type,s=n-1,a=n+1,l=t[n];if(l===null||l&&_==l.key&&o===l.type&&!(2&l.__u))return n;if((typeof o!="function"||o===re||_)&&r>(l!=null&&!(2&l.__u)?1:0))for(;s>=0||a<t.length;){if(s>=0){if((l=t[s])&&!(2&l.__u)&&_==l.key&&o===l.type)return s;s--}if(a<t.length){if((l=t[a])&&!(2&l.__u)&&_==l.key&&o===l.type)return a;a++}}return-1}function at(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||zt.test(t)?n:n+"px"}function _e(e,t,n,r,_){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||at(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||at(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(Dt,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=Re,e.addEventListener(t,o?Pe:De,o)):e.removeEventListener(t,o?Pe:De,o);else{if(_=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function ut(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Re++;else if(t.t<n.u)return;return n(k.event?k.event(t):t)}}}function Ue(e,t,n,r,_,o,s,a,l,c){var p,i,v,d,$,P,w,h,b,A,S,I,O,R,M,j,z,T=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),o=[a=t.__e=n.__e]),(p=k.__b)&&p(t);e:if(typeof T=="function")try{if(h=t.props,b="prototype"in T&&T.prototype.render,A=(p=T.contextType)&&r[p.__c],S=p?A?A.props.value:p.__:r,n.__c?w=(i=t.__c=n.__c).__=i.__E:(b?t.__c=i=new T(h,S):(t.__c=i=new le(h,S),i.constructor=T,i.render=Yt),A&&A.sub(i),i.props=h,i.state||(i.state={}),i.context=S,i.__n=r,v=i.__d=!0,i.__h=[],i._sb=[]),b&&i.__s==null&&(i.__s=i.state),b&&T.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=B({},i.__s)),B(i.__s,T.getDerivedStateFromProps(h,i.__s))),d=i.props,$=i.state,i.__v=t,v)b&&T.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),b&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(b&&T.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,S),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,S)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(F){F&&(F.__=t)}),I=0;I<i._sb.length;I++)i.__h.push(i._sb[I]);i._sb=[],i.__h.length&&s.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,S),b&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,$,P)})}if(i.context=S,i.props=h,i.__P=e,i.__e=!1,O=k.__r,R=0,b){for(i.state=i.__s,i.__d=!1,O&&O(t),p=i.render(i.props,i.state,i.context),M=0;M<i._sb.length;M++)i.__h.push(i._sb[M]);i._sb=[]}else do i.__d=!1,O&&O(t),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++R<25);i.state=i.__s,i.getChildContext!=null&&(r=B(B({},r),i.getChildContext())),b&&!v&&i.getSnapshotBeforeUpdate!=null&&(P=i.getSnapshotBeforeUpdate(d,$)),a=Ct(e,Ie(j=p!=null&&p.type===re&&p.key==null?p.props.children:p)?j:[j],t,n,r,_,o,s,a,l,c),i.base=t.__e,t.__u&=-161,i.__h.length&&s.push(i),w&&(i.__E=i.__=null)}catch(F){if(t.__v=null,l||o!=null)if(F.then){for(t.__u|=l?160:128;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,t.__e=a}else for(z=o.length;z--;)Fe(o[z]);else t.__e=n.__e,t.__k=n.__k;k.__e(F,t,n)}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):a=t.__e=Xt(n.__e,t,n,r,_,o,s,l,c);return(p=k.diffed)&&p(t),128&t.__u?void 0:a}function Ht(e,t,n){for(var r=0;r<n.length;r++)Be(n[r],n[++r],n[++r]);k.__c&&k.__c(t,e),e.some(function(_){try{e=_.__h,_.__h=[],e.some(function(o){o.call(_)})}catch(o){k.__e(o,_.__v)}})}function Xt(e,t,n,r,_,o,s,a,l){var c,p,i,v,d,$,P,w=n.props,h=t.props,b=t.type;if(b==="svg"?_="http://www.w3.org/2000/svg":b==="math"?_="http://www.w3.org/1998/Math/MathML":_||(_="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((d=o[c])&&"setAttribute"in d==!!b&&(b?d.localName===b:d.nodeType===3)){e=d,o[c]=null;break}}if(e==null){if(b===null)return document.createTextNode(h);e=document.createElementNS(_,b,h.is&&h),a&&(k.__m&&k.__m(t,o),a=!1),o=null}if(b===null)w===h||a&&e.data===h||(e.data=h);else{if(o=o&&ge.call(e.childNodes),w=n.props||ee,!a&&o!=null)for(w={},c=0;c<e.attributes.length;c++)w[(d=e.attributes[c]).name]=d.value;for(c in w)if(d=w[c],c!="children"){if(c=="dangerouslySetInnerHTML")i=d;else if(!(c in h)){if(c=="value"&&"defaultValue"in h||c=="checked"&&"defaultChecked"in h)continue;_e(e,c,null,d,_)}}for(c in h)d=h[c],c=="children"?v=d:c=="dangerouslySetInnerHTML"?p=d:c=="value"?$=d:c=="checked"?P=d:a&&typeof d!="function"||w[c]===d||_e(e,c,d,w[c],_);if(p)a||i&&(p.__html===i.__html||p.__html===e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(i&&(e.innerHTML=""),Ct(e,Ie(v)?v:[v],t,n,r,b==="foreignObject"?"http://www.w3.org/1999/xhtml":_,o,s,o?o[0]:n.__k&&J(n,0),a,l),o!=null)for(c=o.length;c--;)Fe(o[c]);a||(c="value",b==="progress"&&$==null?e.removeAttribute("value"):$!==void 0&&($!==e[c]||b==="progress"&&!$||b==="option"&&$!==w[c])&&_e(e,c,$,w[c],_),c="checked",P!==void 0&&P!==e[c]&&_e(e,c,P,w[c],_))}return e}function Be(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(_){k.__e(_,n)}}function Mt(e,t,n){var r,_;if(k.unmount&&k.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Be(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){k.__e(o,t)}r.base=r.__P=null}if(r=e.__k)for(_=0;_<r.length;_++)r[_]&&Mt(r[_],t,n||typeof e.type!="function");n||Fe(e.__e),e.__c=e.__=e.__e=void 0}function Yt(e,t,n){return this.constructor(e,n)}function Qt(e,t,n){var r,_,o,s;t===document&&(t=document.documentElement),k.__&&k.__(e,t),_=(r=typeof n=="function")?null:t.__k,o=[],s=[],Ue(t,e=(!r&&n||t).__k=Gt(re,null,[e]),_||ee,ee,t.namespaceURI,!r&&n?[n]:_?null:t.firstChild?ge.call(t.childNodes):null,o,!r&&n?n:_?_.__e:t.firstChild,r,s),Ht(o,e,s)}ge=Pt.slice,k={__e:function(e,t,n,r){for(var _,o,s;t=t.__;)if((_=t.__c)&&!_.__)try{if((o=_.constructor)&&o.getDerivedStateFromError!=null&&(_.setState(o.getDerivedStateFromError(e)),s=_.__d),_.componentDidCatch!=null&&(_.componentDidCatch(e,r||{}),s=_.__d),s)return _.__E=_}catch(a){e=a}throw e}},xt=0,le.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=B({},this.state),typeof e=="function"&&(e=e(B({},n),this.props)),e&&B(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ct(this))},le.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ct(this))},le.prototype.render=re,q=[],Nt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ne=function(e,t){return e.__v.__b-t.__v.__b},fe.__r=0,Dt=/(PointerCapture)$|Capture$/i,Re=0,De=ut(!1),Pe=ut(!0);var en=0;function ce(e,t,n,r,_,o){t||(t={});var s,a,l=t;"ref"in t&&(s=t.ref,delete t.ref);var c={type:e,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--en,__i:-1,__u:0,__source:_,__self:o};if(typeof e=="function"&&(s=e.defaultProps))for(a in s)l[a]===void 0&&(l[a]=s[a]);return k.vnode&&k.vnode(c),c}var te,N,Le,ft,de=0,At=[],D=k,dt=D.__b,pt=D.__r,ht=D.diffed,vt=D.__c,mt=D.unmount,gt=D.__;function We(e,t){D.__h&&D.__h(N,e,de||t),de=0;var n=N.__H||(N.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function tn(e){return de=1,nn(Rt,e)}function nn(e,t,n){var r=We(te++,2);if(r.t=e,!r.__c&&(r.__=[Rt(void 0,t),function(a){var l=r.__N?r.__N[0]:r.__[0],c=r.t(l,a);l!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=N,!N.u)){var _=function(a,l,c){if(!r.__c.__H)return!0;var p=r.__c.__H.__.filter(function(v){return!!v.__c});if(p.every(function(v){return!v.__N}))return!o||o.call(this,a,l,c);var i=r.__c.props!==a;return p.forEach(function(v){if(v.__N){var d=v.__[0];v.__=v.__N,v.__N=void 0,d!==v.__[0]&&(i=!0)}}),o&&o.call(this,a,l,c)||i};N.u=!0;var o=N.shouldComponentUpdate,s=N.componentWillUpdate;N.componentWillUpdate=function(a,l,c){if(this.__e){var p=o;o=void 0,_(a,l,c),o=p}s&&s.call(this,a,l,c)},N.shouldComponentUpdate=_}return r.__N||r.__}function rn(e,t){var n=We(te++,3);!D.__s&&Ot(n.__H,t)&&(n.__=e,n.i=t,N.__H.__h.push(n))}function on(e){return de=5,_n(function(){return{current:e}},[])}function _n(e,t){var n=We(te++,7);return Ot(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function sn(){for(var e;e=At.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ae),e.__H.__h.forEach(Se),e.__H.__h=[]}catch(t){e.__H.__h=[],D.__e(t,e.__v)}}D.__b=function(e){N=null,dt&&dt(e)},D.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),gt&&gt(e,t)},D.__r=function(e){pt&&pt(e),te=0;var t=(N=e.__c).__H;t&&(Le===N?(t.__h=[],N.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(ae),t.__h.forEach(Se),t.__h=[],te=0)),Le=N},D.diffed=function(e){ht&&ht(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(At.push(t)!==1&&ft===D.requestAnimationFrame||((ft=D.requestAnimationFrame)||ln)(sn)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Le=N=null},D.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ae),n.__h=n.__h.filter(function(r){return!r.__||Se(r)})}catch(r){t.some(function(_){_.__h&&(_.__h=[])}),t=[],D.__e(r,n.__v)}}),vt&&vt(e,t)},D.unmount=function(e){mt&&mt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ae(r)}catch(_){t=_}}),n.__H=void 0,t&&D.__e(t,n.__v))};var yt=typeof requestAnimationFrame=="function";function ln(e){var t,n=function(){clearTimeout(r),yt&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);yt&&(t=requestAnimationFrame(n))}function ae(e){var t=N,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),N=t}function Se(e){var t=N;e.__c=e.__(),N=t}function Ot(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Rt(e,t){return typeof t=="function"?t(e):t}const pe=([e],[t])=>e===t?0:e<t?1:-1,V=(e,t)=>{const n=pe(e,t);return n===0?e[1]===t[1]?0:e[1]<t[1]?1:-1:n},ie=([e,t])=>V(e,t)===-1?[t,e]:[e,t],Ce=(e,t)=>e.reduce((n,r,_)=>(_!==0&&(n+=`
`),n+r.reduce((o,s)=>o+(ne(s)?s.text:t?t(s):""),"")),""),It=e=>e.split(`
`).map(t=>t?[{text:t}]:[]),Ft=e=>e.t!==3;class K extends Array{static from(t){return new K(...t)}insert(t,n){return this.push({t:2,o:t,i:n}),this}delete(t,n){return this.push({t:1,l:t,u:n}),this}select(t,n){return this.push({t:3,p:t,m:n}),this}rebasePos(t){return this.reduce((n,r)=>Ft(r)?Te(n,r):n,t)}}const ne=e=>"text"in e,Ut=e=>ne(e)?e.text.length:1,cn=e=>e.reduce((t,n)=>t+Ut(n),0),ue=(e,t)=>{const n=[...e];if(n.length)for(const r of t){const _=n.length-1,o=n[_];ne(r)&&ne(o)?n[_]={text:o.text+r.text}:n.push(r)}else n.push(...t);return n},Z=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n],_=Ut(r);if(_>t){const o=e.slice(0,n),s=e.slice(n+1);if(ne(r)){const a=r.text.slice(0,t),l=r.text.slice(t);a&&o.push({text:a}),l&&s.unshift({text:l})}else s.unshift(r);return[o,s]}t-=_}return[e,[]]},bt=(e,t,n,r)=>{const[_]=n,[o]=r||n,s=Z(e[n[0]],n[1]),a=s[0],l=r?Z(e[r[0]],r[1])[1]:s[1],c=[...t];c.length?(c[0]=ue(a,c[0]),c[c.length-1]=ue(c[c.length-1],l)):c.push(ue(a,l)),e.splice(_,o-_+1,...c)},an=e=>{switch(e.t){case 1:return V(e.l,e.u)===1;case 2:return!!Ce(e.i)}return!0},un=(e,t)=>{switch(t.t){case 1:bt(e,[],t.l,t.u);break;case 2:bt(e,t.i,t.o)}},Te=(e,t)=>{switch(t.t){case 1:{const{l:n,u:r}=t;if(V(e,n)!==1)return V(r,e)===1?[e[0]+n[0]-r[0],e[1]+(pe(r,e)===0?n[1]-r[1]:0)]:n;break}case 2:{const{o:n,i:r}=t,_=r.length,o=_-1;if(V(e,n)!==1)return[e[0]+o,e[1]+(pe(e,n)===0?cn(r[_-1])-(o===0?0:n[1]):0)];break}}return e},fn=(e,t,n)=>{const r=[...e],_=[...t];try{for(const o of n)an(o)&&(Ft(o)?(un(e,o),t[0]=Te(t[0],o),t[1]=Te(t[1],o)):(o.p&&(t[0]=o.p),o.m&&(t[1]=o.m)))}catch(o){console.error("rollback transaction:",o),e.length=0,e.push(...r),t[0]=_[0],t[1]=_[1]}};let W,C,U,he,Bt,He=!1,Me=!1;const dn=e=>e.nodeType===3,ve=e=>e.nodeType===1,pn=e=>e.nodeType===8,hn=new Set(["EMBED","IMG","PICTURE","AUDIO","VIDEO","SVG","CANVAS","MATH","IFRAME","OBJECT"]),Wt=e=>e.contentEditable==="false"||hn.has(e.tagName),Ae=()=>C,Vt=()=>U===1?C.data.length:U===2?1:0,$t=e=>{const t=e.nextSibling;return!!t&&!pn(t)},vn=()=>{for(;;){if(U===2){const e=C;for(;(C=W.nextNode())&&e.contains(C););}else C=W.nextNode();if(U=null,!C)break;if(he){if(he.contains(C)){if(He=!0,Me)break}else if(He)break}if(dn(C)){const e=C.data;if(e)return U=e===`
`?$t(C)?3:6:1}else if(ve(C)){if(C.tagName==="BR")return U=$t(C)?3:5;if(Wt(C))return U=2;if(Bt(C))return U=4}}},Ve=(e,t,{h:n,_:r},_)=>{try{return Bt=r,W=n.createTreeWalker(t,5),_&&(_.k&&(W.currentNode=_.k,W.previousNode()),_.v&&(he=_.v),Me=_.D||!1),e(vn)}finally{W=C=U=he=null,He=Me=!1}},mn=Math.min,gn=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},yn=new Set(["DIV","H1","H2","H3","H4","H5","H6","P","PRE","LI","DT","DD","TR"]),bn=e=>yn.has(e.tagName),qt=e=>e.ownerDocument,Oe=e=>qt(e).getSelection(),Et=(e,t)=>{if(e.rangeCount){const n=e.getRangeAt(0);if(t.contains(n.commonAncestorContainer))return n}},kt=(e,t,n)=>{const r=Oe(e);r.removeAllRanges(),r.addRange(t),n&&(r.collapseToEnd(),r.extend(t.startContainer,t.startOffset))},xe=(e,t,[n,r],_)=>{const o=V(n,r),s=o===0,a=o===-1,l=a?r:n,c=a?n:r;if(l[0]===0&&l[1]===0&&s&&!t.hasChildNodes()){const h=e.createRange();return h.setStart(t,0),h.setEnd(t,0),kt(t,h),!0}const p=wt(t,l,_);if(!p)return!1;const i=s?p:wt(t,c,_);if(!i)return!1;const v=e.createRange(),[d,$]=p,[P,w]=i;return ve(d)?$<1?v.setStartBefore(d):v.setStartAfter(d):v.setStart(d,$),ve(P)?w<1?v.setEndBefore(P):v.setEndAfter(P):v.setEnd(P,w),kt(t,v,a),!0},wt=(e,[t,n],r)=>Ve(_=>{let o,s=!1;for(;o=_();)if(o===4)s||(s=!0,t!==0&&(a=t,W.currentNode=W.currentNode.parentNode.children[a]));else{const l=Vt();if(n<=l)return[Ae(),n];n-=l}var a},e,r),me=(e,t,n,r)=>{let _,o,s=!0;if(e===t&&!t.hasChildNodes())return[0,0];if(ve(t)&&!Wt(t)&&t.hasChildNodes()){const l=mn(n,t.childNodes.length-1);t=t.childNodes[l],s=l===n,n=0}const a=((l,c)=>{let p=c;for(;;){const i=p.parentElement;if(i===l)break;p=i}return p})(e,t);return r._(a)?(_=a,o=Array.prototype.indexOf.call(e.children,_)):(_=e,o=0),Ve(l=>{let c,p=0;for(;c=l();)c===3?(o++,p=0):p+=Vt();return[o,p+n]},_,r,{v:t,D:s})},Lt=(e,t,{startOffset:n,startContainer:r,endOffset:_,endContainer:o})=>{const s=me(e,r,n,t);return[s,r===o&&n===_?s:me(e,o,_,t)]},$n=e=>K.from(e.map(t=>t.t===2?{...t,i:[t.i.reduce((n,r)=>ue(n,r),[])]}:t)),En=(e,{schema:{single:t,js:n,void:r,copy:_,paste:o},isBlock:s=bn,onChange:a,onKeyDown:l})=>{if(!window.InputEvent||typeof InputEvent.prototype.getTargetRanges!="function"){console.error("beforeinput event is not supported.");const u=()=>{};return{dispose:u,command:u,readonly:u}}const{contentEditable:c,role:p,ariaMultiLine:i,ariaReadOnly:v}=e,d=e.style.whiteSpace;e.role="textbox",e.style.whiteSpace="pre-wrap",t||(e.ariaMultiLine="true");let $=!1,P=!1,w=!1,h=[[0,0],[0,0]],b=null,A=null,S=!1,I=!1,O=!1;const R=qt(e),M={h:R,_:s},j=()=>{e.contentEditable=$?"false":"true",e.ariaReadOnly=$?"true":null};j();const z=(u,f)=>((m,g,y)=>Ve(x=>{let E,L=null,H="",Ee=!1;const oe=[],it=()=>{H&&(L||(L=[]),L.push({text:H}),H="")},ke=()=>{it(),!L&&Ee&&(L=[]),L&&oe.push(L),L=null,Ee=!1};for(;E=x();)if(E===4)ke();else if(Ee=!0,E===1){let we=Ae().data;H+=we}else if(E===2){it();const we=Ae(),st=y(we);st&&L.push({data:st})}else E===3&&ke();return ke(),oe.length||oe.push([]),oe},m,g,void 0))(u,f,r),T=()=>Y.get()[0],F=[],X=u=>{$||(F.unshift(u),Kt(jt))},Y=(u=>{let f=0,m=0;const g=Date.now,y=[u],x=()=>y[f];return{get:x,set:E=>{y[f]=E},undo:()=>f>0?(f--,x()):void 0,redo:()=>f<y.length-1?(f++,x()):void 0,push:E=>{const L=g();f!==0&&L-m<500&&f--,m=L,y[++f]=E,y.splice(f+1),f>500&&(f--,y.shift())}}})([z(e,M),h]),G=((u,f)=>{let m=!1;const g=[],y=L=>{m&&g.push(...L)},x=new MutationObserver(L=>{y(L),m||f()}),E=()=>{y(x.takeRecords())};return x.observe(u,{characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{M(L){!m&&L&&E(),m=L},O:()=>(E(),g.splice(0)),I(){g.splice(0),x.disconnect()}}})(e,()=>{I&&(xe(R,e,h,M),A!=null&&(clearTimeout(A),A=null))}),ye=new Set,Kt=u=>{ye.has(u)||(ye.add(u),gn(()=>{ye.delete(u),u()}))},qe=u=>{h=u,A=setTimeout(()=>{xe(R,e,u,M)})},Q=()=>{h=((u,f)=>{const m=Oe(u),g=Et(m,u);if(!g)return[[0,0],[0,0]];const y=Lt(u,f,g);return(m.anchorNode===m.focusNode?m.anchorOffset>m.focusOffset:2&(x=m.anchorNode,E=m.focusNode,x.compareDocumentPosition(E)))?[y[1],y[0]]:y;var x,E})(e,M)},be=()=>{const u=G.O();if(G.M(!1),u.length){let f;for(;f=u.pop();)if(f.type==="childList"){const{target:m,removedNodes:g,addedNodes:y,nextSibling:x}=f;for(let E=g.length-1;E>=0;E--)m.insertBefore(g[E],x);for(let E=y.length-1;E>=0;E--)m.removeChild(y[E])}else f.target.nodeValue=f.oldValue;G.O()}X(b),S=!1,b=null,w=xe(R,e,h,M)},jt=()=>{if(F.length){let m,g=[...T()],y=[...h];for(;m=F.pop();)t&&(m=$n(m)),fn(g,y,m);const x=T(),E=h;f=x,(u=g).length===f.length&&u.every((L,H)=>L===f[H])||(Y.set([x,E]),Y.push([g,y]),a(n(g))),qe(y)}var u,f},Ke=u=>{if(!S){if(l&&l(u))u.preventDefault();else if((u.metaKey||u.ctrlKey)&&!u.altKey&&u.code==="KeyZ"&&(u.preventDefault(),G.M(!1),!$)){const f=u.shiftKey?Y.redo():Y.undo();f&&(a(n(f[0])),qe(f[1]))}}},je=()=>{S||be()},ze=u=>{u.preventDefault();const f=u.inputType;if(f.startsWith("format")||f==="historyUndo"||f==="historyRedo")return;S?G.M(!0):Q();const m=u.getTargetRanges()[0];if(m){const g=Lt(e,M,m);let y=f==="insertParagraph"||f==="insertLineBreak"?`
`:u.data;if(y==null){const x=u.dataTransfer;x&&(y=x.getData("text/plain"))}b||(b=new K().select(...h)),V(...g)!==0&&b.delete(...g),y&&b.insert(g[0],It(y))}S||be()},Ge=()=>{S||Q(),S=!0},Ze=()=>{be()},Je=()=>{I=!0,Q()},Xe=()=>{I=!1},Ye=()=>{w?w=!1:!I||S||O||Q()},$e=u=>{Q(),V(...h)!==0&&_(u,((f,m,g)=>pe(m,g)===0?[Z(Z(f[m[0]],g[1])[0],m[1])[1]]:[Z(f[m[0]],m[1])[1],...f.slice(m[0]+1,g[0]),Z(f[g[0]],g[1])[0]])(T(),...ie(h)),()=>Et(Oe(e),e).cloneContents())},Qe=u=>o(u,f=>z(f,M)),et=u=>{u.preventDefault(),$e(u.clipboardData)},tt=u=>{u.preventDefault(),$||($e(u.clipboardData),X(new K().delete(...ie(h))))},nt=u=>{u.preventDefault();const[f,m]=ie(h);X(new K().delete(f,m).insert(f,Qe(u.clipboardData)))},rt=u=>{u.preventDefault();const f=u.dataTransfer,m=((g,y,{clientX:x,clientY:E},L)=>{if(g.caretPositionFromPoint){const H=g.caretPositionFromPoint(x,E);if(H)return me(y,H.offsetNode,H.offset,L)}else if(g.caretRangeFromPoint){const H=g.caretRangeFromPoint(x,E);if(H)return me(y,H.startContainer,H.startOffset,L)}})(R,e,u,M);if(f&&m){const g=new K;O&&g.delete(...ie(h));const y=g.rebasePos(m);g.select(y,y).insert(y,Qe(f)).select(y),X(g),e.focus({preventScroll:!0})}},ot=u=>{O=!0,$e(u.dataTransfer)},_t=()=>{O=!1};return R.addEventListener("selectionchange",Ye),e.addEventListener("keydown",Ke),e.addEventListener("input",je),e.addEventListener("beforeinput",ze),e.addEventListener("compositionstart",Ge),e.addEventListener("compositionend",Ze),e.addEventListener("focus",Je),e.addEventListener("blur",Xe),e.addEventListener("copy",et),e.addEventListener("cut",tt),e.addEventListener("paste",nt),e.addEventListener("drop",rt),e.addEventListener("dragstart",ot),e.addEventListener("dragend",_t),{dispose:()=>{P||(P=!0,e.contentEditable=c,e.role=p,e.ariaMultiLine=i,e.ariaReadOnly=v,e.style.whiteSpace=d,G.I(),R.removeEventListener("selectionchange",Ye),e.removeEventListener("keydown",Ke),e.removeEventListener("input",je),e.removeEventListener("beforeinput",ze),e.removeEventListener("compositionstart",Ge),e.removeEventListener("compositionend",Ze),e.removeEventListener("focus",Je),e.removeEventListener("blur",Xe),e.removeEventListener("copy",et),e.removeEventListener("cut",tt),e.removeEventListener("paste",nt),e.removeEventListener("drop",rt),e.removeEventListener("dragstart",ot),e.removeEventListener("dragend",_t))},command:(u,...f)=>{const m=u(T(),h,...f);m&&X(m)},readonly:u=>{$=u,j()}}},kn=({multiline:e}={})=>({single:!e,js:Ce,void:()=>{},copy:(t,n)=>{t.setData("text/plain",Ce(n))},paste:t=>It(t.getData("text/plain"))});function wn(){const e=on(null),[t,n]=tn(`Hello World.
ã“ã‚“ã«ã¡ã¯ã€‚
ðŸ‘â¤ï¸ðŸ§‘â€ðŸ§‘â€ðŸ§’`);return rn(()=>{if(e.current)return En(e.current,{schema:kn({multiline:!0}),onChange:n}).dispose},[]),ce("div",{ref:e,style:{backgroundColor:"white",border:"solid 1px darkgray",padding:8},children:t.split(`
`).map((r,_)=>ce("div",{children:r||ce("br",{})},_))})}Qt(ce(wn,{}),document.getElementById("app"));
